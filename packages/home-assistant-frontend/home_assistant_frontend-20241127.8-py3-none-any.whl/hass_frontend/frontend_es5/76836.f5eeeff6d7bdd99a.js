"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["76836"],{81821:function(e,t,i){i.d(t,{O:function(){return G}});var n,r,o,a,s,u,d,l,h,c,f,g,v=i("63038"),p=i("9833"),m=i("94524"),_=i("27862"),k=i("52565"),y=i("92776"),E=i("5776"),Z=i("21475"),b=i("77204"),C=(i("38419"),i("71695"),i("83069"),i("64228"),i("19423"),i("52961"),i("42713"),i("40251"),i("99341"),i("39527"),i("41360"),i("13334"),i("49207"),i("47021"),i("57243")),w=i("50778"),x=i("67064"),S=i("36522"),B=i("41680"),I=i("48045"),U=(i("99426"),i("97206"),i("64889"),i("61327")),M=(i("52247"),i("63619"),function(e){function t(e,i,n){var r;return(0,k.Z)(this,t),(r=(0,y.Z)(this,t,[e])).warnings=void 0,r.errors=void 0,r.name="GUISupportError",r.warnings=i,r.errors=n,r}return(0,E.Z)(t,e),(0,_.Z)(t)}((0,U.Z)(Error))),G=(0,Z.Z)(null,(function(e,t){var Z,U,G,L,T,Y,z=function(t){function i(){var t;(0,k.Z)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,y.Z)(this,i,[].concat(r)),e(t),t}return(0,E.Z)(i,t),(0,_.Z)(i)}(t);return{F:z,d:[{kind:"field",decorators:[(0,w.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,w.Cb)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,w.Cb)({attribute:!1})],key:"context",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_configElement",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_subElementEditorConfig",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_guiMode",value:function(){return!0}},{kind:"field",decorators:[(0,w.SB)()],key:"_errors",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_guiSupported",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_loading",value:function(){return!1}},{kind:"field",decorators:[(0,w.IO)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"get",key:"value",value:function(){return this._config}},{kind:"set",key:"value",value:function(e){this._config&&(0,I.v)(e,this._config)||(this._config=e,this._errors=void 0,this._setConfig())}},{kind:"method",key:"_setConfig",value:function(){var e=this;if(!this._errors)try{this._updateConfigElement()}catch(t){this._errors=[t.message]}this.updateComplete.then((function(){var t;(0,S.B)(e,"config-changed",{config:e.value,error:null===(t=e._errors)||void 0===t?void 0:t.join(", "),guiModeAvailable:!(e.hasWarning||e.hasError||!1===e._guiSupported)})}))}},{kind:"get",key:"hasWarning",value:function(){return void 0!==this._warnings&&this._warnings.length>0}},{kind:"get",key:"hasError",value:function(){return void 0!==this._errors&&this._errors.length>0}},{kind:"get",key:"GUImode",value:function(){return this._guiMode}},{kind:"set",key:"GUImode",value:function(e){var t=this;this._guiMode=e,this.updateComplete.then((function(){(0,S.B)(t,"GUImode-changed",{guiMode:e,guiModeAvailable:!(t.hasWarning||t.hasError||!1===t._guiSupported)})}))}},{kind:"method",key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{kind:"method",key:"focusYamlEditor",value:function(){var e;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),this._yamlEditor&&this._yamlEditor.focus()}},{kind:"method",key:"getConfigElement",value:(Y=(0,m.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return Y.apply(this,arguments)})},{kind:"method",key:"getConfigForm",value:(T=(0,m.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return T.apply(this,arguments)})},{kind:"method",key:"renderConfigElement",value:function(){return(0,C.dy)(n||(n=(0,v.Z)(["",""])),this._configElement)}},{kind:"method",key:"_renderSubElement",value:function(){return(0,C.dy)(r||(r=(0,v.Z)([' <hui-sub-element-editor .hass="','" .config="','" @go-back="','" @config-changed="','"> </hui-sub-element-editor> '])),this.hass,this._subElementEditorConfig,this._goBack,this._subElementChanged)}},{kind:"method",key:"_subElementChanged",value:function(e){var t,i;e.stopPropagation();var n=e.detail.config;this._subElementEditorConfig=Object.assign(Object.assign({},this._subElementEditorConfig),{},{elementConfig:n}),null===(t=(i=this._subElementEditorConfig).saveElementConfig)||void 0===t||t.call(i,n)}},{kind:"method",key:"_goBack",value:function(e){e.stopPropagation(),this._subElementEditorConfig=void 0}},{kind:"method",key:"_editSubElement",value:(L=(0,m.Z)((0,p.Z)().mark((function e(t){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,Promise.all([i.e("91552"),i.e("78456"),i.e("72206"),i.e("56898"),i.e("35671"),i.e("92139"),i.e("29818"),i.e("32146"),i.e("59990"),i.e("3889"),i.e("18865"),i.e("44959"),i.e("48342"),i.e("79931"),i.e("44251"),i.e("39379"),i.e("3371"),i.e("63556"),i.e("38326"),i.e("10745"),i.e("84860"),i.e("95444"),i.e("99125"),i.e("7349")]).then(i.bind(i,50357));case 3:this._subElementEditorConfig={type:t.detail.type,elementConfig:t.detail.config,context:t.detail.context,saveElementConfig:t.detail.saveConfig};case 4:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{kind:"method",key:"render",value:function(){return(0,C.dy)(o||(o=(0,v.Z)([' <div class="wrapper"> '," "," "," "," </div> "])),this.GUImode?(0,C.dy)(a||(a=(0,v.Z)([' <div class="gui-editor" @edit-sub-element="','"> '," </div> "])),this._editSubElement,this._loading?(0,C.dy)(s||(s=(0,v.Z)([' <ha-circular-progress indeterminate class="center margin-bot"></ha-circular-progress> ']))):(0,x.F)(this._subElementEditorConfig?this._renderSubElement():this.renderConfigElement())):(0,C.dy)(u||(u=(0,v.Z)([' <div class="yaml-editor"> <ha-yaml-editor .defaultValue="','" autofocus .hass="','" @value-changed="','" @keydown="','" dir="ltr"></ha-yaml-editor> </div> '])),this._config,this.hass,this._handleYAMLChanged,this._ignoreKeydown),!1===this._guiSupported&&!1===this._loading?(0,C.dy)(d||(d=(0,v.Z)([' <ha-alert alert-type="info" .title="','"> '," <br> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this.hass.localize("ui.errors.config.visual_editor_not_supported_reason_type"),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):C.Ld,this.hasError?(0,C.dy)(l||(l=(0,v.Z)([' <ha-alert alert-type="error" .title="','"> <ul> '," </ul> </ha-alert> "])),this.hass.localize("ui.errors.config.configuration_error"),this._errors.map((function(e){return(0,C.dy)(h||(h=(0,v.Z)(["<li>","</li>"])),e)}))):C.Ld,this.hasWarning?(0,C.dy)(c||(c=(0,v.Z)([' <ha-alert alert-type="warning" .title="','"> <ul> '," </ul> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this._warnings.map((function(e){return(0,C.dy)(f||(f=(0,v.Z)(["<li>","</li>"])),e)})),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):C.Ld)}},{kind:"method",key:"updated",value:function(e){(0,b.Z)(z,"updated",this,3)([e]),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{kind:"method",key:"_handleUIConfigChanged",value:function(e){if(e.stopPropagation(),this.GUImode){var t=e.detail.config;Object.keys(t).forEach((function(e){void 0===t[e]&&delete t[e]})),this.value=t}}},{kind:"method",key:"_handleYAMLChanged",value:function(e){e.stopPropagation();var t=e.detail.value;e.detail.isValid&&(this._config=t,this._errors=void 0,this._setConfig())}},{kind:"method",key:"unloadConfigElement",value:(G=(0,m.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._configElement=void 0,this._guiSupported=void 0;case 2:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{kind:"method",key:"loadConfigElement",value:(U=(0,m.Z)((0,p.Z)().mark((function e(){var t,n,r,o,a,s,u=this;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._configElement){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getConfigElement();case 4:if(t=e.sent){e.next=18;break}return e.next=8,this.getConfigForm();case 8:if(!(n=e.sent)){e.next=18;break}return e.next=12,i.e("10106").then(i.bind(i,66374));case 12:t=document.createElement("hui-form-editor"),r=n.schema,o=n.assertConfig,a=n.computeLabel,s=n.computeHelper,t.schema=r,a&&(t.computeLabel=a),s&&(t.computeHelper=s),o&&(t.assertConfig=o);case 18:t?(t.hass=this.hass,"lovelace"in t&&(t.lovelace=this.lovelace),t.context=this.context,t.addEventListener("config-changed",(function(e){return u._handleUIConfigChanged(e)})),this._guiSupported=!0):this._guiSupported=!1,this._configElement=t;case 20:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)})},{kind:"method",key:"_updateConfigElement",value:(Z=(0,m.Z)((0,p.Z)().mark((function e(){var t,i;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this._errors=void 0,this._warnings=void 0,e.next=7,this.loadConfigElement();case 7:if(!this._configElement){e.next=18;break}e.prev=8,this._configElement.setConfig(this.value),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(8),t=(0,B.p)(this.hass,e.t0),new M("Config is not supported",t.warnings,t.errors);case 16:e.next=20;break;case 18:this._guiSupported=!1,this.GUImode=!1;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(2),e.t1 instanceof M?(this._warnings=null!==(i=e.t1.warnings)&&void 0!==i?i:[e.t1.message],this._errors=e.t1.errors||void 0):this._errors=[e.t1.message],this.GUImode=!1;case 26:return e.prev=26,this._loading=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[2,22,26,29],[8,12]])}))),function(){return Z.apply(this,arguments)})},{kind:"method",key:"_ignoreKeydown",value:function(e){e.stopPropagation()}},{kind:"get",static:!0,key:"styles",value:function(){return(0,C.iv)(g||(g=(0,v.Z)([":host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}ha-circular-progress{display:block;margin:auto}"])))}}]}}),C.oi)},6973:function(e,t,i){i.d(t,{k:function(){return f}});var n=i(9833),r=i(94524),o=i(27862),a=i(52565),s=i(92776),u=i(5776),d=i(21475),l=i(77204),h=(i(52247),i(38419),i(50778)),c=i(81821),f=(0,d.Z)(null,(function(e,t){var i,d=function(t){function i(){var t;(0,a.Z)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,s.Z)(this,i,[].concat(r)),e(t),t}return(0,u.Z)(i,t),(0,o.Z)(i)}(t);return{F:d,d:[{kind:"field",decorators:[(0,h.SB)()],key:"_configElementType",value:void 0},{kind:"get",key:"configElementType",value:function(){return this.value?this.value.type:void 0}},{kind:"method",key:"loadConfigElement",value:(i=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._configElementType===this.configElementType){e.next=5;break}if(this.unloadConfigElement(),this.configElementType){e.next=4;break}throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));case 4:this._configElementType=this.configElementType;case 5:return e.abrupt("return",(0,l.Z)(d,"loadConfigElement",this,3)([]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}]}}),c.O)},67064:function(e,t,i){i.d(t,{F:function(){return c}});var n=i("22936"),r=i("52565"),o=i("27862"),a=i("92776"),s=i("5776"),u=(i("71695"),i("42713"),i("99341"),i("46692"),i("47021"),i("51368")),d=i("45779"),l=i("53232"),h=function(e){return(0,l.dZ)(e)?e._$litType$.h:e.strings},c=(0,d.XM)(function(e){function t(e){var i;return(0,r.Z)(this,t),(i=(0,a.Z)(this,t,[e])).tt=new WeakMap,i}return(0,s.Z)(t,e),(0,o.Z)(t,[{key:"render",value:function(e){return[e]}},{key:"update",value:function(e,t){var i=(0,n.Z)(t,1)[0],r=(0,l.hN)(this.et)?h(this.et):null,o=(0,l.hN)(i)?h(i):null;if(null!==r&&(null===o||r!==o)){var a=(0,l.i9)(e).pop(),s=this.tt.get(r);if(void 0===s){var d=document.createDocumentFragment();(s=(0,u.sY)(u.Ld,d)).setConnected(!1),this.tt.set(r,s)}(0,l.hl)(s,[a]),(0,l._Y)(s,void 0,a)}if(null!==o){if(null===r||r!==o){var c=this.tt.get(o);if(void 0!==c){var f=(0,l.i9)(c).pop();(0,l.E_)(e),(0,l._Y)(e,void 0,f),(0,l.hl)(e,[f])}}this.et=i}else this.et=void 0;return this.render(i)}}])}(d.Xe))}}]);
//# sourceMappingURL=76836.f5eeeff6d7bdd99a.js.map