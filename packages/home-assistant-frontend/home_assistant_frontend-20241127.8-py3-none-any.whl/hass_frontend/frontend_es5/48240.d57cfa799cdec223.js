"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["48240"],{50875:function(t,e,i){i.d(e,{Eu:function(){return r},hZ:function(){return s}});var n=i(11259),o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return o[t%o.length]}function s(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||r(t);return(0,n.Rq)(i)}},74564:function(t,e,i){i.d(e,{Z:function(){return o}});i(52247),i(95078),i(19134),i(97499),i(97003);var n=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function o(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:n(t.substr(0,t.length-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:n(e[0]),h:1}:{w:n(e[0]),h:n(e[1])}}catch(i){}return null}},11823:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return O},DEFAULT_ZOOM:function(){return F}});var o,r,s,a=i(11655),u=i(10265),c=i(63038),d=i(9833),f=i(94524),l=i(27862),h=i(52565),_=i(92776),v=i(5776),g=i(21475),b=i(77204),y=(i(52247),i(38419),i(18801),i(71695),i(64228),i(92745),i(63619),i(23509),i(49278),i(52961),i(42713),i(37362),i(40251),i(99341),i(39527),i(67670),i(13334),i(47021),i(57243)),m=i(50778),k=i(27486),p=i(50875),w=i(72344),E=i(73850),H=i(47194),Z=i(48045),M=i(74564),x=(i(99426),i(54977),i(23334),i(65986)),C=i(6280),A=i(69223),S=i(93331),V=i(29401),z=t([x,C]);[x,C]=z.then?(await z)():z;var O=0,F=14;(0,g.Z)([(0,m.Mo)("hui-map-card")],(function(t,e){var n,g=function(e){function i(){var e;(0,h.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=(0,_.Z)(this,i,[].concat(o)),t(e),e}return(0,v.Z)(i,e),(0,l.Z)(i)}(e);return{F:g,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"layout",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,m.IO)("ha-map")],key:"_map",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_mapEntities",value:function(){return[]}},{kind:"field",key:"_colorDict",value:function(){return{}}},{kind:"field",key:"_colorIndex",value:function(){return 0}},{kind:"field",decorators:[(0,m.SB)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"setConfig",value:function(t){var e;if(!t)throw new Error("Error in card configuration.");if(!(null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either entities or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");this._config=t,this._configEntities=t.entities?(0,V.A)(t.entities):[],this._mapEntities=this._getMapEntities()}},{kind:"method",key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,M.Z)(this._config.aspect_ratio),i=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(i)/25)||3}},{kind:"method",static:!0,key:"getConfigElement",value:(n=(0,f.Z)((0,d.Z)().mark((function t(){return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e("46379"),i.e("24199"),i.e("78943"),i.e("41258"),i.e("87562"),i.e("7010"),i.e("62524"),i.e("67390"),i.e("3049"),i.e("71189"),i.e("47818"),i.e("65152")]).then(i.bind(i,96216));case 2:return t.abrupt("return",document.createElement("hui-map-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){return{type:"map",entities:(0,A.j)(t,2,e,i,["device_tracker"]),theme_mode:"auto"}}},{kind:"method",key:"render",value:function(){var t;if(!this._config)return y.Ld;if(this._error)return(0,y.dy)(o||(o=(0,c.Z)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code);var e=!(!this._config.dark_mode&&"dark"!==this._config.theme_mode)||"light"!==this._config.theme_mode&&this.hass.themes.darkMode,i=this._config.theme_mode||(this._config.dark_mode?"dark":"auto");return(0,y.dy)(r||(r=(0,c.Z)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" .themeMode="','" interactiveZones renderPassive></ha-map> <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:F,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones,i,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",e?"color:#ffffff":"color:#000000",this._fitMap)}},{kind:"method",key:"shouldUpdate",value:function(t){var e,i;if(!t.has("hass")||t.size>1)return!0;var n=t.get("hass");return!n||!this._configEntities||(n.themes.darkMode!==this.hass.themes.darkMode||(!!t.has("_stateHistory")||(!(null===(e=this._config)||void 0===e||!e.geo_location_sources||n.states===this.hass.states)||(null!==(i=this._config)&&void 0!==i&&i.entities?(0,S.Wh)(this,t):(0,S.SN)(this,t)))))}},{kind:"method",key:"willUpdate",value:function(t){var e,i;(0,b.Z)(g,"willUpdate",this,3)([t]),t.has("hass")&&null!==(e=this._config)&&void 0!==e&&e.geo_location_sources&&!(0,Z.v)(this._getSourceEntities(null===(i=t.get("hass"))||void 0===i?void 0:i.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{kind:"method",key:"connectedCallback",value:function(){var t;(0,b.Z)(g,"connectedCallback",this,3)([]),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,b.Z)(g,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:function(){var t,e,i,n=this;(0,w.p)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:O)&&(this._subscribed=(0,C.xS)(this.hass,(function(t){n._subscribed&&(n._stateHistory=t)}),null!==(i=this._config.hours_to_show)&&void 0!==i?i:O,(this._configEntities||[]).map((function(t){return t.entity})),!1,!1,!1).catch((function(t){n._subscribed=void 0,n._error=t})))}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{kind:"method",key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root"),e="panel"===this.layout||"grid"===this.layout;if(this._config&&!e&&t)if(this._config.aspect_ratio){t.style.height="auto";var i=(0,M.Z)(this._config.aspect_ratio);t.style.paddingBottom=i&&i.w>0&&i.h>0?"".concat((100*i.h/i.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{kind:"method",key:"_fitMap",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap()}},{kind:"method",key:"_getColor",value:function(t){var e=this._colorDict[t];return e||(e=(0,p.Eu)(this._colorIndex),this._colorIndex++,this._colorDict[t]=e,e)}},{kind:"method",key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var i=this._config.geo_location_sources.map((function(t){return"string"==typeof t?{source:t}:t})),n=[],o=i.find((function(t){return"all"===t.source})),r=function(){var t,e,r=a[s],u=i.find((function(t){return t.source===r.attributes.source}));"geo_location"===(0,E.M)(r.entity_id)&&(o||u)&&n.push({entity_id:r.entity_id,focus:u?null===(t=u.focus)||void 0===t||t:null===(e=null==o?void 0:o.focus)||void 0===e||e})},s=0,a=Object.values(t);s<a.length;s++)r();return n}},{kind:"method",key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,u.Z)((this._configEntities||[]).map((function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,focus:t.focus,name:t.name}}))),(0,u.Z)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map((function(t){return{entity_id:t.entity_id,focus:t.focus,color:e._getColor(t.entity_id)}}))))}},{kind:"field",key:"_getHistoryPaths",value:function(){var t=this;return(0,k.Z)((function(e,i){var n;if(i&&(null!==(n=e.hours_to_show)&&void 0!==n?n:O)){for(var o=[],r=function(){var n,r,c,d=u[s];if("zone"===(0,E.M)(d))return 0;var f=i[d];if(null==f||!f.length)return 0;var l,h=[],_=(0,a.Z)(f);try{for(_.s();!(l=_.n()).done;){var v=l.value,g=v.a.latitude,b=v.a.longitude;if(g&&b){var y={};y.point=[g,b],y.timestamp=new Date(1e3*v.lu),h.push(y)}}}catch(p){_.e(p)}finally{_.f()}var m=null===(n=t._configEntities)||void 0===n?void 0:n.find((function(t){return t.entity===d})),k=null!==(r=null==m?void 0:m.name)&&void 0!==r?r:d in t.hass.states?(0,H.C)(t.hass.states[d]):d;o.push({points:h,name:k,fullDatetime:(null!==(c=e.hours_to_show)&&void 0!==c?c:O)>144,color:t._getColor(d),gradualOpacity:.8})},s=0,u=Object.keys(i);s<u.length;s++)r();return o}}))}},{kind:"method",key:"getGridOptions",value:function(){return{columns:"full",rows:4,min_columns:6,min_rows:2}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,y.iv)(s||(s=(0,c.Z)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit}ha-icon-button{position:absolute;top:75px;left:3px;outline:0}#root{position:relative;height:100%}"])))}}]}}),y.oi);n()}catch(B){n(B)}}))},49278:function(t,e,i){var n=i(40810),o=i(72878),r=i(88045),s=i(35638),a=i(86256),u=i(29660),c=RangeError,d=String,f=Math.floor,l=o(a),h=o("".slice),_=o(1..toFixed),v=function(t,e,i){return 0===e?i:e%2==1?v(t,e-1,i*t):v(t*t,e/2,i)},g=function(t,e,i){for(var n=-1,o=i;++n<6;)o+=e*t[n],t[n]=o%1e7,o=f(o/1e7)},b=function(t,e){for(var i=6,n=0;--i>=0;)n+=t[i],t[i]=f(n/e),n=n%e*1e7},y=function(t){for(var e=6,i="";--e>=0;)if(""!==i||0===e||0!==t[e]){var n=d(t[e]);i=""===i?n:i+l("0",7-n.length)+n}return i};n({target:"Number",proto:!0,forced:u((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!u((function(){_({})}))},{toFixed:function(t){var e,i,n,o,a=s(this),u=r(t),f=[0,0,0,0,0,0],_="",m="0";if(u<0||u>20)throw new c("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return d(a);if(a<0&&(_="-",a=-a),a>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(a*v(2,69,1))-69)<0?a*v(2,-e,1):a/v(2,e,1),i*=4503599627370496,(e=52-e)>0){for(g(f,0,i),n=u;n>=7;)g(f,1e7,0),n-=7;for(g(f,v(10,n,1),0),n=e-1;n>=23;)b(f,1<<23),n-=23;b(f,1<<n),g(f,1,1),b(f,2),m=y(f)}else g(f,0,i),g(f,1<<-e,0),m=y(f)+l("0",u);return m=u>0?_+((o=m.length)<=u?"0."+l("0",u-o)+m:h(m,0,o-u)+"."+h(m,o-u)):_+m}})},41924:function(t,e,i){i.d(e,{y:function(){return o}});var n=i(53907);function o(t){return(0,n.L)(t,Date.now())}},97836:function(t,e,i){i.d(e,{K:function(){return s}});var n=i(22936),o=i(18492),r=i(7591);function s(t,e,i){var s=(0,o.d)(null==i?void 0:i.in,t,e),a=(0,n.Z)(s,2),u=a[0],c=a[1];return+(0,r.b)(u)==+(0,r.b)(c)}},16444:function(t,e,i){i.d(e,{z:function(){return s}});var n=i(53907),o=i(41924),r=i(97836);function s(t,e){return(0,r.K)((0,n.L)((null==e?void 0:e.in)||t,t),(0,o.y)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=48240.d57cfa799cdec223.js.map