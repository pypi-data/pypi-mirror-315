"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["10187"],{6736:function(t,e,a){a.d(e,{f:function(){return l}});var n=a(11655),i=a(27862),r=a(52565),s=a(92776),o=a(5776),c=a(21475),u=a(77204),d=(a(38419),a(19083),a(71695),a(42713),a(40251),a(61006),a(39527),a(36993),a(47021),a(50778)),l=function(t){var e=(0,c.Z)(null,(function(t,e){var a=function(e){function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=(0,s.Z)(this,a,[].concat(i)),t(e),e}return(0,o.Z)(a,e),(0,i.Z)(a)}(e);return{F:a,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,u.Z)(a,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,u.Z)(a,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,u.Z)(a,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var e,i=(0,n.Z)(t.keys());try{for(i.s();!(e=i.n()).done;){var r=e.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this.__checkSubscribed()}}catch(s){i.e(s)}finally{i.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===e[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return e}},20548:function(t,e,a){a.d(e,{H:function(){return r}});a(81804);var n=a(11259),i=a(4643);function r(t,e,a,r,s,o){var c=t.getPropertyValue(s+"-"+o).trim(),u=c.length>0?c:t.getPropertyValue(s).trim(),d=(0,n.Rq)(u);return 0===c.length&&o&&(d=(0,n.CO)((0,n.p3)(e?(0,i.C)((0,n.Rw)((0,n.wK)(d)),o):(0,i.W)((0,n.Rw)((0,n.wK)(d)),o)))),r?d+=a?"32":"7F":a&&(d+="7F"),d}},53259:function(t,e,a){a.a(t,(async function(t,n){try{a.d(e,{J:function(){return p}});a(38419),a(19423);var i=a(21893),r=a(13809),s=a(13633),o=a(38836),c=a(50602),u=a(46467),d=a(33570),l=t([u,d,c]);function f(t,e){var a=new Date(e);return t>2&&0===a.getHours()&&(a=(0,i.b)(a,1)),a.setMinutes(0,0,0),t>35&&a.setDate(1),t>2&&a.setHours(0),a.getTime()}function p(t,e,a,n,i,l,h){var p=(0,r.j)(e,t),v=void 0!==l&&void 0!==h;if(v&&p<=35){var g=(0,s.A)(e,t),y=(0,s.A)(h,l);y>g?e=(0,o.T)(e,y-g):g>y&&(h=(0,o.T)(h,g-y))}var k={parsing:!1,animation:!1,interaction:{mode:"x"},scales:{x:{type:"time",suggestedMin:t.getTime(),max:f(p,e),adapters:{date:{locale:a,config:n}},ticks:{maxRotation:0,sampleSize:5,autoSkipPadding:20,font:function(t){return t.tick&&t.tick.major?{weight:"bold"}:{}}},time:{tooltipFormat:p>35?"monthyear":p>7?"date":p>2?"weekday":p>0?"datetime":"hour",minUnit:p>35?"month":p>2?"day":"hour"}},y:{stacked:!0,type:"linear",title:{display:!0,text:i},ticks:{beginAtZero:!0,callback:function(t){return(0,c.uf)(Math.abs(t),a)}}}},plugins:{tooltip:{position:"nearest",filter:function(t){return"0"!==t.formattedValue},itemSort:function(t,e){return e.datasetIndex-t.datasetIndex},callbacks:{title:function(t){if(p>0)return t[0].label;var e=new Date(t[0].parsed.x);return"".concat(v?"".concat((0,u.ud)(e,a,n),": "):"").concat((0,d.mr)(e,a,n)," â€“ ").concat((0,d.mr)((0,o.T)(e,1),a,n))},label:function(t){return"".concat(t.dataset.label,": ").concat((0,c.uf)(t.parsed.y,a)," ").concat(i)}}},filler:{propagate:!1},legend:{display:!1,labels:{usePointStyle:!0}}},elements:{bar:{borderWidth:1.5,borderRadius:4},point:{hitRadius:50}},locale:(0,c.Hd)(a)};return v&&(k.scales.xAxisCompare=Object.assign(Object.assign({},k.scales.x),{},{suggestedMin:l.getTime(),max:f(p,h),display:!1})),k}[u,d,c]=l.then?(await l)():l,n()}catch(h){n(h)}}))},52081:function(t,e,a){a.a(t,(async function(t,n){try{a.r(e),a.d(e,{HuiEnergyWaterGraphCard:function(){return P}});var i,r,s,o,c=a(9833),u=a(10265),d=a(94524),l=a(11655),h=a(63038),f=a(27862),p=a(52565),v=a(92776),g=a(5776),y=a(21475),k=(a(38419),a(91599),a(92745),a(19423),a(42713),a(39527),a(99790),a(41360),a(49207),a(42625)),b=a(83389),_=a(16444),m=a(57243),S=a(50778),x=a(35359),Z=a(27486),w=a(20548),C=a(50602),D=(a(25179),a(54977),a(1118)),j=a(17705),O=a(6736),H=a(93331),R=a(53259),A=t([R,C,D]);[R,C,D]=A.then?(await A)():A;var P=(0,y.Z)([(0,S.Mo)("hui-energy-water-graph-card")],(function(t,e){var a,n=function(e){function a(){var e;(0,p.Z)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=(0,v.Z)(this,a,[].concat(i)),t(e),e}return(0,g.Z)(a,e),(0,f.Z)(a)}(e);return{F:n,d:[{kind:"field",decorators:[(0,S.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,S.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,S.SB)()],key:"_chartData",value:function(){return{datasets:[]}}},{kind:"field",decorators:[(0,S.SB)()],key:"_start",value:function(){return(0,k.I)()}},{kind:"field",decorators:[(0,S.SB)()],key:"_end",value:function(){return(0,b.p)()}},{kind:"field",decorators:[(0,S.SB)()],key:"_compareStart",value:void 0},{kind:"field",decorators:[(0,S.SB)()],key:"_compareEnd",value:void 0},{kind:"field",decorators:[(0,S.SB)()],key:"_unit",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"hassSubscribe",value:function(){var t,e=this;return[(0,D.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((function(t){return e._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,H.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?(0,m.dy)(i||(i=(0,h.Z)([" <ha-card> ",' <div class="content ','"> <ha-chart-base .hass="','" .data="','" .options="','" chart-type="bar"></ha-chart-base> '," </div> </ha-card> "])),this._config.title?(0,m.dy)(r||(r=(0,h.Z)(['<h1 class="card-header">',"</h1>"])),this._config.title):"",(0,x.$)({"has-header":!!this._config.title}),this.hass,this._chartData,this._createOptions(this._start,this._end,this.hass.locale,this.hass.config,this._unit,this._compareStart,this._compareEnd),this._chartData.datasets.length?"":(0,m.dy)(s||(s=(0,h.Z)(['<div class="no-data"> '," </div>"])),(0,_.z)(this._start)?this.hass.localize("ui.panel.lovelace.cards.energy.no_data"):this.hass.localize("ui.panel.lovelace.cards.energy.no_data_period"))):m.Ld}},{kind:"field",key:"_createOptions",value:function(){var t=this;return(0,Z.Z)((function(e,a,n,i,r,s,o){var c=(0,R.J)(e,a,n,i,r,s,o);return Object.assign(Object.assign({},c),{},{plugins:Object.assign(Object.assign({},c.plugins),{},{tooltip:Object.assign(Object.assign({},c.plugins.tooltip),{},{callbacks:Object.assign(Object.assign({},c.plugins.tooltip.callbacks),{},{footer:function(e){if(e.length<2)return[];var a,i=0,s=(0,l.Z)(e);try{for(s.s();!(a=s.n()).done;){var o=a.value;i+=o.dataset.data[o.dataIndex].y}}catch(c){s.e(c)}finally{s.f()}return 0===i?[]:[t.hass.localize("ui.panel.lovelace.cards.energy.energy_water_graph.total_consumed",{num:(0,C.uf)(i,n),unit:r})]}})})})})}))}},{kind:"method",key:"_getStatistics",value:(a=(0,d.Z)((0,c.Z)().mark((function t(e){var a,n,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.prefs.energy_sources.filter((function(t){return"water"===t.type})),this._unit=(0,D.b)(this.hass),n=[],i=getComputedStyle(this),n.push.apply(n,(0,u.Z)(this._processDataSet(e.stats,e.statsMetadata,a,i))),e.statsCompare&&(n.push({order:0,data:[]}),n.push({order:999,data:[],xAxisID:"xAxisCompare"}),n.push.apply(n,(0,u.Z)(this._processDataSet(e.statsCompare,e.statsMetadata,a,i,!0)))),this._start=e.start,this._end=e.end||(0,b.p)(),this._compareStart=e.startCompare,this._compareEnd=e.endCompare,this._chartData={datasets:n};case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{kind:"method",key:"_processDataSet",value:function(t,e,a,n){var i=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[];return a.forEach((function(a,o){var c=null,u=[];if(a.stat_energy_from in t){var d,h,f=t[a.stat_energy_from],p=(0,l.Z)(f);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(null!==v.change&&void 0!==v.change&&c!==v.start){var g=new Date(v.start);u.push({x:g.getTime(),y:v.change}),c=v.start,d=v.end}}}catch(y){p.e(y)}finally{p.f()}1===u.length&&u.push({x:d,y:0})}s.push({label:(0,j.Kd)(i.hass,a.stat_energy_from,e[a.stat_energy_from]),borderColor:(0,w.H)(n,i.hass.themes.darkMode,!1,r,"--energy-water-color",o),backgroundColor:(0,w.H)(n,i.hass.themes.darkMode,!0,r,"--energy-water-color",o),data:u,order:1,stack:"water",xAxisID:r?"xAxisCompare":void 0})})),s}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.iv)(o||(o=(0,h.Z)(["ha-card{height:100%}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.no-data{position:absolute;height:100%;top:0;left:0;right:0;display:flex;justify-content:center;align-items:center;padding:20%;margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;box-sizing:border-box}"])))}}]}}),(0,O.f)(m.oi));n()}catch(z){n(z)}}))},41924:function(t,e,a){a.d(e,{y:function(){return i}});var n=a(53907);function i(t){return(0,n.L)(t,Date.now())}},97836:function(t,e,a){a.d(e,{K:function(){return s}});var n=a(22936),i=a(18492),r=a(7591);function s(t,e,a){var s=(0,i.d)(null==a?void 0:a.in,t,e),o=(0,n.Z)(s,2),c=o[0],u=o[1];return+(0,r.b)(c)==+(0,r.b)(u)}},16444:function(t,e,a){a.d(e,{z:function(){return s}});var n=a(53907),i=a(41924),r=a(97836);function s(t,e){return(0,r.K)((0,n.L)((null==e?void 0:e.in)||t,t),(0,i.y)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=10187.3ab0fccf8942259d.js.map