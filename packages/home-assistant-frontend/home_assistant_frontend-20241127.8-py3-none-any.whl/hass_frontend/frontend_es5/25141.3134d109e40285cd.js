"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["25141"],{6736:function(t,n,e){e.d(n,{f:function(){return l}});var i=e(11655),a=e(27862),r=e(52565),o=e(92776),s=e(5776),u=e(21475),c=e(77204),d=(e(38419),e(19083),e(71695),e(42713),e(40251),e(61006),e(39527),e(36993),e(47021),e(50778)),l=function(t){var n=(0,u.Z)(null,(function(t,n){var e=function(n){function e(){var n;(0,r.Z)(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=(0,o.Z)(this,e,[].concat(a)),t(n),n}return(0,s.Z)(e,n),(0,a.Z)(e)}(n);return{F:e,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,c.Z)(e,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,c.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,c.Z)(e,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var n,a=(0,i.Z)(t.keys());try{for(a.s();!(n=a.n()).done;){var r=n.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this.__checkSubscribed()}}catch(o){a.e(o)}finally{a.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,n=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===n[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return n}},67790:function(t,n,e){e.a(t,(async function(t,i){try{e.r(n);var a,r,o,s,u,c,d=e(63038),l=e(27862),h=e(52565),f=e(92776),v=e(5776),g=e(21475),_=(e(38419),e(64228),e(52805),e(42713),e(37362),e(39527),e(13334),e(34595),e(14394),e(57243)),y=e(50778),p=e(69634),b=e(34618),m=(e(54977),e(82062)),k=(e(37583),e(1118)),S=e(17705),x=e(6736),Z=e(62577),M=e(10188),w=e(93331),C=t([m,k,M]);[m,k,M]=C.then?(await C)():C;var H={maximumFractionDigits:0};(0,g.Z)([(0,y.Mo)("hui-energy-carbon-consumed-gauge-card")],(function(t,n){var e=function(n){function e(){var n;(0,h.Z)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=(0,f.Z)(this,e,[].concat(a)),t(n),n}return(0,v.Z)(e,n),(0,l.Z)(e)}(n);return{F:e,d:[{kind:"field",decorators:[(0,y.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,y.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"getCardSize",value:function(){return 4}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"hassSubscribe",value:function(){var t,n=this;return[(0,k.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((function(t){n._data=t}))]}},{kind:"method",key:"shouldUpdate",value:function(t){var n;return(0,w.SN)(this,t)||t.size>1||!t.has("hass")||!(null===(n=this._data)||void 0===n||!n.co2SignalEntity)&&this.hass.states[this._data.co2SignalEntity]!==t.get("hass").states[this._data.co2SignalEntity]}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return _.Ld;if(!this._data)return(0,_.dy)(a||(a=(0,d.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));if(!this._data.co2SignalEntity)return _.Ld;if(!this.hass.states[this._data.co2SignalEntity])return(0,_.dy)(r||(r=(0,d.Z)(["<hui-warning> "," </hui-warning>"])),(0,Z.i)(this.hass,this._data.co2SignalEntity));var t,n=this._data.prefs,e=(0,k.Jj)(n),i=(0,S.q6)(this._data.stats,e.grid[0].flow_from.map((function(t){return t.stat_energy_from})));if(this._data.fossilEnergyConsumption&&i){var c=this._data.fossilEnergyConsumption?Object.values(this._data.fossilEnergyConsumption).reduce((function(t,n){return t+n}),0):0,l=e.solar&&(0,S.q6)(this._data.stats,e.solar.map((function(t){return t.stat_energy_from})))||0,h=(0,S.q6)(this._data.stats,e.grid[0].flow_to.map((function(t){return t.stat_energy_to})))||0,f=i+Math.max(0,l-h);t=(0,b.N)(100*(1-c/f))}return(0,_.dy)(o||(o=(0,d.Z)([" <ha-card> "," </ha-card> "])),void 0!==t?(0,_.dy)(s||(s=(0,d.Z)([' <ha-svg-icon id="info" .path="','"></ha-svg-icon> <simple-tooltip animation-delay="0" for="info" position="left"> <span> ',' </span> </simple-tooltip> <ha-gauge min="0" max="100" .value="','" .formatOptions="','" .locale="','" label="%" style="','"></ha-gauge> <div class="name"> '," </div> "])),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.card_indicates_energy_used"),t,H,this.hass.locale,(0,p.V)({"--gauge-color":this._computeSeverity(t)}),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_consumed")):(0,_.dy)(u||(u=(0,d.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_not_calculated")))}},{kind:"method",key:"_computeSeverity",value:function(t){return t<10?M.severityMap.red:t<30?M.severityMap.yellow:t>75?M.severityMap.green:M.severityMap.normal}},{kind:"get",static:!0,key:"styles",value:function(){return(0,_.iv)(c||(c=(0,d.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:15px;margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}simple-tooltip>span{font-size:12px;line-height:12px}simple-tooltip{width:80%;max-width:250px;top:8px!important}"])))}}]}}),(0,x.f)(_.oi));i()}catch(z){i(z)}}))},32424:function(t,n,e){e.d(n,{E:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){var r=(0,a.Q)(t,null==e?void 0:e.in);return isNaN(n)?(0,i.L)((null==e?void 0:e.in)||t,NaN):n?(r.setDate(r.getDate()+n),r):r}},38836:function(t,n,e){e.d(n,{T:function(){return r}});var i=e(23711),a=e(76808);function r(t,n,e){return(0,i.n)(t,n*a.vh,e)}},23711:function(t,n,e){e.d(n,{n:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){return(0,i.L)((null==e?void 0:e.in)||t,+(0,a.Q)(t)+n)}},23459:function(t,n,e){e.d(n,{z:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){var r=(0,a.Q)(t,null==e?void 0:e.in);if(isNaN(n))return(0,i.L)((null==e?void 0:e.in)||t,NaN);if(!n)return r;var o=r.getDate(),s=(0,i.L)((null==e?void 0:e.in)||t,r.getTime());return s.setMonth(r.getMonth()+n+1,0),o>=s.getDate()?s:(r.setFullYear(s.getFullYear(),s.getMonth(),o),r)}},2425:function(t,n,e){e.d(n,{U:function(){return a}});var i=e(18112);function a(t,n){var e=+(0,i.Q)(t)-+(0,i.Q)(n);return e<0?-1:e>0?1:e}},6542:function(t,n,e){e.d(n,{d:function(){return u}});var i=e("22936"),a=e("18492"),r=e("2425");function o(t,n,e){var r=(0,a.d)(null==e?void 0:e.in,t,n),o=(0,i.Z)(r,2),s=o[0],u=o[1];return 12*(s.getFullYear()-u.getFullYear())+(s.getMonth()-u.getMonth())}var s=e("3938");function u(t,n,e){var u=(0,a.d)(null==e?void 0:e.in,t,t,n),c=(0,i.Z)(u,3),d=c[0],l=c[1],h=c[2],f=(0,r.U)(l,h),v=Math.abs(o(l,h));if(v<1)return 0;1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-f*v);var g=(0,r.U)(l,h)===-f;(0,s.h)(d)&&1===v&&1===(0,r.U)(d,h)&&(g=!1);var _=f*(v-+g);return 0===_?0:_}},96500:function(t,n,e){e.d(n,{i:function(){return a}});var i=e(18112);function a(t,n){var e=(0,i.Q)(t,null==n?void 0:n.in);return e.setHours(23,59,59,999),e}},2621:function(t,n,e){e.d(n,{V:function(){return a}});var i=e(18112);function a(t,n){var e=(0,i.Q)(t,null==n?void 0:n.in),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}},86319:function(t,n,e){e.d(n,{b:function(){return a}});var i=e(18112);function a(t,n){return 1===(0,i.Q)(t,null==n?void 0:n.in).getDate()}},3938:function(t,n,e){e.d(n,{h:function(){return o}});var i=e(96500),a=e(2621),r=e(18112);function o(t,n){var e=(0,r.Q)(t,null==n?void 0:n.in);return+(0,i.i)(e,n)==+(0,a.V)(e,n)}}}]);
//# sourceMappingURL=25141.3134d109e40285cd.js.map