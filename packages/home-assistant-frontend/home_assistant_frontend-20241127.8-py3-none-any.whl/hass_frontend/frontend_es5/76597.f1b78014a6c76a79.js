"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["76597"],{36185:function(e,t,i){i.a(e,(async function(e,t){try{var a,s,n=i(63038),o=i(27862),l=i(52565),r=i(92776),d=i(5776),u=i(21475),h=(i(38419),i(19083),i(71695),i(19423),i(42713),i(40251),i(99341),i(47021),i(57243)),c=i(50778),v=i(19631),m=i(46467),f=i(36522),p=i(20382),b=(i(37583),i(83166),e([m,v]));[m,v]=b.then?(await b)():b;var k=function(){return Promise.all([i.e("97983"),i.e("3134"),i.e("58640"),i.e("16736"),i.e("46360")]).then(i.bind(i,88944))};(0,u.Z)([(0,c.Mo)("ha-date-input")],(function(e,t){var i=function(t){function i(){var t;(0,l.Z)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=(0,r.Z)(this,i,[].concat(s)),e(t),t}return(0,d.Z)(i,t),(0,o.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"locale",value:void 0},{kind:"field",decorators:[(0,c.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,c.Cb)()],key:"min",value:void 0},{kind:"field",decorators:[(0,c.Cb)()],key:"max",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,c.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,c.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"canClear",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,h.dy)(a||(a=(0,n.Z)(['<ha-textfield .label="','" .helper="','" .disabled="','" iconTrailing helperPersistent readonly="readonly" @click="','" @keydown="','" .value="','" .required="','"> <ha-svg-icon slot="trailingIcon" .path="','"></ha-svg-icon> </ha-textfield>'])),this.label,this.helper,this.disabled,this._openDialog,this._keyDown,this.value?(0,m.WB)(new Date("".concat(this.value.split("T")[0],"T00:00:00")),Object.assign(Object.assign({},this.locale),{},{time_zone:p.c_.local}),{}):"",this.required,"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z")}},{kind:"method",key:"_openDialog",value:function(){var e,t,i=this;this.disabled||(e=this,t={min:this.min||"1970-01-01",max:this.max,value:this.value,canClear:this.canClear,onChange:function(e){return i._valueChanged(e)},locale:this.locale.language,firstWeekday:(0,v.Bt)(this.locale)},(0,f.B)(e,"show-dialog",{dialogTag:"ha-dialog-date-picker",dialogImport:k,dialogParams:t}))}},{kind:"method",key:"_keyDown",value:function(e){this.canClear&&["Backspace","Delete"].includes(e.key)&&this._valueChanged(void 0)}},{kind:"method",key:"_valueChanged",value:function(e){this.value!==e&&(this.value=e,(0,f.B)(this,"change"),(0,f.B)(this,"value-changed",{value:e}))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.iv)(s||(s=(0,n.Z)(["ha-svg-icon{color:var(--secondary-text-color)}ha-textfield{display:block}"])))}}]}}),h.oi);t()}catch(_){t(_)}}))},75677:function(e,t,i){i.a(e,(async function(e,a){try{i.r(t),i.d(t,{HaDateTimeSelector:function(){return k}});var s,n,o,l=i(63038),r=i(27862),d=i(52565),u=i(92776),h=i(5776),c=i(21475),v=(i(38419),i(57243)),m=i(50778),f=i(36522),p=i(36185),b=(i(49653),i(34363),e([p]));p=(b.then?(await b)():b)[0];var k=(0,c.Z)([(0,m.Mo)("ha-selector-datetime")],(function(e,t){var i=function(t){function i(){var t;(0,d.Z)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=(0,u.Z)(this,i,[].concat(s)),e(t),t}return(0,h.Z)(i,t),(0,r.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,m.IO)("ha-date-input")],key:"_dateInput",value:void 0},{kind:"field",decorators:[(0,m.IO)("ha-time-input")],key:"_timeInput",value:void 0},{kind:"method",key:"render",value:function(){var e="string"==typeof this.value?this.value.split(" "):void 0;return(0,v.dy)(s||(s=(0,l.Z)([' <div class="input"> <ha-date-input .label="','" .locale="','" .disabled="','" .required="','" .value="','" @value-changed="','"> </ha-date-input> <ha-time-input enable-second .value="','" .locale="','" .disabled="','" .required="','" @value-changed="','"></ha-time-input> </div> '," "])),this.label,this.hass.locale,this.disabled,this.required,null==e?void 0:e[0],this._valueChanged,(null==e?void 0:e[1])||"00:00:00",this.hass.locale,this.disabled,this.required,this._valueChanged,this.helper?(0,v.dy)(n||(n=(0,l.Z)(["<ha-input-helper-text>","</ha-input-helper-text>"])),this.helper):"")}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),this._dateInput.value&&this._timeInput.value&&(0,f.B)(this,"value-changed",{value:"".concat(this._dateInput.value," ").concat(this._timeInput.value)})}},{kind:"field",static:!0,key:"styles",value:function(){return(0,v.iv)(o||(o=(0,l.Z)([".input{display:flex;align-items:center;flex-direction:row}ha-date-input{min-width:150px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}"])))}}]}}),v.oi);a()}catch(_){a(_)}}))},69695:function(e,t,i){i.r(t),i.d(t,{HaNumberSelector:function(){return k}});var a,s,n,o,l,r=i(63038),d=i(27862),u=i(52565),h=i(92776),c=i(5776),v=i(21475),m=(i(38419),i(23509),i(42713),i(11740),i(57243)),f=i(50778),p=i(35359),b=i(36522),k=(i(34363),i(74421),i(83166),(0,v.Z)([(0,f.Mo)("ha-selector-number")],(function(e,t){var i=function(t){function i(){var t;(0,u.Z)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=(0,h.Z)(this,i,[].concat(s)),e(t),t}return(0,c.Z)(i,t),(0,d.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Number})],key:"value",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Number})],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",key:"_valueStr",value:function(){return""}},{kind:"method",key:"willUpdate",value:function(e){e.has("value")&&(""!==this._valueStr&&this.value===Number(this._valueStr)||(this._valueStr=null==this.value||isNaN(this.value)?"":this.value.toString()))}},{kind:"method",key:"render",value:function(){var e,t,i,l,d,u,h,c,v,f,b,k,_,g,y,x,C="box"===(null===(e=this.selector.number)||void 0===e?void 0:e.mode)||void 0===(null===(t=this.selector.number)||void 0===t?void 0:t.min)||void 0===(null===(i=this.selector.number)||void 0===i?void 0:i.max);if(!C&&"any"===(y=null!==(x=this.selector.number.step)&&void 0!==x?x:1)){y=1;for(var w=(this.selector.number.max-this.selector.number.min)/100;y>w;)y/=10}return(0,m.dy)(a||(a=(0,r.Z)([" ",' <div class="input"> ',' <ha-textfield .inputMode="','" .label="','" .placeholder="','" class="','" .min="','" .max="','" .value="','" .step="','" helperPersistent .helper="','" .disabled="','" .required="','" .suffix="','" type="number" autoValidate ?no-spinner="','" @input="','"> </ha-textfield> </div> '," "])),this.label&&!C?(0,m.dy)(s||(s=(0,r.Z)(["","",""])),this.label,this.required?"*":""):m.Ld,C?m.Ld:(0,m.dy)(n||(n=(0,r.Z)([' <ha-slider labeled .min="','" .max="','" .value="','" .step="','" .disabled="','" .required="','" @change="','" .ticks="','"> </ha-slider> '])),this.selector.number.min,this.selector.number.max,null!==(l=this.value)&&void 0!==l?l:"",y,this.disabled,this.required,this._handleSliderChange,null===(d=this.selector.number)||void 0===d?void 0:d.slider_ticks),"any"===(null===(u=this.selector.number)||void 0===u?void 0:u.step)||(null!==(h=null===(c=this.selector.number)||void 0===c?void 0:c.step)&&void 0!==h?h:1)%1!=0?"decimal":"numeric",C?this.label:void 0,this.placeholder,(0,p.$)({single:C}),null===(v=this.selector.number)||void 0===v?void 0:v.min,null===(f=this.selector.number)||void 0===f?void 0:f.max,null!==(b=this._valueStr)&&void 0!==b?b:"",null!==(k=null===(_=this.selector.number)||void 0===_?void 0:_.step)&&void 0!==k?k:1,C?this.helper:void 0,this.disabled,this.required,null===(g=this.selector.number)||void 0===g?void 0:g.unit_of_measurement,!C,this._handleInputChange,!C&&this.helper?(0,m.dy)(o||(o=(0,r.Z)(["<ha-input-helper-text>","</ha-input-helper-text>"])),this.helper):m.Ld)}},{kind:"method",key:"_handleInputChange",value:function(e){e.stopPropagation(),this._valueStr=e.target.value;var t=""===e.target.value||isNaN(e.target.value)?void 0:Number(e.target.value);this.value!==t&&(0,b.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_handleSliderChange",value:function(e){e.stopPropagation();var t=Number(e.target.value);this.value!==t&&(0,b.B)(this,"value-changed",{value:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.iv)(l||(l=(0,r.Z)([".input{display:flex;justify-content:space-between;align-items:center;direction:ltr}ha-slider{flex:1;margin-right:16px;margin-inline-end:16px;margin-inline-start:0}ha-textfield{--ha-textfield-input-width:40px}.single{--ha-textfield-input-width:unset;flex:1}"])))}}]}}),m.oi))},49653:function(e,t,i){var a,s=i(63038),n=i(27862),o=i(52565),l=i(92776),r=i(5776),d=i(21475),u=(i(38419),i(23509),i(42713),i(11740),i(64694),i(57243)),h=i(50778),c=i(16922),v=i(36522);i(97828),(0,d.Z)([(0,h.Mo)("ha-time-input")],(function(e,t){var i=function(t){function i(){var t;(0,o.Z)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=(0,l.Z)(this,i,[].concat(s)),e(t),t}return(0,r.Z)(i,t),(0,n.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"locale",value:void 0},{kind:"field",decorators:[(0,h.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,h.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,h.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,h.Cb)({type:Boolean,attribute:"enable-second"})],key:"enableSecond",value:function(){return!1}},{kind:"field",decorators:[(0,h.Cb)({type:Boolean,reflect:!0})],key:"clearable",value:void 0},{kind:"method",key:"render",value:function(){var e,t=(0,c.y)(this.locale),i=(null===(e=this.value)||void 0===e?void 0:e.split(":"))||[],n=i[0],o=Number(i[0]);return o&&t&&o>12&&o<24&&(n=String(o-12).padStart(2,"0")),t&&0===o&&(n="12"),(0,u.dy)(a||(a=(0,s.Z)([' <ha-base-time-input .label="','" .hours="','" .minutes="','" .seconds="','" .format="','" .amPm="','" .disabled="','" @value-changed="','" .enableSecond="','" .required="','" .clearable="','" .helper="','"></ha-base-time-input> '])),this.label,Number(n),Number(i[1]),Number(i[2]),t?12:24,t&&o>=12?"PM":"AM",this.disabled,this._timeChanged,this.enableSecond,this.required,this.clearable&&void 0!==this.value,this.helper)}},{kind:"method",key:"_timeChanged",value:function(e){e.stopPropagation();var t,i=e.detail.value,a=(0,c.y)(this.locale);if(!(void 0===i||isNaN(i.hours)&&isNaN(i.minutes)&&isNaN(i.seconds))){var s=i.hours||0;i&&a&&("PM"===i.amPm&&s<12&&(s+=12),"AM"===i.amPm&&12===s&&(s=0)),t="".concat(s.toString().padStart(2,"0"),":").concat(i.minutes?i.minutes.toString().padStart(2,"0"):"00",":").concat(i.seconds?i.seconds.toString().padStart(2,"0"):"00")}t!==this.value&&(this.value=t,(0,v.B)(this,"change"),(0,v.B)(this,"value-changed",{value:t}))}}]}}),u.oi)},316:function(e,t,i){i.a(e,(async function(e,a){try{i.r(t),i.d(t,{DialogStatisticsFixUnsupportedUnitMetadata:function(){return N}});var s,n,o,l,r,d,u,h,c=i(9833),v=i(94524),m=i(63038),f=i(27862),p=i(52565),b=i(92776),k=i(5776),_=i(21475),g=(i(38419),i(92745),i(451),i(61893),i(42713),i(19134),i(97003),i(39527),i(41360),i(49207),i(63626),i(85017)),y=i(57243),x=i(50778),C=i(27486),w=i(64214),S=i(36522),Z=(i(97206),i(73729),i(29073),i(13928),i(7285),i(75677)),M=(i(69695),i(37583),i(17705)),B=i(76131),j=i(28008),D=i(72473),A=e([Z,w]);[Z,w]=A.then?(await A)():A;var N=(0,_.Z)([(0,x.Mo)("dialog-statistics-adjust-sum")],(function(e,t){var i,a,_,Z=function(t){function i(){var t;(0,p.Z)(this,i);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return t=(0,b.Z)(this,i,[].concat(s)),e(t),t}return(0,k.Z)(i,t),(0,f.Z)(i)}(t);return{F:Z,d:[{kind:"field",decorators:[(0,x.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_busy",value:function(){return!1}},{kind:"field",decorators:[(0,x.SB)()],key:"_moment",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_stats5min",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_statsHour",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_chosenStat",value:void 0},{kind:"field",key:"_origAmount",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_amount",value:void 0},{kind:"field",key:"_dateTimeSelector",value:function(){return{datetime:{}}}},{kind:"field",key:"_amountSelector",value:function(){return(0,C.Z)((function(e){return{number:{step:.01,unit_of_measurement:e,mode:"box"}}}))}},{kind:"method",key:"showDialog",value:function(e){this._params=e;var t=new Date;t.setMinutes(t.getMinutes()-t.getMinutes()%5,0),this._moment=(0,g.X)(t),this._fetchStats()}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._moment=void 0,this._stats5min=void 0,this._statsHour=void 0,this._origAmount=void 0,this._amount=void 0,this._chosenStat=void 0,this._busy=!1,(0,S.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){return this._params?(e=this._chosenStat?this._renderAdjustStat():this._renderPickStatistic(),(0,y.dy)(s||(s=(0,m.Z)([' <ha-dialog open scrimClickAction escapeKeyAction @closed="','" .heading="','"> '," </ha-dialog> "])),this.closeDialog,this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.title"),e)):y.Ld;var e}},{kind:"method",key:"shouldUpdate",value:function(e){if(1!==e.size||!e.has("hass"))return!0;var t=e.get("hass");return!t||t.localize!==this.hass.localize}},{kind:"method",key:"_renderPickStatistic",value:function(){var e;if(this._stats5min&&this._statsHour)if(this._statsHour.length<1&&this._stats5min.length<1)e=(0,y.dy)(o||(o=(0,m.Z)(["<p> "," </p>"])),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.no_statistics_found"));else{for(var t=this._stats5min.length>=1?this._stats5min:this._statsHour,i=(0,M.dO)(this.hass,this._params.statistic.statistic_id,this._params.statistic),a=[],s=0;s<t.length;s++){var u=t[s],h=Math.round(100*u.change)/100;a.push((0,y.dy)(l||(l=(0,m.Z)([' <ha-list-item twoline hasMeta .stat="','" @click="','"> <span>'," ",'</span> <span slot="secondary"> ',' </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> '])),u,this._setChosenStatistic,h,i,(0,w.o0)(new Date(u.start),this.hass.locale,this.hass.config)))}e=(0,y.dy)(r||(r=(0,m.Z)(["",""])),a)}else e=(0,y.dy)(n||(n=(0,m.Z)(["<ha-circular-progress indeterminate></ha-circular-progress>"])));return(0,y.dy)(d||(d=(0,m.Z)([' <div class="text-content"> ',' </div> <div class="text-content"> <b>',"</b> ",' </div> <ha-selector-datetime .label="','" .hass="','" .selector="','" .value="','" @value-changed="','"></ha-selector-datetime> <div class="stat-list">','</div> <mwc-button slot="secondaryAction" .label="','" @click="','"></mwc-button> <mwc-button slot="primaryAction" dialogAction="cancel" .label="','"></mwc-button> '])),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.info_text_1"),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.statistic"),this._params.statistic.statistic_id,this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.pick_a_time"),this.hass,this._dateTimeSelector,this._moment,this._dateTimeSelectorChanged,e,this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.outliers"),this._fetchOutliers,this.hass.localize("ui.common.close"))}},{kind:"method",key:"_clearChosenStatistic",value:function(){this._chosenStat=void 0}},{kind:"method",key:"_setChosenStatistic",value:function(e){var t=e.currentTarget.stat,i=Math.round(100*t.change)/100;this._chosenStat=t,this._origAmount=i,this._amount=i}},{kind:"method",key:"_dateTimeSelectorChanged",value:function(e){this._moment=e.detail.value,this._fetchStats()}},{kind:"method",key:"_renderAdjustStat",value:function(){var e=(0,M.dO)(this.hass,this._params.statistic.statistic_id,this._params.statistic);return(0,y.dy)(u||(u=(0,m.Z)([' <div class="text-content"> <b>',"</b> ",' </div> <div class="table-row"> <span>',"</span> <span>",'</span> </div> <div class="table-row"> <span>',"</span> <span>",'</span> </div> <ha-selector-number .label="','" .hass="','" .selector="','" .value="','" .disabled="','" @value-changed="','"></ha-selector-number> <mwc-button slot="primaryAction" .label="','" .disabled="','" @click="','"></mwc-button> <mwc-button slot="secondaryAction" .label="','" .disabled="','" @click="','"></mwc-button> '])),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.statistic"),this._params.statistic.statistic_id,this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.start"),(0,w.o0)(new Date(this._chosenStat.start),this.hass.locale,this.hass.config),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.end"),(0,w.o0)(new Date(this._chosenStat.end),this.hass.locale,this.hass.config),this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.new_value"),this.hass,this._amountSelector(e||void 0),this._amount,this._busy,this._amountChanged,this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.adjust"),this._busy,this._fixIssue,this.hass.localize("ui.common.back"),this._busy,this._clearChosenStatistic)}},{kind:"method",key:"_amountChanged",value:function(e){this._amount=e.detail.value}},{kind:"method",key:"_fetchStats",value:(_=(0,v.Z)((0,c.Z)().mark((function e(){var t,i,a,s,n,o,l,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stats5min=void 0,this._statsHour=void 0,t=this._params.statistic.statistic_id,i=new Date(this._moment.replace(" ","T")),(a=new Date(i.getTime())).setTime(a.getTime()-72e5),(s=new Date(i.getTime())).setTime(s.getTime()+108e5),e.next=10,(0,M.dL)(this.hass,a,s,[t],"hour");case 10:if(n=e.sent,this._statsHour=t in n?n[t].slice(0,5):[],0!==this._statsHour.length){e.next=15;break}return this._stats5min=[],e.abrupt("return");case 15:return(o=new Date(i.getTime())).setTime(o.getTime()-6e5),(l=new Date(i.getTime())).setTime(l.getTime()+9e5),e.next=21,(0,M.dL)(this.hass,o,l,[t],"5minute");case 21:r=e.sent,this._stats5min=t in r?r[t].slice(0,5):[];case 23:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{kind:"method",key:"_fetchOutliers",value:(a=(0,v.Z)((0,c.Z)().mark((function e(){var t,i,a,s,n,o,l,r,d,u,h,v,m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._stats5min=void 0,this._statsHour=void 0,t=this._params.statistic.statistic_id,i=new Date(0),a=new Date,e.next=7,(0,M.dL)(this.hass,i,a,[t],"hour");case 7:if(s=e.sent,0!==(n=t in s?s[t]:[]).length){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,M.dL)(this.hass,i,a,[t],"5minute");case 13:o=e.sent,(l=t in o?o[t]:[]).shift(),r=[],n.forEach((function(e){r.push({hour:e,fiveMin:[]})})),d={hour:null,fiveMin:[]},u=0,l.forEach((function(e){for(var t=!1;u<r.length;u++){var i=r[u].hour;if(i&&e.start>=i.start&&e.end<=i.end){r[u].fiveMin.push(e),t=!0;break}}t||d.fiveMin.push(e)})),r.push(d),h=[],v=0,m=function(e){var t,i,a=Math.abs(null!==(t=e.change)&&void 0!==t?t:0);(h.length<10||a>v)&&(h.push(e),h=(h=h.sort((function(e,t){var i,a;return Math.abs(null!==(i=t.change)&&void 0!==i?i:0)-Math.abs(null!==(a=e.change)&&void 0!==a?a:0)}))).slice(0,10),v=null!==(i=h[h.length-1].change)&&void 0!==i?i:0)},r.forEach((function(e){0===e.fiveMin.length&&e.hour?m(e.hour):e.fiveMin.forEach((function(e){m(e)}))})),this._statsHour=h,this._stats5min=[];case 29:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{kind:"method",key:"_fixIssue",value:(i=(0,v.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,M.dO)(this.hass,this._params.statistic.statistic_id,this._params.statistic),this._busy=!0,e.prev=2,e.next=5,(0,M.j2)(this.hass,this._params.statistic.statistic_id,this._chosenStat.start,this._amount-this._origAmount,t||null);case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),this._busy=!1,(0,B.showAlertDialog)(this,{text:this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.error_sum_adjusted",{message:e.t0.message||e.t0})}),e.abrupt("return");case 12:(0,D.C)(this,{message:this.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.adjust_sum.sum_adjusted")}),this.closeDialog();case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[j.Qx,j.yu,(0,y.iv)(h||(h=(0,m.Z)(["@media all and (max-width:450px),all and (max-height:500px){ha-dialog{--mdc-dialog-max-height:100%;height:100%}}@media all and (min-width:850px){ha-dialog{--mdc-dialog-max-height:80%;--mdc-dialog-max-height:80%}}@media all and (min-width:451px) and (min-height:501px){ha-dialog{--mdc-dialog-max-width:480px}}.text-content,ha-selector-datetime,ha-selector-number{margin-bottom:20px}ha-list-item{margin:0 -24px;--mdc-list-side-padding:24px}.table-row{display:flex;justify-content:space-between;margin-bottom:20px}.stat-list{min-height:360px;display:flex;flex-direction:column}.stat-list ha-circular-progress{margin:0 auto}"])))]}}]}}),y.oi);a()}catch(T){a(T)}}))},55800:function(e,t,i){i.d(t,{r:function(){return a}});i(42713),i(11740),i(64694);function a(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}},85017:function(e,t,i){i.d(t,{X:function(){return o}});i(52247),i(38419);var a=i(55800),s=i(12279),n=i(18112);function o(e,t){var i,o,l=(0,n.Q)(e,null==t?void 0:t.in);if(!(0,s.J)(l))throw new RangeError("Invalid time value");var r=null!==(i=null==t?void 0:t.format)&&void 0!==i?i:"extended",d=null!==(o=null==t?void 0:t.representation)&&void 0!==o?o:"complete",u="",h="extended"===r?"-":"",c="extended"===r?":":"";if("time"!==d){var v=(0,a.r)(l.getDate(),2),m=(0,a.r)(l.getMonth()+1,2),f=(0,a.r)(l.getFullYear(),4);u="".concat(f).concat(h).concat(m).concat(h).concat(v)}if("date"!==d){var p=(0,a.r)(l.getHours(),2),b=(0,a.r)(l.getMinutes(),2),k=(0,a.r)(l.getSeconds(),2),_=""===u?"":" ";u="".concat(u).concat(_).concat(p).concat(c).concat(b).concat(c).concat(k)}return u}},12279:function(e,t,i){i.d(t,{J:function(){return o}});var a=i("86180");i("42713"),i("11740");function s(e){return e instanceof Date||"object"===(0,a.Z)(e)&&"[object Date]"===Object.prototype.toString.call(e)}var n=i("18112");function o(e){return!(!s(e)&&"number"!=typeof e||isNaN(+(0,n.Q)(e)))}}}]);
//# sourceMappingURL=76597.f1b78014a6c76a79.js.map