"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["26332"],{95262:function(e,n,t){function i(e){return void 0===e||Array.isArray(e)?e:[e]}t.d(n,{r:function(){return i}})},92636:function(e,n,t){t.d(n,{z:function(){return i}});t(19083),t(61006);var i=function(e){return function(n,t){return e.includes(n,t)}}},14473:function(e,n,t){t.d(n,{B$:function(){return u},EQ:function(){return y},Es:function(){return l},Gd:function(){return d},HF:function(){return Z},Ip:function(){return w},J8:function(){return A},Kc:function(){return b},Pl:function(){return j},SC:function(){return g},SQ:function(){return v},W9:function(){return h},Xm:function(){return E},Yc:function(){return f},r4:function(){return p},sq:function(){return _}});var i,r=t(10265),o=(t(64228),t(92745),t(19423),t(42713),t(39527),t(41360),t(13334),t(49207),t(83523)),a=t(95262),c=t(68418),s=t(58776),u="single",f=10,d=function(e){if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(var n=0,t=["and","or","not"];n<t.length;n++){var i=t[n];if(i in e)return{condition:i,conditions:e[i]}}return e},l=function(e,n){e.callService("automation","trigger",{entity_id:n,skip_condition:!0})},g=function(e,n){return e.callApi("DELETE","config/automation/config/".concat(n))},p=function(e,n){return e.callApi("GET","config/automation/config/".concat(n))},v=function(e,n){return e.callWS({type:"automation/config",entity_id:n})},_=function(e,n,t){return e.callApi("POST","config/automation/config/".concat(n),t)},y=function(e){e=m(e);for(var n=0,t=["triggers","conditions","actions"];n<t.length;n++){var i=t[n],r=e[i];r&&!Array.isArray(r)&&(e[i]=[r])}return e},m=function(e){return"trigger"in e&&("triggers"in e||(e.triggers=e.trigger),delete e.trigger),"condition"in e&&("conditions"in e||(e.conditions=e.condition),delete e.condition),"action"in e&&("actions"in e||(e.actions=e.action),delete e.action),e.triggers&&(e.triggers=h(e.triggers)),e.actions&&(e.actions=(0,c.eR)(e.actions)),e},h=function(e){return e?Array.isArray(e)?e.map(h):("triggers"in e&&e.triggers&&(e.triggers=h(e.triggers)),"platform"in e&&("trigger"in e||(e.trigger=e.platform),delete e.platform),e):e},b=function(e){if(!e)return[];var n=[];return(0,a.r)(e).forEach((function(e){"triggers"in e?e.triggers&&n.push.apply(n,(0,r.Z)(b(e.triggers))):n.push(e)})),n},w=function(e,n){i=e;var t=n?"?".concat((0,s.ou)({expanded:"1"})):"";(0,o.c)("/config/automation/edit/new".concat(t))},Z=function(e){w(Object.assign(Object.assign({},e),{},{id:void 0,alias:void 0}))},j=function(){var e=i;return i=void 0,e},E=function(e,n,t,i){return e.connection.subscribeMessage(n,{type:"subscribe_trigger",trigger:t,variables:i})},A=function(e,n,t){return e.callWS({type:"test_condition",condition:n,variables:t})}},68418:function(e,n,t){t.d(n,{EH:function(){return d},FI:function(){return j},Pw:function(){return E},TL:function(){return v},eM:function(){return w},eR:function(){return M},kC:function(){return y},oE:function(){return b},oR:function(){return h},rg:function(){return Z},rq:function(){return m},sf:function(){return A},vA:function(){return l}});var i,r=t(11655),o=(t(64228),t(52961),t(42713),t(84712),t(13334),t(62900)),a=t(92636),c=t(83523),s=t(14473),u=t(97969),f=t(58776),d=["single","restart","queued","parallel"],l=(0,a.z)(["queued","parallel"]),g=(0,o.Ry)({alias:(0,o.jt)((0,o.Z_)()),continue_on_error:(0,o.jt)((0,o.O7)()),enabled:(0,o.jt)((0,o.O7)())}),p=(0,o.Ry)({entity_id:(0,o.jt)((0,o.G0)([(0,o.Z_)(),(0,o.IX)((0,o.Z_)())])),device_id:(0,o.jt)((0,o.G0)([(0,o.Z_)(),(0,o.IX)((0,o.Z_)())])),area_id:(0,o.jt)((0,o.G0)([(0,o.Z_)(),(0,o.IX)((0,o.Z_)())])),floor_id:(0,o.jt)((0,o.G0)([(0,o.Z_)(),(0,o.IX)((0,o.Z_)())])),label_id:(0,o.jt)((0,o.G0)([(0,o.Z_)(),(0,o.IX)((0,o.Z_)())]))}),v=(0,o.f0)(g,(0,o.Ry)({action:(0,o.jt)((0,o.Z_)()),service_template:(0,o.jt)((0,o.Z_)()),entity_id:(0,o.jt)((0,o.Z_)()),target:(0,o.jt)(p),data:(0,o.jt)((0,o.Ry)()),response_variable:(0,o.jt)((0,o.Z_)()),metadata:(0,o.jt)((0,o.Ry)())})),_=(0,o.f0)(g,(0,o.Ry)({action:(0,o.i0)("media_player.play_media"),target:(0,o.jt)((0,o.Ry)({entity_id:(0,o.jt)((0,o.Z_)())})),entity_id:(0,o.jt)((0,o.Z_)()),data:(0,o.Ry)({media_content_id:(0,o.Z_)(),media_content_type:(0,o.Z_)()}),metadata:(0,o.Ry)()})),y=function(e,n,t){return e.callService("script",n,t)},m=function(e){return"off"===e.state||!!("on"===e.state&&l(e.attributes.mode)&&e.attributes.current<e.attributes.max)},h=function(e,n){return e.callApi("DELETE","config/script/config/".concat(n))},b=function(e,n){return e.callApi("GET","config/script/config/".concat(n))},w=function(e,n){return e.callWS({type:"script/config",entity_id:n})},Z=function(e,n){i=e;var t=n?"?".concat((0,f.ou)({expanded:"1"})):"";(0,c.c)("/config/script/edit/new".concat(t))},j=function(){var e=i;return i=void 0,e},E=function(e){return"delay"in e?"delay":"wait_template"in e?"wait_template":["condition","and","or","not"].some((function(n){return n in e}))?"check_condition":"event"in e?"fire_event":"device_id"in e?"device_action":"repeat"in e?"repeat":"choose"in e?"choose":"if"in e?"if":"wait_for_trigger"in e?"wait_for_trigger":"variables"in e?"variables":"stop"in e?"stop":"sequence"in e?"sequence":"parallel"in e?"parallel":"set_conversation_response"in e?"set_conversation_response":"action"in e||"service"in e?"metadata"in e&&(0,o.is)(e,_)?"play_media":"service":"unknown"},A=function(e,n){var t,i=null===(t=e.services.script[(0,u.p)(n)])||void 0===t?void 0:t.fields;return void 0!==i&&Object.keys(i).length>0},M=function(e){if(!e)return e;if(Array.isArray(e))return e.map(M);if("service"in e&&("action"in e||(e.action=e.service),delete e.service),"scene"in e&&(e.action="scene.turn_on",e.target={entity_id:e.scene},delete e.scene),"sequence"in e){var n,t=(0,r.Z)(e.sequence);try{for(t.s();!(n=t.n()).done;){var i=n.value;M(i)}}catch(g){t.e(g)}finally{t.f()}}var o=E(e);"parallel"===o&&M(e.parallel);if("choose"===o){var a=e;if(Array.isArray(a.choose)){var c,u=(0,r.Z)(a.choose);try{for(u.s();!(c=u.n()).done;){var f=c.value;M(f.sequence)}}catch(g){u.e(g)}finally{u.f()}}else a.choose&&M(a.choose.sequence);a.default&&M(a.default)}"repeat"===o&&M(e.repeat.sequence);if("if"===o){var d=e;M(d.then),d.else&&M(d.else)}if("wait_for_trigger"===o){var l=e;(0,s.W9)(l.wait_for_trigger)}return e}},41259:function(e,n,t){t.r(n),t.d(n,{addExternalBarCodeListener:function(){return s},attachExternalToApp:function(){return c}});t(71695),t(42713),t(61427),t(92519),t(42179),t(89256),t(24931),t(88463),t(57449),t(19814),t(99341),t(39527),t(41360),t(49207),t(47021);var i=t(36522),r=t(5111),o=t(14473),a=new Set,c=function(e){window.addEventListener("haptic",(function(n){return e.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:n.detail}})})),e.hass.auth.external.addCommandHandler((function(n){return u(e,n)}))},s=function(e){return a.add(e),function(){a.delete(e)}},u=function(e,n){var t=e.hass.auth.external;if("restart"===n.command)e.hass.connection.reconnect(!0),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("notifications/show"===n.command)(0,i.B)(e,"hass-show-notifications"),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===n.command){var c;if(null!==(c=r.E.history.state)&&void 0!==c&&c.open)return t.fireMessage({id:n.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.B)(e,"hass-toggle-menu"),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("sidebar/show"===n.command){var s;if(null!==(s=r.E.history.state)&&void 0!==s&&s.open)return t.fireMessage({id:n.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.B)(e,"hass-toggle-menu",{open:!0}),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===n.command){var u;(0,o.Ip)(null===(u=n.payload)||void 0===u?void 0:u.config),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}else if("improv/discovered_device"===n.command)(0,i.B)(window,"improv-discovered-device",n.payload),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("improv/device_setup_done"===n.command)(0,i.B)(window,"improv-device-setup-done"),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else if("bar_code/scan_result"===n.command)a.forEach((function(e){return e(n)})),t.fireMessage({id:n.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==n.command)return!1;a.forEach((function(e){return e(n)})),t.fireMessage({id:n.id,type:"result",success:!0,result:null})}return!0}},36205:function(e,n,t){var i=t(61896),r=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&r(e)===e}},86256:function(e,n,t){var i=t(88045),r=t(72616),o=t(95011),a=RangeError;e.exports=function(e){var n=r(o(this)),t="",c=i(e);if(c<0||c===1/0)throw new a("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(n+=n))1&c&&(t+=n);return t}},41661:function(e,n,t){t(40810)({target:"Number",stat:!0},{isInteger:t(36205)})},84712:function(e,n,t){t(40810)({target:"String",proto:!0},{repeat:t(86256)})}}]);
//# sourceMappingURL=26332.883e107ad52db0fa.js.map