"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["40164"],{12753:function(e,t,n){n.d(t,{N:function(){return r}});n(38419),n(80133),n(451),n(88044);var i=[" ",": "],r=function(e,t){for(var n=e.toLowerCase(),r=0,o=i;r<o.length;r++){var s=o[r],u="".concat(t).concat(s);if(n.startsWith(u)){var l=e.substring(u.length);if(l.length)return a(l.substr(0,l.indexOf(" ")))?l:l[0].toUpperCase()+l.slice(1)}}},a=function(e){return e.toLowerCase()!==e}},20526:function(e,t,n){n.d(t,{AP:function(){return w},oU:function(){return b},VG:function(){return m},lY:function(){return _}});var i=n("11655"),r=n("22936"),a=n("10265"),o=(n("38419"),n("91599"),n("18801"),n("19083"),n("71695"),n("64228"),n("92745"),n("61893"),n("84283"),n("63619"),n("19423"),n("39304"),n("52961"),n("42713"),n("37362"),n("61427"),n("92519"),n("42179"),n("89256"),n("24931"),n("88463"),n("57449"),n("19814"),n("61006"),n("99341"),n("81804"),n("39527"),n("99790"),n("67670"),n("41360"),n("13334"),n("49207"),n("47021"),n("73358")),s=n("73850"),u=n("59847"),l=n("47194"),c=n("12753"),d=n("1416"),f=n("82100"),p=n("57816"),y=n("4242"),h=n("96530"),v=new Set(["automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone"].concat((0,a.Z)(o.a5))),g=new Set(["mobile_app"]),_=function(e,t){return Object.assign({type:"grid",cards:e.map((function(e){return{type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.M)(e))||void 0}}))},t)},m=function(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[],f=[],p=n.title?n.title.toLowerCase():void 0,y=[],h=(0,i.Z)(t);try{for(h.s();!(r=h.n()).done;){var v=r.value,g=e[v],_=(0,s.M)(v);if("alarm_control_panel"===_){var b={type:"alarm-panel",entity:v};u.push(b)}else if("camera"===_){var w={type:"picture-entity",entity:v};u.push(w)}else if("image"===_){var C={type:"picture",image_entity:v};u.push(C)}else if("climate"===_){var E,Z,k,O={type:"thermostat",entity:v,features:(null!==(E=null===(Z=e[v])||void 0===Z||null===(Z=Z.attributes)||void 0===Z||null===(Z=Z.hvac_modes)||void 0===Z?void 0:Z.length)&&void 0!==E?E:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(k=e[v])||void 0===k||null===(k=k.attributes)||void 0===k?void 0:k.hvac_modes}]:void 0};u.push(O)}else if("humidifier"===_){var j={type:"humidifier",entity:v,features:[{type:"humidifier-toggle"}]};u.push(j)}else if("media_player"===_){var x={type:"media-control",entity:v};u.push(x)}else if("plant"===_){var W={type:"plant-status",entity:v};u.push(W)}else if("weather"===_){var M={type:"weather-forecast",entity:v,show_forecast:!1};u.push(M)}else if(!a||"scene"!==_&&"script"!==_){var N=void 0,z=p&&g&&(N=(0,c.N)((0,l.C)(g),p))?{entity:v,name:N}:v;f.push(z)}else{var L={entity:v,show_icon:!0,show_name:!0},P=void 0;p&&g&&(P=(0,c.N)((0,l.C)(g),p))&&(L.name=P),y.push(L)}}}catch(U){h.e(U)}finally{h.f()}if(f.sort((function(t,n){var i="string"==typeof t?t:t.entity,r="string"==typeof n?n:n.entity,a=o.zF.includes((0,s.M)(i))?"sensor":"control";return a!==(o.zF.includes((0,s.M)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.$)("string"==typeof t?e[t]?(0,l.C)(e[t]):"":t.name||"","string"==typeof n?e[n]?(0,l.C)(e[n]):"":n.name||"")})),0===f.length&&y.length>0)return m(e,t,n,!1);if(f.length>0||y.length>0){var S=Object.assign({type:"entities",entities:f},n);y.length>0&&(S.footer={type:"buttons",entities:y}),u.unshift(S)}return u.length<2?u:[{type:"grid",square:!1,columns:1,cards:u}]},b=function(e,t){var n,r=[],a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){var o={type:"entity",entity:n.value};r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r},w=function(e,t,n,o,c,_,b,w,C){for(var E,Z,k=function(e,t){for(var n={},i=new Set(Object.values(t).filter((function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden})).map((function(e){return e.entity_id}))),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];v.has((0,u.N)(s))||i.has(s.entity_id)||(n[o]=e[o])}return n}(o,n),O={},j=0,x=Object.keys(k);j<x.length;j++){var W=x[j],M=k[W];M.attributes.order&&(O[W]=M.attributes.order)}var N=function(e,t,n,i){for(var a=Object.assign({},i),o={},s={},u=0,l=Object.values(n);u<l.length;u++){var c,d=l[u],f=d.area_id||d.device_id&&(null===(c=t[d.device_id])||void 0===c?void 0:c.area_id);f&&f in e&&d.entity_id in a?(f in o||(o[f]=[]),o[f].push(a[d.entity_id]),delete a[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in a&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(a[d.entity_id]),delete a[d.entity_id])}for(var p=0,y=Object.entries(s);p<y.length;p++){var h=(0,r.Z)(y[p],2),v=h[0],g=h[1];1===g.length&&(a[g[0].entity_id]=g[0],delete s[v])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:a}}(e,t,n,k);if(null!=b&&b.hidden){var z,L=(0,i.Z)(b.hidden);try{for(L.s();!(z=L.n()).done;){var P=z.value;delete N.areasWithEntities[P]}}catch(re){L.e(re)}finally{L.f()}}w&&(N.devicesWithEntities={},N.otherEntities={});var S=function(e){var t=[],n={};return Object.keys(e).forEach((function(i){var r=e[i];"group"===(0,s.M)(i)?t.push(r):n[i]=r})),t.forEach((function(e){return e.attributes.entity_id.forEach((function(e){delete n[e]}))})),{groups:t,ungrouped:n}}(N.otherEntities);S.groups.sort((function(e,t){return O[e.entity_id]-O[t.entity_id]}));var U,V=[],$=(0,i.Z)(S.groups);try{for($.s();!(U=$.n()).done;){var q=U.value;V.push.apply(V,(0,a.Z)(m(o,q.attributes.entity_id,{title:(0,l.C)(q),show_header_toggle:"hidden"!==q.attributes.control})))}}catch(re){$.e(re)}finally{$.f()}var F,I=function(e,t,n,r,o){for(var s={},c=0,f=Object.keys(o);c<f.length;c++){var v=f[c],g=o[v],_=(0,u.N)(g);_ in s||(s[_]=[]),s[_].push(g.entity_id)}var b=[];if("person"in s){var w=[];if(1===s.person.length)b.push({type:"entities",entities:s.person});else{var C,E,Z="",k=(0,i.Z)(s.person);try{for(k.s();!(E=k.n()).done;){var O=E.value,j=o[O],x=j.attributes.entity_picture;if(!x){if(void 0===C){var W=getComputedStyle(document.body);C=encodeURIComponent(W.getPropertyValue("--light-primary-color").trim()),Z=encodeURIComponent((W.getPropertyValue("--text-light-primary-color")||W.getPropertyValue("--primary-text-color")).trim())}var M=(0,y.fm)(j.attributes.friendly_name||"");x="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(C,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(Z,"' font-size='1.3em' dy='.3em'%3E").concat(M,"%3C/text%3E%3C/g%3E%3C/svg%3E")}w.push({type:"picture-entity",entity:O,aspect_ratio:"1",show_name:!1,image:x})}}catch(re){k.e(re)}finally{k.f()}b.push({type:"grid",square:!0,columns:3,cards:w})}delete s.person}var N,z=[],L=(0,i.Z)(h.y);try{for(L.s();!(N=L.n()).done;){var P=N.value;P in s&&(z.push.apply(z,(0,a.Z)(s[P])),delete s[P])}}catch(re){L.e(re)}finally{L.f()}for(var S={},U=0,V=Object.keys(s);U<V.length;U++){var $=V[U];S[$]=(0,p.Lh)(e,$)}z.length&&(s._helpers=z,S._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort((function(e,t){return(0,d.$)(S[e],S[t])})).forEach((function(e){b.push.apply(b,(0,a.Z)(m(o,s[e].sort((function(e,t){return(0,d.$)((0,l.C)(o[e]),(0,l.C)(o[t]))})),{title:S[e]})))}));var q={path:t,title:n,cards:b};return r&&(q.icon=r),q}(c,"default_view","Home",undefined,S.ungrouped),R=[],A=Object.keys(N.areasWithEntities).sort((0,f.a)(e,null==b?void 0:b.order)),B=(0,i.Z)(A);try{for(B.s();!(F=B.n()).done;){var G=F.value,H=N.areasWithEntities[G],Y=e[G];R.push.apply(R,(0,a.Z)(m(o,H.map((function(e){return e.entity_id})),{title:Y.name})))}}catch(re){B.e(re)}finally{B.f()}var D,J,K=[],Q=Object.entries(N.devicesWithEntities).sort((function(e,n){var i=t[e[0]],r=t[n[0]];return(0,d.$)(i.name_by_user||i.name||"",r.name_by_user||r.name||"")})),T=(0,i.Z)(Q);try{for(T.s();!(D=T.n()).done;){var X=(0,r.Z)(D.value,2),ee=X[0],te=X[1],ne=t[ee];K.push.apply(K,(0,a.Z)(m(o,te.map((function(e){return e.entity_id})),{title:ne.name_by_user||ne.name||c("ui.panel.config.devices.unnamed_device",{type:c("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(re){T.e(re)}finally{T.f()}if(_&&!C){var ie=_.energy_sources.find((function(e){return"grid"===e.type}));ie&&ie.flow_from.length>0&&(J={title:c("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(E=I.cards).unshift.apply(E,R.concat(V,(0,a.Z)(J?[J]:[]))),(Z=I.cards).push.apply(Z,K),I}}}]);
//# sourceMappingURL=40164.9c64bc33a765bf5e.js.map