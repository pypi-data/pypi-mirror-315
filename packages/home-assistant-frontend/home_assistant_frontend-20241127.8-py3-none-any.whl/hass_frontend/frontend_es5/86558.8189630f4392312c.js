"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["86558"],{50875:function(t,e,i){i.d(e,{Eu:function(){return r},hZ:function(){return a}});var n=i(11259),s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return s[t%s.length]}function a(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||r(t);return(0,n.Rq)(i)}},65354:function(t,e,i){i.d(e,{U:function(){return l}});i(71695),i(11907),i(42713),i(99341),i(47021);var n=i(50875),s=i(11259),r=i(4643),a=i(73850),o=i(42818),h=i(96194),c=i(76190),d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var u=0,f=new Map;function l(t,e,i){return function(t,e,i){var n;if(!i||t===h.nZ)return(0,c.g)("--history-unavailable-color",e);if(t===h.lz)return(0,c.g)("--history-unknown-color",e);var u=(0,o.tD)(i,t);if(u){var f=(0,c.g)(u,e);if(f){var l=(0,a.M)(i.entity_id),_=null===(n=d[l])||void 0===n?void 0:n[t];return _?(0,s.uO)((0,r.C)((0,s.Rw)((0,s.wK)(f)),_)):f}}}(t,e,i)||function(t,e){if(f.has(t))return f.get(t);var i=(0,n.hZ)(u,e);return u++,f.set(t,i),i}(t,e)}},26799:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return T},HuiHistoryGraphCard:function(){return E}});var s,r,a,o,h,c=i(63038),d=i(9833),u=i(94524),f=i(27862),l=i(52565),_=i(92776),y=i(5776),v=i(21475),b=i(77204),k=(i(52247),i(38419),i(71695),i(83069),i(92745),i(63619),i(19423),i(42713),i(40251),i(99341),i(39527),i(41360),i(49207),i(47021),i(57243)),g=i(50778),m=i(35359),p=i(72344),w=i(71489),Z=(i(99426),i(54977),i(13928),i(6280)),x=i(96309),H=i(93331),S=i(29401),C=i(58776),I=t([w,Z]);[w,Z]=I.then?(await I)():I;var T=24,E=(0,v.Z)([(0,g.Mo)("hui-history-graph-card")],(function(t,e){var n,v,w=function(e){function i(){var e;(0,l.Z)(this,i);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=(0,_.Z)(this,i,[].concat(s)),t(e),e}return(0,y.Z)(i,e),(0,f.Z)(i)}(e);return{F:w,d:[{kind:"method",static:!0,key:"getConfigElement",value:(v=(0,u.Z)((0,d.Z)().mark((function t(){return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e("46379"),i.e("24199"),i.e("78943"),i.e("67390"),i.e("3049"),i.e("71189"),i.e("86372")]).then(i.bind(i,96312));case 2:return t.abrupt("return",document.createElement("hui-history-graph-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:function(){return{}}},{kind:"field",key:"_entityIds",value:function(){return[]}},{kind:"field",key:"_hoursToShow",value:function(){return T}},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{kind:"method",key:"setConfig",value:function(t){var e=this;if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");var i=t.entities?(0,S.A)(t.entities):[];this._entityIds=[],i.forEach((function(t){e._entityIds.push(t.entity),t.name&&(e._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||T,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,b.Z)(w,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,b.Z)(w,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:(n=(0,u.Z)((0,d.Z)().mark((function t(){var e,i,n=this;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,p.p)(this.hass,"history")&&!this._subscribed){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,x.ib)(this.hass);case 4:e=t.sent,i=e.numeric_device_classes,this._subscribed=(0,Z.xS)(this.hass,(function(t){var e;n._subscribed&&(n._stateHistory=(0,Z.Nu)(n.hass,t,n._entityIds,n.hass.localize,i,null===(e=n._config)||void 0===e?void 0:e.split_device_classes))}),this._hoursToShow,this._entityIds).catch((function(t){n._subscribed=void 0,n._error=t})),this._setRedrawTimer();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory=Object.assign({},this._stateHistory))}},{kind:"method",key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval),this._interval=window.setInterval((function(){return t._redrawGraph()}),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,H.Wh)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,b.Z)(w,"updated",this,3)([t]),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(t.has("_config")||t.has("hass"))){var e=t.get("_config");!t.has("_config")||(null==e?void 0:e.entities)===this._config.entities&&(null==e?void 0:e.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return k.Ld;var t=new Date;t.setHours(t.getHours()-this._hoursToShow);var e="/history?".concat((0,C.ou)({entity_id:this._entityIds.join(","),start_date:t.toISOString()}));return(0,k.dy)(s||(s=(0,c.Z)([" <ha-card> ",' <div class="content ','"> '," </div> </ha-card> "])),this._config.title?(0,k.dy)(r||(r=(0,c.Z)([' <h1 class="card-header"> ',' <a href="','"><ha-icon-next></ha-icon-next></a> </h1> '])),this._config.title,e):k.Ld,(0,m.$)({"has-header":!!this._config.title}),this._error?(0,k.dy)(a||(a=(0,c.Z)([' <ha-alert alert-type="error"> ',": "," </ha-alert> "])),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,k.dy)(o||(o=(0,c.Z)([' <state-history-charts .hass="','" .isLoadingData="','" .historyData="','" .names="','" up-to-now .hoursToShow="','" .showNames="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','"></state-history-charts> '])),this.hass,!this._stateHistory,this._stateHistory,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.iv)(h||(h=(0,c.Z)(["ha-card{height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px}.has-header{padding-top:0}"])))}}]}}),k.oi);n()}catch(A){n(A)}}))}}]);
//# sourceMappingURL=86558.8189630f4392312c.js.map