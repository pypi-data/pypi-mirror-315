"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["74461"],{60370:function(e,t,r){var o,n,i,a,s=r(63038),l=r(10265),c=r(27862),d=r(52565),u=r(92776),h=r(5776),p=r(21475),v=r(77204),f=(r(38419),r(19423),r(10445)),g=r(57243),k=r(50778);(0,p.Z)([(0,k.Mo)("ha-assist-chip")],(function(e,t){var r=function(t){function r(){var t;(0,d.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,u.Z)(this,r,[].concat(n)),e(t),t}return(0,h.Z)(r,t),(0,c.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,k.Cb)({type:Boolean,reflect:!0})],key:"filled",value:function(){return!1}},{kind:"field",decorators:[(0,k.Cb)({type:Boolean})],key:"active",value:function(){return!1}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,l.Z)((0,v.Z)(r,"styles",this)),[(0,g.iv)(o||(o=(0,s.Z)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(\n          --ha-assist-chip-container-shape,\n          16px\n        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailingIcon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:Roboto,sans-serif}"])))])}},{kind:"method",key:"renderOutline",value:function(){return this.filled?(0,g.dy)(n||(n=(0,s.Z)(['<span class="filled"></span>']))):(0,v.Z)(r,"renderOutline",this,3)([])}},{kind:"method",key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,v.Z)(r,"getContainerClasses",this,3)([])),{},{active:this.active})}},{kind:"method",key:"renderPrimaryContent",value:function(){return(0,g.dy)(i||(i=(0,s.Z)([' <span class="leading icon" aria-hidden="true"> ',' </span> <span class="label">','</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> '," </span> "])),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{kind:"method",key:"renderTrailingIcon",value:function(){return(0,g.dy)(a||(a=(0,s.Z)(['<slot name="trailing-icon"></slot>'])))}}]}}),f.X)},69546:function(e,t,r){var o,n,i=r(90391),a=r(11655),s=r(63038),l=r(27862),c=r(52565),d=r(92776),u=r(5776),h=r(21475),p=r(77204),v=(r(38419),r(19083),r(80133),r(92745),r(42713),r(23669),r(19134),r(61006),r(39527),r(41360),r(49207),r(57243)),f=r(50778),g=r(35359);(0,h.Z)([(0,f.Mo)("ha-ansi-to-html")],(function(e,t){var r=function(t){function r(){var t;(0,c.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,d.Z)(this,r,[].concat(n)),e(t),t}return(0,u.Z)(r,t),(0,l.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,f.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean,attribute:"wrap-disabled"})],key:"wrapDisabled",value:function(){return!1}},{kind:"field",decorators:[(0,f.IO)("pre")],key:"_pre",value:void 0},{kind:"field",decorators:[(0,f.SB)()],key:"_filter",value:function(){return""}},{kind:"method",key:"render",value:function(){return(0,v.dy)(o||(o=(0,s.Z)(['<pre class="','"></pre>'])),(0,g.$)({wrap:!this.wrapDisabled}))}},{kind:"method",key:"firstUpdated",value:function(e){(0,p.Z)(r,"firstUpdated",this,3)([e]),this.content&&this.parseTextToColoredPre(this.content)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.iv)(n||(n=(0,s.Z)(["pre{overflow-x:auto;margin:0}pre.wrap{white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}::highlight(search-results){background-color:var(--primary-color);color:var(--text-primary-color)}"])))}},{kind:"method",key:"parseLinesToColoredPre",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=(0,a.Z)(e);try{for(o.s();!(t=o.n()).done;){var n=t.value;this.parseLineToColoredPre(n,r)}}catch(i){o.e(i)}finally{o.f()}}},{kind:"method",key:"parseLineToColoredPre",value:function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=document.createElement("div"),n=/\x1b(?:\[(.*?)[@-~]|\].*?(?:\x07|\x1b\\))/g,i=0,a={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},s=function(e){var t=document.createElement("span");a.bold&&t.classList.add("bold"),a.italic&&t.classList.add("italic"),a.underline&&t.classList.add("underline"),a.strikethrough&&t.classList.add("strikethrough"),null!==a.foregroundColor&&t.classList.add("fg-".concat(a.foregroundColor)),null!==a.backgroundColor&&t.classList.add("bg-".concat(a.backgroundColor)),t.appendChild(document.createTextNode(e)),o.appendChild(t)};null!==(t=n.exec(e));){var l=t.index,c=e.substring(i,l);c&&s(c),i=l+t[0].length,void 0!==t[1]&&t[1].split(";").forEach((function(e){switch(parseInt(e,10)){case 0:a.bold=!1,a.italic=!1,a.underline=!1,a.strikethrough=!1,a.foregroundColor=null,a.backgroundColor=null;break;case 1:a.bold=!0;break;case 3:a.italic=!0;break;case 4:a.underline=!0;break;case 9:a.strikethrough=!0;break;case 22:a.bold=!1;break;case 23:a.italic=!1;break;case 24:a.underline=!1;break;case 29:a.strikethrough=!1;break;case 30:case 39:a.foregroundColor=null;break;case 31:a.foregroundColor="red";break;case 32:a.foregroundColor="green";break;case 33:a.foregroundColor="yellow";break;case 34:a.foregroundColor="blue";break;case 35:a.foregroundColor="magenta";break;case 36:a.foregroundColor="cyan";break;case 37:a.foregroundColor="white";break;case 40:a.backgroundColor="black";break;case 41:a.backgroundColor="red";break;case 42:a.backgroundColor="green";break;case 43:a.backgroundColor="yellow";break;case 44:a.backgroundColor="blue";break;case 45:a.backgroundColor="magenta";break;case 46:a.backgroundColor="cyan";break;case 47:a.backgroundColor="white";break;case 49:a.backgroundColor=null}}))}var d,u,h=e.substring(i);(h&&s(h),r)?(null===(d=this._pre)||void 0===d||d.prepend(o),o.animate([{opacity:0},{opacity:1}],{duration:500})):null===(u=this._pre)||void 0===u||u.appendChild(o);this._filter&&this.filterLines(this._filter)}},{kind:"method",key:"parseTextToColoredPre",value:function(e){var t,r=e.split("\n"),o=(0,a.Z)(r);try{for(o.s();!(t=o.n()).done;){var n=t.value;this.parseLineToColoredPre(n)}}catch(i){o.e(i)}finally{o.f()}}},{kind:"method",key:"filterLines",value:function(e){var t;this._filter=e;var r=(null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll("div"))||[],o=0;if(e){var n=[];r.forEach((function(t){var r;null!==(r=t.textContent)&&void 0!==r&&r.toLowerCase().includes(e.toLowerCase())?(t.style.display="",o++,CSS.highlights&&null!==t.firstChild&&t.textContent&&t.querySelectorAll("span").forEach((function(t){for(var r=t.textContent.toLowerCase(),o=[],i=0;i<r.length;){var a=r.indexOf(e.toLowerCase(),i);if(-1===a)break;o.push(a),i=a+e.length}o.forEach((function(r){var o=new Range;o.setStart(t.firstChild,r),o.setEnd(t.firstChild,r+e.length),n.push(o)}))}))):t.style.display="none"})),CSS.highlights&&CSS.highlights.set("search-results",(0,i.Z)(Highlight,n))}else r.forEach((function(e){e.style.display=""})),o=r.length,CSS.highlights&&CSS.highlights.delete("search-results");return!!o}},{kind:"method",key:"clear",value:function(){this._pre&&(this._pre.innerHTML="")}}]}}),v.oi)},97206:function(e,t,r){r.r(t),r.d(t,{HaCircularProgress:function(){return f}});var o,n=r(63038),i=r(10265),a=r(27862),s=r(52565),l=r(92776),c=r(5776),d=r(21475),u=r(77204),h=(r(38419),r(58795)),p=r(57243),v=r(50778),f=(0,d.Z)([(0,v.Mo)("ha-circular-progress")],(function(e,t){var r=function(t){function r(){var t;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,l.Z)(this,r,[].concat(n)),e(t),t}return(0,c.Z)(r,t),(0,a.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:"aria-label",type:String})],key:"ariaLabel",value:function(){return"Loading"}},{kind:"field",decorators:[(0,v.Cb)()],key:"size",value:function(){return"medium"}},{kind:"method",key:"updated",value:function(e){if((0,u.Z)(r,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,i.Z)((0,u.Z)(r,"styles",this)),[(0,p.iv)(o||(o=(0,n.Z)([":host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}"])))])}}]}}),h.B)},51868:function(e,t,r){var o,n=r(63038),i=r(10265),a=r(27862),s=r(52565),l=r(92776),c=r(5776),d=r(21475),u=r(77204),h=(r(38419),r(1231)),p=r(57243),v=r(50778);(0,d.Z)([(0,v.Mo)("ha-md-divider")],(function(e,t){var r=function(t){function r(){var t;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,l.Z)(this,r,[].concat(n)),e(t),t}return(0,c.Z)(r,t),(0,a.Z)(r)}(t);return{F:r,d:[{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,i.Z)((0,u.Z)(r,"styles",this)),[(0,p.iv)(o||(o=(0,n.Z)([":host{--md-divider-color:var(--divider-color)}"])))])}}]}}),h.B)},7843:function(e,t,r){var o,n=r(63038),i=r(10265),a=r(27862),s=r(52565),l=r(92776),c=r(5776),d=r(21475),u=r(77204),h=(r(38419),r(28674)),p=r(57243),v=r(50778);(0,d.Z)([(0,v.Mo)("ha-md-menu-item")],(function(e,t){var r=function(t){function r(){var t;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,l.Z)(this,r,[].concat(n)),e(t),t}return(0,c.Z)(r,t),(0,a.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"clickAction",value:void 0},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,i.Z)((0,u.Z)(r,"styles",this)),[(0,p.iv)(o||(o=(0,n.Z)([":host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(\n          var(--rgb-primary-color),\n          0.15\n        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-menu-item-label-text-font:Roboto,sans-serif}:host(.warning){--md-menu-item-label-text-color:var(--error-color);--md-menu-item-leading-icon-color:var(--error-color)}::slotted([slot=headline]){text-wrap:nowrap}"])))])}}]}}),h.i)},96090:function(e,t,r){var o,n=r(63038),i=r(10265),a=r(27862),s=r(52565),l=r(92776),c=r(5776),d=r(21475),u=r(77204),h=(r(38419),r(53336)),p=r(7162),v=r(57243),f=r(50778);(0,d.Z)([(0,f.Mo)("ha-menu")],(function(e,t){var r=function(t){function r(){var t;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,l.Z)(this,r,[].concat(n)),e(t),t}return(0,c.Z)(r,t),(0,a.Z)(r)}(t);return{F:r,d:[{kind:"method",key:"connectedCallback",value:function(){(0,u.Z)(r,"connectedCallback",this,3)([]),this.addEventListener("close-menu",this._handleCloseMenu)}},{kind:"method",key:"_handleCloseMenu",value:function(e){var t,r;e.detail.reason.kind===p.GB.KEYDOWN&&e.detail.reason.key===p.KC.ESCAPE||null===(t=(r=e.detail.initiator).clickAction)||void 0===t||t.call(r,e.detail.initiator)}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,i.Z)((0,u.Z)(r,"styles",this)),[(0,v.iv)(o||(o=(0,n.Z)([":host{--md-sys-color-surface-container:var(--card-background-color)}"])))])}}]}}),h.xX)},75951:function(e,t,r){r.d(t,{G:function(){return o},l:function(){return n}});var o=function(e){return e.callApi("GET","error_log")},n="/api/error_log"},79960:function(e,t,r){r.d(t,{Bq:function(){return y},CP:function(){return h},KQ:function(){return v},Lm:function(){return p},NC:function(){return g},Ri:function(){return k},gM:function(){return m},jP:function(){return _},lC:function(){return u},rM:function(){return b},wt:function(){return f}});var o,n,i,a,s=r(9833),l=r(94524),c=(r(38419),r(19083),r(61006),r(17803)),d=r(56785),u=99387==r.j?(o=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){e.next=4;break}return e.next=3,t.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"});case 3:return e.abrupt("return");case 4:return e.next=6,t.callApi("POST","hassio/supervisor/reload");case 6:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}):null,h=99387==r.j?(n=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){e.next=2;break}return e.abrupt("return",t.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}));case 2:return e.t0=d.rY,e.next=5,t.callApi("GET","hassio/supervisor/info");case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}):null,p=99387==r.j?(i=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){e.next=2;break}return e.abrupt("return",t.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}));case 2:return e.t0=d.rY,e.next=5,t.callApi("GET","hassio/info");case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}):null,v=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callApi("GET","hassio/host/logs/boots"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callApi("GET","hassio/".concat(r.includes("_")?"addons/".concat(r):r,"/logs")));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,r,o){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>3&&void 0!==i[3]?i[3]:0,e.abrupt("return",t.callApiRaw("GET","hassio/".concat(r.includes("_")?"addons/".concat(r):r,"/logs").concat(0!==n?"/boots/".concat(n):""),void 0,o?{Range:o}:void 0));case 2:case"end":return e.stop()}}),e)})));return function(t,r,o){return e.apply(this,arguments)}}(),k=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,r,o){var n,i,a=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>3&&void 0!==a[3]?a[3]:100,i=a.length>4&&void 0!==a[4]?a[4]:0,e.abrupt("return",t.callApiRaw("GET","hassio/".concat(r.includes("_")?"addons/".concat(r):r,"/logs").concat(0!==i?"/boots/".concat(i):"","/follow?lines=").concat(n),void 0,void 0,o));case 3:case"end":return e.stop()}}),e)})));return function(t,r,o){return e.apply(this,arguments)}}(),b=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,r,o,n,i){var a,l,c=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>5&&void 0!==c[5]?c[5]:100,l=c.length>6&&void 0!==c[6]?c[6]:0,e.abrupt("return",t.callApiRaw("GET","hassio/".concat(r.includes("_")?"addons/".concat(r):r,"/logs").concat(0!==l?"/boots/".concat(l):"","/follow"),void 0,{Range:"entries=".concat(n,":").concat(i,":").concat(a)},o));case 3:case"end":return e.stop()}}),e)})));return function(t,r,o,n,i){return e.apply(this,arguments)}}(),m=function(e){return"/api/hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs")},y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"/api/hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs").concat(0!==r?"/boots/".concat(r):"","?lines=").concat(t)},_=99387==r.j?(a=(0,l.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){e.next=4;break}return e.next=3,t.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:r});case 3:return e.abrupt("return");case 4:return e.next=6,t.callApi("POST","hassio/supervisor/options",r);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}):null},30205:function(e,t,r){var o,n,i,a,s,l,c,d,u,h,p,v,f,g,k,b,m,y=r("9833"),_=r("94524"),w=r("63038"),x=r("27862"),Z=r("52565"),C=r("92776"),S=r("5776"),L=r("21475"),H=r("77204"),A=(r("52247"),r("38419"),r("91599"),r("64228"),r("61495"),r("61893"),r("22879"),r("63619"),r("23509"),r("52961"),r("42713"),r("19134"),r("97499"),r("97003"),r("81804"),r("39527"),r("99790"),r("13334"),r("87319"),r("57243")),T=r("35359"),B=r("19301"),M=r("50778"),E=(r("99426"),r("69546"),r("54977"),r("59826"),r("23334"),r("37583"),r("97206"),r("60370"),r("96090"),r("7843"),r("51868"),r("34273"),r("7285"),r("43546")),V=r("75951"),P=r("56785"),I=r("79960"),O=r("58014"),F=r("36522"),z=(r("17803"),r("72344")),G=r("22381"),R=(r("71695"),r("40251"),r("99341"),r("47021"),"M19.92,12.08L12,20L4.08,12.08L5.5,10.67L11,16.17V2H13V16.17L18.5,10.66L19.92,12.08M12,20H2V22H22V20H12Z"),j="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,L.Z)([(0,M.Mo)("error-log-card")],(function(e,t){var L,N,W,D,U=function(t){function r(){var t;(0,Z.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=(0,C.Z)(this,r,[].concat(n)),e(t),t}return(0,S.Z)(r,t),(0,x.Z)(r)}(t);return{F:U,d:[{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"localizeFunc",value:void 0},{kind:"field",decorators:[(0,M.Cb)()],key:"filter",value:function(){return""}},{kind:"field",decorators:[(0,M.Cb)()],key:"header",value:void 0},{kind:"field",decorators:[(0,M.Cb)()],key:"provider",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:"allow-switch",type:Boolean})],key:"allowSwitch",value:function(){return!1}},{kind:"field",decorators:[(0,M.IO)(".error-log")],key:"_logElement",value:void 0},{kind:"field",decorators:[(0,M.IO)("#scroll-top-marker")],key:"_scrollTopMarkerElement",value:void 0},{kind:"field",decorators:[(0,M.IO)("#scroll-bottom-marker")],key:"_scrollBottomMarkerElement",value:void 0},{kind:"field",decorators:[(0,M.IO)("ha-ansi-to-html")],key:"_ansiToHtmlElement",value:void 0},{kind:"field",decorators:[(0,M.IO)("#boots-menu")],key:"_bootsMenu",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_firstCursor",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_scrolledToBottomController",value:function(){return new B.r(this,{callback:function(e){return e[0].isIntersecting}})}},{kind:"field",decorators:[(0,M.SB)()],key:"_scrolledToTopController",value:function(){return new B.r(this,{})}},{kind:"field",decorators:[(0,M.SB)()],key:"_newLogsIndicator",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_logStreamAborter",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_streamSupported",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_loadingState",value:function(){return"loading"}},{kind:"field",decorators:[(0,M.SB)()],key:"_loadingPrevState",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_noSearchResults",value:function(){return!1}},{kind:"field",decorators:[(0,M.SB)()],key:"_numberOfLines",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_boot",value:function(){return 0}},{kind:"field",decorators:[(0,M.SB)()],key:"_boots",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_showBootsSelect",value:function(){return!1}},{kind:"field",decorators:[(0,M.SB)()],key:"_wrapLines",value:function(){return!0}},{kind:"field",decorators:[(0,M.SB)()],key:"_downloadSupported",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_logsFileLink",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=this._streamSupported&&this.provider&&(0,z.p)(this.hass,"hassio")&&"loading"!==this._loadingState,r=this._streamSupported&&Array.isArray(this._boots),m=this.localizeFunc||this.hass.localize;return(0,A.dy)(o||(o=(0,w.Z)([' <div class="error-log-intro"> ',' <ha-card outlined> <div class="header"> <h1 class="card-header"> ',' </h1> <div class="action-buttons"> '," ",' <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> '," ",' </div> </div> <div class="card-content error-log"> <div id="scroll-top-marker"></div> '," "," ",' <ha-ansi-to-html ?wrap-disabled="','"></ha-ansi-to-html> <div id="scroll-bottom-marker"></div> </div> <ha-button class="new-logs-indicator ','" @click="','"> <ha-svg-icon .path="','" slot="icon"></ha-svg-icon> ',' <ha-svg-icon .path="','" slot="trailingIcon"></ha-svg-icon> </ha-button> '," </ha-card> </div> "])),this._error?(0,A.dy)(n||(n=(0,w.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):A.Ld,this.header||m("ui.panel.config.logs.show_full_logs"),r&&this._showBootsSelect?(0,A.dy)(i||(i=(0,w.Z)([' <ha-assist-chip .title="','" .label="','" id="boots-anchor" @click="','"> <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon></ha-assist-chip> <ha-menu anchor="boots-anchor" id="boots-menu" positioning="fixed"> '," </ha-menu> "])),m("ui.panel.config.logs.haos_boots_title"),0===this._boot?m("ui.panel.config.logs.current"):-1===this._boot?m("ui.panel.config.logs.previous"):m("ui.panel.config.logs.startups_ago",{boot:-1*this._boot}),this._toggleBootsMenu,"M7,10L12,15L17,10H7Z",this._boots.map((function(t){return(0,A.dy)(a||(a=(0,w.Z)([' <ha-md-menu-item .value="','" @click="','" .selected="','"> '," </ha-md-menu-item> "," "])),t,e._setBoot,t===e._boot,0===t?m("ui.panel.config.logs.current"):-1===t?m("ui.panel.config.logs.previous"):m("ui.panel.config.logs.startups_ago",{boot:-1*t}),0===t?(0,A.dy)(s||(s=(0,w.Z)(['<ha-md-divider role="separator"></ha-md-divider>']))):A.Ld)}))):A.Ld,this._downloadSupported?(0,A.dy)(l||(l=(0,w.Z)([' <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> '])),j,this._downloadLogs,m("ui.panel.config.logs.download_logs")):this._logsFileLink?(0,A.dy)(c||(c=(0,w.Z)([' <a href="','" target="_blank" class="download-link"> <ha-icon-button .path="','" .label="','"></ha-icon-button> </a> '])),this._logsFileLink,j,m("ui.panel.config.logs.download_logs")):A.Ld,this._wrapLines?"M16,7H3V5H16V7M3,19H16V17H3V19M22,12L18,9V11H3V13H18V15L22,12Z":"M21,5H3V7H21V5M3,19H10V17H3V19M3,13H18C19,13 20,13.43 20,15C20,16.57 19,17 18,17H16V15L12,18L16,21V19H18C20.95,19 22,17.73 22,15C22,12.28 21,11 18,11H3V13Z",this._toggleLineWrap,m("ui.panel.config.logs.".concat(this._wrapLines?"full_width":"wrap_lines")),!t||this._error?(0,A.dy)(d||(d=(0,w.Z)(['<ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button>'])),"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._loadLogs,m("ui.common.refresh")):A.Ld,this.allowSwitch&&"core"===this.provider||r?(0,A.dy)(u||(u=(0,w.Z)([' <ha-button-menu @action="','"> <ha-icon-button slot="trigger" .path="','"> </ha-icon-button> '," "," </ha-button-menu> "])),this._handleOverflowAction,"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.allowSwitch&&"core"===this.provider?(0,A.dy)(h||(h=(0,w.Z)(['<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> '," </ha-list-item>"])),"M20,18H4V8H20M20,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8A2,2 0 0,0 20,6M15,16H6V14H15V16M18,12H6V10H18V12Z",this.hass.localize("ui.panel.config.logs.show_condensed_logs")):A.Ld,r?(0,A.dy)(p||(p=(0,w.Z)(['<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> '," </ha-list-item>"])),"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",m("ui.panel.config.logs.".concat(this._showBootsSelect?"hide":"show","_haos_boots"))):A.Ld):A.Ld,"loading"===this._loadingPrevState?(0,A.dy)(v||(v=(0,w.Z)(['<div class="loading-old"> <ha-circular-progress .indeterminate="','"></ha-circular-progress> </div>'])),"loading"===this._loadingPrevState):A.Ld,"loading"===this._loadingState?(0,A.dy)(f||(f=(0,w.Z)(["<div>","</div>"])),m("ui.panel.config.logs.loading_log")):"empty"===this._loadingState?(0,A.dy)(g||(g=(0,w.Z)(["<div>","</div>"])),m("ui.panel.config.logs.no_errors")):A.Ld,"loaded"===this._loadingState&&this.filter&&this._noSearchResults?(0,A.dy)(k||(k=(0,w.Z)(["<div> "," </div>"])),m("ui.panel.config.logs.no_issues_search",{term:this.filter})):A.Ld,!this._wrapLines,(0,T.$)({visible:this._newLogsIndicator&&!this._scrolledToBottomController.value||!1}),this._scrollToBottom,R,m("ui.panel.config.logs.scroll_down_button"),R,t&&0===this._boot&&!this._error?(0,A.dy)(b||(b=(0,w.Z)(['<div class="live-indicator"> <ha-svg-icon path="','"></ha-svg-icon> Live </div>'])),"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"):A.Ld)}},{kind:"method",key:"willUpdate",value:function(e){(0,H.Z)(U,"willUpdate",this,3)([e]),this.hasUpdated||(this._downloadSupported=(0,O.G)(this.hass),this._streamSupported=!0,this._loadBoots(),window.addEventListener("connection-status",this._handleConnectionStatus),this.hass.loadFragmentTranslation("config")),e.has("provider")&&(this._boot=0,this._loadLogs())}},{kind:"method",key:"firstUpdated",value:function(e){(0,H.Z)(U,"firstUpdated",this,3)([e]),this._scrolledToBottomController.observe(this._scrollBottomMarkerElement),this._scrolledToTopController.callback=this._handleTopScroll,this._scrolledToTopController.observe(this._scrollTopMarkerElement)}},{kind:"method",key:"updated",value:function(e){(0,H.Z)(U,"updated",this,3)([e]),this._newLogsIndicator&&this._scrolledToBottomController.value&&(this._newLogsIndicator=!1),e.has("filter")&&this._debounceSearch(),e.has("_loadingState")&&"loaded"===this._loadingState&&this._scrolledToTopController.value&&this._firstCursor&&!this._loadingPrevState&&this._loadMoreLogs()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,H.Z)(U,"disconnectedCallback",this,3)([]),this._logStreamAborter&&this._logStreamAborter.abort(),window.removeEventListener("connection-status",this._handleConnectionStatus)}},{kind:"method",key:"_downloadLogs",value:(D=(0,_.Z)((0,y.Z)().mark((function e(){var t,o,n,i;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._streamSupported||!this.provider){e.next=4;break}a=this,s={header:this.header,provider:this.provider,defaultLineCount:this._numberOfLines,boot:this._boot},(0,F.B)(a,"show-dialog",{dialogTag:"dialog-download-logs",dialogImport:function(){return Promise.all([r.e("45519"),r.e("7442"),r.e("24977"),r.e("24115")]).then(r.bind(r,81950))},dialogParams:s}),e.next=11;break;case 4:return t=(new Date).toISOString().replace(/:/g,"-"),o=this.provider&&"core"!==this.provider?(0,I.gM)(this.provider):V.l,n=this.provider&&"core"!==this.provider?"".concat(this.provider,"_").concat(t,".log"):"home-assistant_".concat(t,".log"),e.next=9,(0,E.iI)(this.hass,o);case 9:i=e.sent,(0,O.N)(i.path,n);case 11:case"end":return e.stop()}var a,s}),e,this)}))),function(){return D.apply(this,arguments)})},{kind:"method",key:"_loadLogs",value:(W=(0,_.Z)((0,y.Z)().mark((function e(){var t,r,o,n,i,a,s,l,c,d,u,h,p,v,f,g,k,b,m,_,w=this,x=arguments;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x.length>0&&void 0!==x[0]&&x[0],this._error=void 0,this._loadingState="loading",this._numberOfLines=r&&null!==(t=this._numberOfLines)&&void 0!==t?t:0,r||(this._loadingPrevState=void 0,this._firstCursor=void 0,null===(o=this._ansiToHtmlElement)||void 0===o||o.clear()),n=this._streamSupported&&(0,z.p)(this.hass,"hassio")&&this.provider,e.prev=6,this._logStreamAborter&&(this._logStreamAborter.abort(),this._logStreamAborter=void 0),!n){e.next=47;break}if(this._logStreamAborter=new AbortController,r){e.next=18;break}return e.next=13,(0,I.NC)(this.hass,this.provider,"entries=:-1:",this._boot);case 13:return i=e.sent,e.next=16,i.text();case 16:e.sent.trim()||(this._loadingState="empty");case 18:if(!r||!this._firstCursor){e.next=24;break}return e.next=21,(0,I.rM)(this.hass,this.provider,this._logStreamAborter.signal,this._firstCursor,this._numberOfLines,100,this._boot);case 21:a=e.sent,e.next=27;break;case 24:return e.next=26,(0,I.Ri)(this.hass,this.provider,this._logStreamAborter.signal,100,this._boot);case 26:a=e.sent;case 27:if(a.headers.has("X-First-Cursor")&&(this._firstCursor=a.headers.get("X-First-Cursor")),a.body){e.next=30;break}throw new Error("No stream body found");case 30:this._loadingState="empty",s="",l=a.body.getReader(),c=new TextDecoder,d=!1;case 35:if(d){e.next=45;break}return e.next=38,l.read();case 38:u=e.sent,h=u.value,p=u.done,d=p,h&&(v=c.decode(h,{stream:!d}),f=this._scrolledToBottomController.value,g="".concat(s).concat(v).split("\n").filter((function(e){return""!==e.trim()})),s=v.endsWith("\n")?"":g.splice(-1,1)[0],g.length&&(null===(k=this._ansiToHtmlElement)||void 0===k||k.parseLinesToColoredPre(g),this._numberOfLines+=g.length,"empty"===this._loadingState&&setTimeout((function(){w._loadingState="loaded"}),100)),f&&this._logElement?this._scrollToBottom():this._newLogsIndicator=!0,this._downloadSupported||(b=(0,I.Bq)(this.provider,this._numberOfLines,this._boot),(0,E.iI)(this.hass,b).then((function(e){w._logsFileLink=e.path}))),r=!1),e.next=35;break;case 45:e.next=59;break;case 47:if(this._streamSupported=!1,m="",!(0,z.p)(this.hass,"hassio")||!this.provider){e.next=55;break}return e.next=52,(0,I.wt)(this.hass,this.provider);case 52:m=e.sent,e.next=58;break;case 55:return e.next=57,(0,V.G)(this.hass);case 57:m=e.sent;case 58:m&&(null===(_=this._ansiToHtmlElement)||void 0===_||_.parseTextToColoredPre(m),this._loadingState="loaded",this._scrollToBottom());case 59:e.next=69;break;case 61:if(e.prev=61,e.t0=e.catch(6),"AbortError"!==e.t0.name){e.next=65;break}return e.abrupt("return");case 65:if(r||!n){e.next=68;break}return this._loadLogs(!0),e.abrupt("return");case 68:this._error=(this.localizeFunc||this.hass.localize)("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,P.js)(e.t0)});case 69:case"end":return e.stop()}}),e,this,[[6,61]])}))),function(){return W.apply(this,arguments)})},{kind:"field",key:"_debounceSearch",value:function(){var e=this;return(0,G.D)((function(){var t;e._noSearchResults=!(null!==(t=e._ansiToHtmlElement)&&void 0!==t&&t.filterLines(e.filter)),e.filter||e._scrollToBottom()}),150)}},{kind:"field",key:"_debounceScrollToBottom",value:function(){var e=this;return(0,G.D)((function(){e._logElement.scrollTop=e._logElement.scrollHeight}),300)}},{kind:"method",key:"_scrollToBottom",value:function(){this._logElement&&(this._newLogsIndicator=!1,"core"!==this.provider?this._logElement.scrollTo(0,this._logElement.scrollHeight):this._debounceScrollToBottom())}},{kind:"field",key:"_handleConnectionStatus",value:function(){var e=this;return function(t){"disconnected"===t.detail&&e._logStreamAborter&&(e._logStreamAborter.abort(),e._loadingState="loading"),"connected"===t.detail&&e._loadLogs(!0)}}},{kind:"method",key:"_loadMoreLogs",value:(N=(0,_.Z)((0,y.Z)().mark((function e(){var t,r,o,n,i,a,s=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._firstCursor&&"loading"!==this._loadingPrevState&&"loaded"===this._loadingState&&this._logElement&&this.provider){e.next=2;break}return e.abrupt("return");case 2:return t=this._scrolledToBottomController.value,r=this._logElement.scrollHeight-this._logElement.scrollTop,this._loadingPrevState="loading",e.next=7,(0,I.NC)(this.hass,this.provider,"entries=".concat(this._firstCursor,":-100:100"),this._boot);case 7:if(!(o=e.sent).headers.has("X-First-Cursor")){e.next=13;break}if(this._firstCursor!==o.headers.get("X-First-Cursor")){e.next=12;break}return this._loadingPrevState="end",e.abrupt("return");case 12:this._firstCursor=o.headers.get("X-First-Cursor");case 13:return e.next=15,o.text();case 15:(n=e.sent)?(a=n.split("\n").filter((function(e){return""!==e.trim()})).reverse(),null===(i=this._ansiToHtmlElement)||void 0===i||i.parseLinesToColoredPre(a,!0),this._numberOfLines+=a.length,this._loadingPrevState="loaded"):this._loadingPrevState="end",t?this._scrollToBottom():"end"!==this._loadingPrevState&&this._logElement&&window.requestAnimationFrame((function(){s._logElement.scrollTop=s._logElement.scrollHeight-r}));case 18:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{kind:"field",key:"_handleTopScroll",value:function(){var e=this;return function(t){var r=t[0].isIntersecting;return!e._firstCursor||!r||"loaded"!==e._loadingState||e._loadingPrevState&&"loaded"!==e._loadingPrevState||e.filter||e._loadMoreLogs(),r}}},{kind:"method",key:"_loadBoots",value:(L=(0,_.Z)((0,y.Z)().mark((function e(){var t,r,o;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._streamSupported||!(0,z.p)(this.hass,"hassio")){e.next=13;break}return e.prev=1,e.next=4,(0,I.KQ)(this.hass);case 4:t=e.sent,r=t.data,(o=Object.keys(r.boots).map(Number).sort((function(e,t){return t-e}))).length>1&&(this._boots=o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return L.apply(this,arguments)})},{kind:"method",key:"_toggleLineWrap",value:function(){this._wrapLines=!this._wrapLines}},{kind:"method",key:"_handleOverflowAction",value:function(e){var t=e.detail.index;switch("core"===this.provider&&t--,t){case-1:(0,F.B)(this,"switch-log-view");break;case 0:this._showBootsSelect=!this._showBootsSelect}}},{kind:"method",key:"_toggleBootsMenu",value:function(){this._bootsMenu&&(this._bootsMenu.open=!this._bootsMenu.open)}},{kind:"method",key:"_setBoot",value:function(e){this._boot=e.target.value,this._loadLogs()}},{kind:"field",static:!0,key:"styles",value:function(){return(0,A.iv)(m||(m=(0,w.Z)([":host{direction:var(--direction)}.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:8px;position:relative}ha-card.hidden{display:none}ha-card .action-buttons{display:flex;align-items:center;height:100%}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;display:block;margin-block-start:0px;font-weight:400;white-space:nowrap;max-width:calc(100% - 150px);overflow:hidden;text-overflow:ellipsis}ha-icon-button{float:right}.error-log{position:relative;font-family:var(--code-font-family, monospace);clear:both;text-align:start;padding-top:12px;padding-bottom:12px;overflow-y:scroll;min-height:var(--error-log-card-height,calc(100vh - 240px));max-height:var(--error-log-card-height,calc(100vh - 240px));border-top:1px solid var(--divider-color);direction:ltr}@media all and (max-width:870px){.error-log{min-height:var(--error-log-card-height,calc(100vh - 190px));max-height:var(--error-log-card-height,calc(100vh - 190px))}}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.new-logs-indicator{--mdc-theme-primary:var(--text-primary-color);overflow:hidden;position:absolute;bottom:0;left:0;right:0;height:0;background-color:var(--primary-color);border-radius:8px;transition:height .4s ease-out;display:flex;justify-content:space-between;align-items:center}.new-logs-indicator.visible{height:24px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.loading-old{display:flex;width:100%;justify-content:center;padding:16px}ha-assist-chip{--ha-assist-chip-container-shape:10px;--md-assist-chip-trailing-space:8px}@keyframes breathe{from{opacity:.8}to{opacity:0}}.live-indicator{position:absolute;bottom:0;inset-inline-end:16px;border-top-right-radius:8px;border-top-left-radius:8px;background-color:var(--primary-color);color:var(--text-primary-color);padding:4px 8px;opacity:.8}.live-indicator ha-svg-icon{animation:breathe 1s cubic-bezier(.5,0,1,1) infinite alternate;height:14px;width:14px}.download-link{color:var(--text-color)}"])))}}]}}),A.oi)},58014:function(e,t,r){r.d(t,{G:function(){return i},N:function(){return n}});var o=r("18117"),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=document.createElement("a");r.target="_blank",r.href=e,r.download=t,document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click")),document.body.removeChild(r)},i=function(e){var t;return!function(e){return!!e.auth.external&&o.G}(e)||!(null===(t=e.auth.external)||void 0===t||!t.config.downloadFileSupported)}},18117:function(e,t,r){r.d(t,{G:function(){return o}});r(19134),r(5740);var o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=74461.6b58ad841980f314.js.map