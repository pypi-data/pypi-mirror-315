"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["89308"],{95262:function(e,t,i){function n(e){return void 0===e||Array.isArray(e)?e:[e]}i.d(t,{r:function(){return n}})},92636:function(e,t,i){i.d(t,{z:function(){return n}});i(19083),i(61006);var n=function(e){return function(t,i){return e.includes(t,i)}}},59847:function(e,t,i){i.d(t,{N:function(){return r}});var n=i(73850),r=function(e){return(0,n.M)(e.entity_id)}},75278:function(e,t,i){i.d(t,{e:function(){return n}});var n=function(e,t){return r(e.attributes,t)},r=function(e,t){return!!(e.supported_features&t)}},29095:function(e,t,i){var n,r,o,a,s,u,c=i(63038),l=i(27862),d=i(52565),h=i(92776),f=i(5776),v=i(21475),m=(i(38419),i(63626),i(57243)),_=i(50778);i(97206),i(37583),(0,v.Z)([(0,_.Mo)("ha-progress-button")],(function(e,t){var i=function(t){function i(){var t;(0,d.Z)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,h.Z)(this,i,[].concat(r)),e(t),t}return(0,f.Z)(i,t),(0,l.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"progress",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"raised",value:function(){return!1}},{kind:"field",decorators:[(0,_.SB)()],key:"_result",value:void 0},{kind:"method",key:"render",value:function(){var e=this._result||this.progress;return(0,m.dy)(n||(n=(0,c.Z)([' <mwc-button ?raised="','" .disabled="','" class="','"> <slot></slot> </mwc-button> '," "])),this.raised,this.disabled||this.progress,this._result||"",e?(0,m.dy)(r||(r=(0,c.Z)([' <div class="progress"> '," </div> "])),"success"===this._result?(0,m.dy)(o||(o=(0,c.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),"M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"):"error"===this._result?(0,m.dy)(a||(a=(0,c.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),"M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z"):this.progress?(0,m.dy)(s||(s=(0,c.Z)([' <ha-circular-progress size="small" indeterminate></ha-circular-progress> ']))):""):m.Ld)}},{kind:"method",key:"actionSuccess",value:function(){this._setResult("success")}},{kind:"method",key:"actionError",value:function(){this._setResult("error")}},{kind:"method",key:"_setResult",value:function(e){var t=this;this._result=e,setTimeout((function(){t._result=void 0}),2e3)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.iv)(u||(u=(0,c.Z)([":host{outline:0;display:inline-block;position:relative;pointer-events:none}mwc-button{transition:all 1s;pointer-events:initial}mwc-button.success{--mdc-theme-primary:white;background-color:var(--success-color);transition:none;border-radius:4px;pointer-events:none}mwc-button[raised].success{--mdc-theme-primary:var(--success-color);--mdc-theme-on-primary:white}mwc-button.error{--mdc-theme-primary:white;background-color:var(--error-color);transition:none;border-radius:4px;pointer-events:none}mwc-button[raised].error{--mdc-theme-primary:var(--error-color);--mdc-theme-on-primary:white}.progress{bottom:4px;position:absolute;text-align:center;top:4px;width:100%}ha-svg-icon{color:#fff}mwc-button.error slot,mwc-button.success slot{visibility:hidden}"])))}}]}}),m.oi)},97206:function(e,t,i){i.r(t),i.d(t,{HaCircularProgress:function(){return m}});var n,r=i(63038),o=i(10265),a=i(27862),s=i(52565),u=i(92776),c=i(5776),l=i(21475),d=i(77204),h=(i(38419),i(58795)),f=i(57243),v=i(50778),m=(0,l.Z)([(0,v.Mo)("ha-circular-progress")],(function(e,t){var i=function(t){function i(){var t;(0,s.Z)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,u.Z)(this,i,[].concat(r)),e(t),t}return(0,c.Z)(i,t),(0,a.Z)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:"aria-label",type:String})],key:"ariaLabel",value:function(){return"Loading"}},{kind:"field",decorators:[(0,v.Cb)()],key:"size",value:function(){return"medium"}},{kind:"method",key:"updated",value:function(e){if((0,d.Z)(i,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value:function(){return[].concat((0,o.Z)((0,d.Z)(i,"styles",this)),[(0,f.iv)(n||(n=(0,r.Z)([":host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}"])))])}}]}}),h.B)},41063:function(e,t,i){i.d(t,{CM:function(){return b},QQ:function(){return g},aV:function(){return m},bq:function(){return Z},c9:function(){return w},dh:function(){return x},lE:function(){return y},lV:function(){return k},o1:function(){return h},qJ:function(){return p},qR:function(){return f},vI:function(){return _},xO:function(){return v}});var n=i(10265),r=i(58814),o=(i(91599),i(60933),i(26285),i(19083),i(71695),i(92745),i(32126),i(19423),i(42713),i(37362),i(61427),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(99341),i(39527),i(99790),i(34810),i(41360),i(36993),i(49207),i(47021),i(95262)),a=i(59847),s=i(75278),u=i(96530),c=i(46329),l=["domain","integration","device_class"],d=["integration","manufacturer","model"],h=function(e,t,i,n,r,o,a){var s=[],u=[],c=[];return Object.values(i).forEach((function(i){i.labels.includes(t)&&_(e,r,n,i.area_id,o,a)&&c.push(i.area_id)})),Object.values(n).forEach((function(i){i.labels.includes(t)&&p(e,Object.values(r),i,o,a)&&u.push(i.id)})),Object.values(r).forEach((function(i){i.labels.includes(t)&&g(e.states[i.entity_id],o,a)&&s.push(i.entity_id)})),{areas:c,devices:u,entities:s}},f=function(e,t,i,n,r){var o=[];return Object.values(i).forEach((function(i){i.floor_id===t&&_(e,e.entities,e.devices,i.area_id,n,r)&&o.push(i.area_id)})),{areas:o}},v=function(e,t,i,n,r,o){var a=[],s=[];return Object.values(i).forEach((function(i){i.area_id===t&&p(e,Object.values(n),i,r,o)&&s.push(i.id)})),Object.values(n).forEach((function(i){i.area_id===t&&g(e.states[i.entity_id],r,o)&&a.push(i.entity_id)})),{devices:s,entities:a}},m=function(e,t,i,n,r){var o=[];return Object.values(i).forEach((function(i){i.device_id===t&&g(e.states[i.entity_id],n,r)&&o.push(i.entity_id)})),{entities:o}},_=function(e,t,i,n,r,o){return!!Object.values(i).some((function(i){return!(i.area_id!==n||!p(e,Object.values(t),i,r,o))}))||Object.values(t).some((function(t){return!(t.area_id!==n||!g(e.states[t.entity_id],r,o))}))},p=function(e,t,i,n,r){var a,s,u=r?(0,c.HP)(r,t):void 0;return!(null!==(a=n.target)&&void 0!==a&&a.device&&!(0,o.r)(n.target.device).some((function(e){return y(e,i,u)})))&&(null===(s=n.target)||void 0===s||!s.entity||t.filter((function(e){return e.device_id===i.id})).some((function(t){var i=e.states[t.entity_id];return g(i,n,r)})))},g=function(e,t,i){var n;return null===(n=t.target)||void 0===n||!n.entity||(0,o.r)(t.target.entity).some((function(t){return k(t,e,i)}))},y=function(e,t,i){var n,r=e.manufacturer,o=e.model,a=e.integration;if(r&&t.manufacturer!==r)return!1;if(o&&t.model!==o)return!1;if(a&&i&&(null==i||null===(n=i[t.id])||void 0===n||!n.has(a)))return!1;return!0},k=function(e,t,i){var n,r=e.domain,u=e.device_class,c=e.supported_features,l=e.integration;if(r){var d=(0,a.N)(t);if(Array.isArray(r)?!r.includes(d):d!==r)return!1}if(u){var h=t.attributes.device_class;if(h&&Array.isArray(u)?!u.includes(h):h!==u)return!1}return!(c&&!(0,o.r)(c).some((function(e){return(0,s.e)(t,e)})))&&(!l||(null==i||null===(n=i[t.entity_id])||void 0===n?void 0:n.domain)===l)},b=function(e){if(!e.entity)return{entity:null};if("filter"in e.entity)return e;var t=e.entity,i=t.domain,n=t.integration,o=t.device_class,a=(0,r.Z)(t,l);return i||n||o?{entity:Object.assign(Object.assign({},a),{},{filter:{domain:i,integration:n,device_class:o}})}:{entity:a}},w=function(e){if(!e.device)return{device:null};if("filter"in e.device)return e;var t=e.device,i=t.integration,n=t.manufacturer,o=t.model,a=(0,r.Z)(t,d);return i||n||o?{device:Object.assign(Object.assign({},a),{},{filter:{integration:i,manufacturer:n,model:o}})}:{device:a}},Z=function(e){var t,i;if("target"in e)t=(0,o.r)(null===(i=e.target)||void 0===i?void 0:i.entity);else if("entity"in e){var r,a;if(null!==(r=e.entity)&&void 0!==r&&r.include_entities)return;t=(0,o.r)(null===(a=e.entity)||void 0===a?void 0:a.filter)}if(t){var s=t.flatMap((function(e){return e.integration||e.device_class||e.supported_features||!e.domain?[]:(0,o.r)(e.domain).filter((function(e){return(0,u.X)(e)}))}));return(0,n.Z)(new Set(s))}},x=function(e,t,i,n,r){if(!t)return[];var a={target:{}},s=new Set((0,o.r)(t.entity_id)),u=new Set((0,o.r)(t.device_id)),c=new Set((0,o.r)(t.area_id)),l=new Set((0,o.r)(t.floor_id));return new Set((0,o.r)(t.label_id)).forEach((function(t){var o=h(e,t,r,n,i,a);o.devices.forEach((function(e){return u.add(e)})),o.entities.forEach((function(e){return s.add(e)})),o.areas.forEach((function(e){return c.add(e)}))})),l.forEach((function(t){f(e,t,r,a).areas.forEach((function(e){return c.add(e)}))})),c.forEach((function(t){var r=v(e,t,n,i,a);r.devices.forEach((function(e){return u.add(e)})),r.entities.forEach((function(e){return s.add(e)}))})),u.forEach((function(t){m(e,t,i,a).entities.forEach((function(e){return s.add(e)}))})),Array.from(s)}},96530:function(e,t,i){i.d(t,{X:function(){return o},y:function(){return r}});var n=i(92636),r=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],o=(0,n.z)(r)},91270:function(e,t,i){i.r(t);var n,r,o,a,s=i(63038),u=i(9833),c=i(94524),l=i(27862),d=i(52565),h=i(92776),f=i(5776),v=i(21475),m=i(10265),_=(i(38419),i(19083),i(63619),i(19423),i(19134),i(5740),i(57243)),p=i(50778),g=i(27486),y=i(36522),k=i(20172),b=(i(29095),i(29073),i(23334),i(56785)),w=i(74617),Z=i(28008),x=i(73192),C=(0,g.Z)((function(e,t,i,n){return[{name:"name",required:!0,disabled:t,selector:{text:{}}},{name:"usage",required:!0,type:"select",options:[[w.eX.BACKUP,e("ui.panel.config.storage.network_mounts.mount_usage.backup")],[w.eX.MEDIA,e("ui.panel.config.storage.network_mounts.mount_usage.media")],[w.eX.SHARE,e("ui.panel.config.storage.network_mounts.mount_usage.share")]]},{name:"server",required:!0,selector:{text:{}}},{name:"type",required:!0,type:"select",options:[[w.mw.CIFS,e("ui.panel.config.storage.network_mounts.mount_type.cifs")],[w.mw.NFS,e("ui.panel.config.storage.network_mounts.mount_type.nfs")]]}].concat((0,m.Z)("nfs"===i?[{name:"path",required:!0,selector:{text:{}}}]:"cifs"===i?[].concat((0,m.Z)(n?[{name:"version",required:!0,selector:{select:{options:[{label:e("ui.panel.config.storage.network_mounts.cifs_versions.auto"),value:"auto"},{label:e("ui.panel.config.storage.network_mounts.cifs_versions.legacy",{version:"2.0"}),value:"2.0"},{label:e("ui.panel.config.storage.network_mounts.cifs_versions.legacy",{version:"1.0"}),value:"1.0"}],mode:"dropdown"}}}]:[]),[{name:"share",required:!0,selector:{text:{}}},{name:"username",required:!1,selector:{text:{}}},{name:"password",required:!1,selector:{text:{type:"password"}}}]):[]))}));(0,v.Z)([(0,p.Mo)("dialog-mount-view")],(function(e,t){var i,v,m,g=function(t){function i(){var t;(0,d.Z)(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,h.Z)(this,i,[].concat(r)),e(t),t}return(0,f.Z)(i,t),(0,l.Z)(i)}(t);return{F:g,d:[{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_data",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_waiting",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_validationError",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_validationWarning",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_existing",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_showCIFSVersion",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_reloadMounts",value:void 0},{kind:"method",key:"showDialog",value:(m=(0,c.Z)((0,u.Z)().mark((function e(t){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._data=t.mount,this._existing=void 0!==t.mount,this._reloadMounts=t.reloadMounts,"cifs"===(null===(i=t.mount)||void 0===i?void 0:i.type)&&t.mount.version&&"auto"!==t.mount.version&&(this._showCIFSVersion=!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._data=void 0,this._waiting=void 0,this._error=void 0,this._validationError=void 0,this._validationWarning=void 0,this._existing=void 0,this._showCIFSVersion=void 0,this._reloadMounts=void 0,(0,y.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){var e;return void 0===this._existing?_.Ld:(0,_.dy)(n||(n=(0,s.Z)([' <ha-dialog open scrimClickAction escapeKeyAction .heading="','" @closed="','"> <ha-dialog-header slot="heading"> <span slot="title">',' </span> <a slot="actionItems" class="header_button" href="','" title="','" target="_blank" rel="noreferrer" dir="','"> <ha-icon-button .path="','"></ha-icon-button> </a> </ha-dialog-header> ',' <ha-form .data="','" .schema="','" .error="','" .warning="','" .computeLabel="','" .computeHelper="','" .computeError="','" .computeWarning="','" @value-changed="','" dialogInitialFocus></ha-form> <div slot="secondaryAction"> <mwc-button @click="','" dialogInitialFocus> '," </mwc-button> ",' </div> <ha-progress-button .progress="','" slot="primaryAction" @click="','"> '," </ha-progress-button> </ha-dialog> "])),this._existing?this.hass.localize("ui.panel.config.storage.network_mounts.update_title"):this.hass.localize("ui.panel.config.storage.network_mounts.add_title"),this.closeDialog,this._existing?this.hass.localize("ui.panel.config.storage.network_mounts.update_title"):this.hass.localize("ui.panel.config.storage.network_mounts.add_title"),(0,x.R)(this.hass,"/common-tasks/os#network-storage"),this.hass.localize("ui.panel.config.storage.network_mounts.documentation"),(0,k.Zu)(this.hass),"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",this._error?(0,_.dy)(r||(r=(0,s.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):_.Ld,this._data,C(this.hass.localize,this._existing,null===(e=this._data)||void 0===e?void 0:e.type,this._showCIFSVersion),this._validationError,this._validationWarning,this._computeLabelCallback,this._computeHelperCallback,this._computeErrorCallback,this._computeWarningCallback,this._valueChanged,this.closeDialog,this.hass.localize("ui.common.cancel"),this._existing?(0,_.dy)(o||(o=(0,s.Z)(['<mwc-button @click="','" class="delete-btn"> '," </mwc-button>"])),this._deleteMount,this.hass.localize("ui.common.delete")):_.Ld,this._waiting,this._connectMount,this._existing?this.hass.localize("ui.panel.config.storage.network_mounts.update"):this.hass.localize("ui.panel.config.storage.network_mounts.connect"))}},{kind:"field",key:"_computeLabelCallback",value:function(){var e=this;return function(t){return e.hass.localize("ui.panel.config.storage.network_mounts.options.".concat(t.name,".title"))}}},{kind:"field",key:"_computeHelperCallback",value:function(){var e=this;return function(t){return e.hass.localize("ui.panel.config.storage.network_mounts.options.".concat(t.name,".description"))}}},{kind:"field",key:"_computeErrorCallback",value:function(){var e=this;return function(t){return e.hass.localize("ui.panel.config.storage.network_mounts.errors.".concat(t))||t}}},{kind:"field",key:"_computeWarningCallback",value:function(){var e=this;return function(t){return e.hass.localize("ui.panel.config.storage.network_mounts.warnings.".concat(t))||t}}},{kind:"method",key:"_valueChanged",value:function(e){var t,i,n;this._validationError={},this._validationWarning={},this._data=e.detail.value,null!==(t=this._data)&&void 0!==t&&t.name&&!/^\w+$/.test(this._data.name)&&(this._validationError.name="invalid_name"),"cifs"!==(null===(i=this._data)||void 0===i?void 0:i.type)||this._data.version||(this._data.version="auto"),"cifs"===(null===(n=this._data)||void 0===n?void 0:n.type)&&this._data.version&&["1.0","2.0"].includes(this._data.version)&&(this._validationWarning.version="not_recomeded_cifs_version")}},{kind:"method",key:"_connectMount",value:(v=(0,c.Z)((0,u.Z)().mark((function e(t){var i,n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.target,this._error=void 0,this._waiting=!0,"cifs"===(n=Object.assign({},this._data)).type&&"auto"===n.version&&(n.version=void 0),e.prev=5,!this._existing){e.next=11;break}return e.next=9,(0,w.TF)(this.hass,n);case 9:e.next=13;break;case 11:return e.next=13,(0,w.xM)(this.hass,n);case 13:e.next=22;break;case 15:return e.prev=15,e.t0=e.catch(5),this._error=(0,b.js)(e.t0),this._waiting=!1,i.actionError(),"cifs"!==this._data.type||this._showCIFSVersion||(this._showCIFSVersion=!0),e.abrupt("return");case 22:this._reloadMounts&&this._reloadMounts(),this.closeDialog();case 24:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return v.apply(this,arguments)})},{kind:"method",key:"_deleteMount",value:(i=(0,c.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._error=void 0,this._waiting=!0,e.prev=2,e.next=5,(0,w.ap)(this.hass,this._data.name);case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),this._error=(0,b.js)(e.t0),this._waiting=!1,e.abrupt("return");case 12:this._reloadMounts&&this._reloadMounts(),this.closeDialog();case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[Z.Qx,Z.yu,(0,_.iv)(a||(a=(0,s.Z)(["ha-icon-button{color:var(--primary-text-color)}.delete-btn{--mdc-theme-primary:var(--error-color)}"])))]}}]}}),_.oi)}}]);
//# sourceMappingURL=89308.e2c5a95ec6186d44.js.map