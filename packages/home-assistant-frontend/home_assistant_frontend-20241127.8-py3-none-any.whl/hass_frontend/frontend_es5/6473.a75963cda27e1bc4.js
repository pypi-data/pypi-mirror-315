"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["6473"],{20451:function(t,e,i){i.d(e,{Z:function(){return n}});i(38419),i(23669);var a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=""+t,a=1;a<e;a++)i=parseInt(i)<Math.pow(10,a)?"0".concat(i):i;return i};function n(t){var e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),n=Math.floor(t/1e3%3600%60),r=Math.floor(t%1e3);return e>0?"".concat(e,":").concat(a(i),":").concat(a(n)):i>0?"".concat(i,":").concat(a(n)):n>0||r>0?"".concat(n).concat(r>0?".".concat(a(r,3)):""):null}},31146:function(t,e,i){i.d(e,{i:function(){return n}});var a=(0,i(93826).P)((function(t){history.replaceState({scrollPosition:t},"")}),300),n=function(t){return function(e){return{kind:"method",placement:"prototype",key:e.key,descriptor:{set:function(t){a(t),this["__".concat(String(e.key))]=t},get:function(){var t;return this["__".concat(String(e.key))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(i){var a=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){var i=this;a.call(this);var n=this[e.key];n&&this.updateComplete.then((function(){var e=i.renderRoot.querySelector(t);e&&setTimeout((function(){e.scrollTop=n}),0)}))}}}}}},18520:function(t,e,i){i.d(e,{n:function(){return a}});var a=function(t){return!(t.native instanceof MouseEvent)||t.native instanceof PointerEvent&&"mouse"!==t.native.pointerType}},67650:function(t,e,i){i.a(t,(async function(t,e){try{var a,n=i(63038),r=i(27862),o=i(52565),s=i(92776),d=i(5776),l=i(21475),c=(i(38419),i(92745),i(63619),i(23509),i(42713),i(95078),i(39527),i(41360),i(36993),i(49207),i(57243)),h=i(50778),u=i(50875),f=i(36522),m=i(20172),v=i(50602),y=i(25179),k=i(18520),p=t([v]);v=(p.then?(await p)():p)[0];var g=function(t){var e=parseFloat(t);return isFinite(e)?e:null},_=(0,l.Z)(null,(function(t,e){var i=function(e){function i(){var e;(0,o.Z)(this,i);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=(0,s.Z)(this,i,[].concat(n)),t(e),e}return(0,d.Z)(i,e),(0,r.Z)(i)}(e);return{F:i,d:[{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"data",value:function(){return[]}},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,h.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,h.Cb)()],key:"identifier",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"showNames",value:function(){return!0}},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"clickForMoreInfo",value:function(){return!0}},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Number})],key:"paddingYAxis",value:function(){return 0}},{kind:"field",decorators:[(0,h.Cb)({type:Number})],key:"chartIndex",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"logarithmicScale",value:function(){return!1}},{kind:"field",decorators:[(0,h.Cb)({type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"fitYData",value:function(){return!1}},{kind:"field",decorators:[(0,h.SB)()],key:"_chartData",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_entityIds",value:function(){return[]}},{kind:"field",key:"_datasetToDataIndex",value:function(){return[]}},{kind:"field",decorators:[(0,h.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_yWidth",value:function(){return 0}},{kind:"field",key:"_chartTime",value:function(){return new Date}},{kind:"field",decorators:[(0,h.IO)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"resize",value:function(){var t=this;return function(e){var i;null===(i=t._chart)||void 0===i||i.resize(e)}}},{kind:"method",key:"render",value:function(){return(0,c.dy)(a||(a=(0,n.Z)([' <ha-chart-base .hass="','" .data="','" .options="','" .paddingYAxis="','" chart-type="line"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.paddingYAxis-this._yWidth)}},{kind:"method",key:"willUpdate",value:function(t){var e=this;(!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData"))&&(this._chartOptions={parsing:!1,animation:!1,interaction:{mode:"nearest",axis:"xy"},scales:{x:{type:"time",adapters:{date:{locale:this.hass.locale,config:this.hass.config}},min:this.startTime,suggestedMax:this.endTime,ticks:{maxRotation:0,sampleSize:5,autoSkipPadding:20,major:{enabled:!0},font:function(t){return t.tick&&t.tick.major?{weight:"bold"}:{}}},time:{tooltipFormat:"datetimeseconds"}},y:{suggestedMin:this.fitYData?this.minYAxis:null,suggestedMax:this.fitYData?this.maxYAxis:null,min:this.fitYData?null:this.minYAxis,max:this.fitYData?null:this.maxYAxis,ticks:{maxTicksLimit:7},title:{display:!0,text:this.unit},afterUpdate:function(t){e._yWidth!==Math.floor(t.width)&&(e._yWidth=Math.floor(t.width),(0,f.B)(e,"y-width-changed",{value:e._yWidth,chartIndex:e.chartIndex}))},position:(0,m.HE)(this.hass)?"right":"left",type:this.logarithmicScale?"logarithmic":"linear"}},plugins:{tooltip:{callbacks:{label:function(t){var i="".concat(t.dataset.label,": ").concat((0,v.uf)(t.parsed.y,e.hass.locale,(0,v.l4)(void 0,e.hass.entities[e._entityIds[t.datasetIndex]]))," ").concat(e.unit),a=e._datasetToDataIndex[t.datasetIndex],n=e.data[a];n.statistics&&n.statistics.length>0&&(i+=0===n.states.length||t.parsed.x<n.states[0].last_changed?"\n".concat(e.hass.localize("ui.components.history_charts.source_stats")):"\n".concat(e.hass.localize("ui.components.history_charts.source_history")));return i}}},filler:{propagate:!0},legend:{display:this.showNames,labels:{usePointStyle:!0}}},elements:{line:{tension:.1,borderWidth:1.5},point:{hitRadius:50}},segment:{borderColor:function(t){var i=e._datasetToDataIndex[t.datasetIndex],a=e.data[i];return a.statistics&&a.statistics.length>0&&(0===a.states.length||t.p0.parsed.x<a.states[0].last_changed)?e._chartData.datasets[i].borderColor+"7F":void 0}},locale:(0,v.Hd)(this.hass.locale),onClick:function(t){if(e.clickForMoreInfo&&!(0,k.n)(t)){var i=t.chart,a=i.getElementsAtEventForMode(t,"nearest",{intersect:!0},!0);if(a.length){var n=a[0];(0,f.B)(e,"hass-more-info",{entityId:e._entityIds[n.datasetIndex]}),i.canvas.dispatchEvent(new Event("mouseout"))}}}}),(t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-y.Q))&&this._generateData()}},{kind:"method",key:"_generateData",value:function(){var t=this,e=0,i=getComputedStyle(this),a=this.data,n=[],r=[],o=[];if(0!==a.length){this._chartTime=new Date;var s=this.endTime,d=this.names||{};a.forEach((function(a,l){var c=a.domain,h=d[a.entity_id]||a.name,f=null,m=[],v=function(t,e){e&&(t>s||(m.forEach((function(i,a){null===e[a]&&f&&null!==f[a]&&i.data.push({x:t.getTime(),y:f[a]}),i.data.push({x:t.getTime(),y:e[a]})})),f=e))},y=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;s||(s=(0,u.hZ)(e,i),e++),m.push({label:t,fill:!!n&&"origin",borderColor:s,backgroundColor:s+"7F",stepped:"before",pointRadius:0,data:[]}),r.push(a.entity_id),o.push(l)};if("thermostat"===c||"climate"===c||"water_heater"===c){var k=a.states.some((function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action})),p="climate"===c&&k?function(t){var e;return"heating"===(null===(e=t.attributes)||void 0===e?void 0:e.hvac_action)}:function(t){return"heat"===t.state},_="climate"===c&&k?function(t){var e;return"cooling"===(null===(e=t.attributes)||void 0===e?void 0:e.hvac_action)}:function(t){return"cool"===t.state},b=a.states.some(p),x=a.states.some(_),w=a.states.some((function(t){return t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low}));y("".concat(t.hass.localize("ui.card.climate.current_temperature",{name:h}))),b&&y("".concat(t.hass.localize("ui.card.climate.heating",{name:h})),!0,i.getPropertyValue("--state-climate-heat-color")),x&&y("".concat(t.hass.localize("ui.card.climate.cooling",{name:h})),!0,i.getPropertyValue("--state-climate-cool-color")),w?(y("".concat(t.hass.localize("ui.card.climate.target_temperature_mode",{name:h,mode:t.hass.localize("ui.card.climate.high")}))),y("".concat(t.hass.localize("ui.card.climate.target_temperature_mode",{name:h,mode:t.hass.localize("ui.card.climate.low")})))):y("".concat(t.hass.localize("ui.card.climate.target_temperature_entity",{name:h}))),a.states.forEach((function(t){if(t.attributes){var e=g(t.attributes.current_temperature),i=[e];if(b&&i.push(p(t)?e:null),x&&i.push(_(t)?e:null),w){var a=g(t.attributes.target_temp_high),n=g(t.attributes.target_temp_low);i.push(a,n),v(new Date(t.last_changed),i)}else{var r=g(t.attributes.temperature);i.push(r),v(new Date(t.last_changed),i)}}}))}else if("humidifier"===c){var T=a.states.some((function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.action})),C=a.states.some((function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity})),D=T&&a.states.some((function(t){var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)})),Y=T&&a.states.some((function(t){var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}));y("".concat(t.hass.localize("ui.card.humidifier.target_humidity_entity",{name:h}))),C&&y("".concat(t.hass.localize("ui.card.humidifier.current_humidity_entity",{name:h}))),D?y("".concat(t.hass.localize("ui.card.humidifier.humidifying",{name:h})),!0,i.getPropertyValue("--state-humidifier-on-color")):Y?y("".concat(t.hass.localize("ui.card.humidifier.drying",{name:h})),!0,i.getPropertyValue("--state-humidifier-on-color")):y("".concat(t.hass.localize("ui.card.humidifier.on_entity",{name:h})),!0),a.states.forEach((function(t){var e;if(t.attributes){var i,a=g(t.attributes.humidity),n=C?g(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):a,r=[a];if(C&&r.push(n),D)r.push("humidifying"===(null===(i=t.attributes)||void 0===i?void 0:i.action)?n:null);else if(Y){var o;r.push("drying"===(null===(o=t.attributes)||void 0===o?void 0:o.action)?n:null)}else r.push("on"===t.state?n:null);v(new Date(t.last_changed),r)}}))}else{var z,I;y(h);var S=null,M=function(t){var e=g(t.state),i=new Date(t.last_changed);if(null!==e&&S){var a,n=i.getTime(),r=S.getTime(),o=null===(a=I)||void 0===a?void 0:a.getTime();v(S,[(r-o)/(n-o)*(e-z)+z]),v(new Date(r+1),[null]),v(i,[e]),I=i,z=e,S=null}else null!==e&&null===S?(v(i,[e]),I=i,z=e):null===e&&null===S&&void 0!==z&&(S=i)};if(a.statistics)for(var Z=a.states&&0!==a.states.length?a.states[0].last_changed:0,B=0;B<a.statistics.length&&!(Z&&a.statistics[B].last_changed>=Z);B++)M(a.statistics[B]);a.states.forEach((function(t){M(t)})),null!==S&&v(S,[null])}v(s,f),Array.prototype.push.apply(n,m)})),this._chartData={datasets:n},this._entityIds=r,this._datasetToDataIndex=o}}}]}}),c.oi);customElements.define("state-history-chart-line",_),e()}catch(b){e(b)}}))},15815:function(t,e,i){i.a(t,(async function(t,e){try{var a,n,r=i(63038),o=i(27862),s=i(52565),d=i(92776),l=i(5776),c=i(21475),h=(i(38419),i(92745),i(63619),i(23509),i(42713),i(39527),i(41360),i(49207),i(28451)),u=i(57243),f=i(50778),m=i(64214),v=i(20451),y=i(36522),k=i(50602),p=i(20172),g=i(25179),_=i(65354),b=i(18520),x=t([m,k,h]);[m,k,h]=x.then?(await x)():x;(0,c.Z)([(0,f.Mo)("state-history-chart-timeline")],(function(t,e){var i=function(e){function i(){var e;(0,s.Z)(this,i);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=(0,d.Z)(this,i,[].concat(n)),t(e),e}return(0,l.Z)(i,e),(0,o.Z)(i)}(e);return{F:i,d:[{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"data",value:function(){return[]}},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"identifier",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"showNames",value:function(){return!0}},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"clickForMoreInfo",value:function(){return!0}},{kind:"field",decorators:[(0,f.Cb)({type:Boolean})],key:"chunked",value:function(){return!1}},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Number})],key:"paddingYAxis",value:function(){return 0}},{kind:"field",decorators:[(0,f.Cb)({type:Number})],key:"chartIndex",value:void 0},{kind:"field",decorators:[(0,f.SB)()],key:"_chartData",value:void 0},{kind:"field",decorators:[(0,f.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,f.SB)()],key:"_yWidth",value:function(){return 0}},{kind:"field",key:"_chartTime",value:function(){return new Date}},{kind:"field",decorators:[(0,f.IO)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"resize",value:function(){var t=this;return function(e){var i;null===(i=t._chart)||void 0===i||i.resize(e)}}},{kind:"method",key:"render",value:function(){return(0,u.dy)(a||(a=(0,r.Z)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" .paddingYAxis="','" chart-type="timeline"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,30*this.data.length+30,this.paddingYAxis-this._yWidth)}},{kind:"method",key:"willUpdate",value:function(t){this.hasUpdated||this._createOptions(),(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-g.Q))&&this._generateData(),(t.has("startTime")||t.has("endTime")||t.has("showNames"))&&this._createOptions()}},{kind:"method",key:"_createOptions",value:function(){var t=this,e=this.narrow;this._chartOptions={maintainAspectRatio:!1,parsing:!1,animation:!1,scales:{x:{type:"timeline",position:"bottom",adapters:{date:{locale:this.hass.locale,config:this.hass.config}},min:this.startTime,suggestedMax:this.endTime,ticks:{autoSkip:!0,maxRotation:0,sampleSize:5,autoSkipPadding:20,major:{enabled:!0},font:function(t){return t.tick&&t.tick.major?{weight:"bold"}:{}}},grid:{offset:!1},time:{tooltipFormat:"datetimeseconds"}},y:{type:"category",barThickness:20,offset:!0,grid:{display:!1,drawBorder:!1,drawTicks:!1},ticks:{display:this.chunked||this.showNames},afterSetDimensions:function(t){t.maxWidth=.18*t.chart.width},afterFit:function(i){t.chunked&&(i.width=e?105:185)},afterUpdate:function(e){var i,a,n=t.showNames?null!==(i=e.width)&&void 0!==i?i:0:(0,p.HE)(t.hass)?0:null!==(a=e.left)&&void 0!==a?a:0;t._yWidth!==Math.floor(n)&&e.ticks.length===t.data.length&&(t._yWidth=Math.floor(n),(0,y.B)(t,"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex}))},position:(0,p.HE)(this.hass)?"right":"left"}},plugins:{tooltip:{mode:"nearest",callbacks:{title:function(t){return t[0].chart.data.labels[t[0].datasetIndex]},beforeBody:function(t){return t[0].dataset.label||""},label:function(e){var i=e.dataset.data[e.dataIndex],a=i.end.getTime()-i.start.getTime(),n="".concat(t.hass.localize("ui.components.history_charts.duration"),": ").concat((0,v.Z)(a));return[i.label||"",(0,m.E8)(i.start,t.hass.locale,t.hass.config),(0,m.E8)(i.end,t.hass.locale,t.hass.config),n]},labelColor:function(t){return{borderColor:t.dataset.data[t.dataIndex].color,backgroundColor:t.dataset.data[t.dataIndex].color}}}},filler:{propagate:!0}},locale:(0,k.Hd)(this.hass.locale),onClick:function(e){var i;if(t.clickForMoreInfo&&!(0,b.n)(e)){var a=e.chart,n=(0,h.z)(e,a),r=Math.abs(a.scales.y.getValueForPixel(n.y));(0,y.B)(t,"hass-more-info",{entityId:null===(i=t._chartData)||void 0===i||null===(i=i.datasets[r])||void 0===i?void 0:i.label}),a.canvas.dispatchEvent(new Event("mouseout"))}}}}},{kind:"method",key:"_generateData",value:function(){var t=this,e=getComputedStyle(this),i=this.data;i||(i=[]),this._chartTime=new Date;var a=this.startTime,n=this.endTime,r=[],o=[],s=this.names||{};i.forEach((function(i){var d,l=null,c=null,h=a,u=s[i.entity_id]||i.name,f=[];i.data.forEach((function(a){var r=a.state;r||(r=null),new Date(a.last_changed)>n||(null===l?(l=r,c=a.state_localize,h=new Date(a.last_changed)):r!==l&&(d=new Date(a.last_changed),f.push({start:h,end:d,label:c,color:(0,_.U)(l,e,t.hass.states[i.entity_id])}),l=r,c=a.state_localize,h=d))})),null!==l&&f.push({start:h,end:n,label:c,color:(0,_.U)(l,e,t.hass.states[i.entity_id])}),o.push({data:f,label:i.entity_id}),r.push(u)})),this._chartData={labels:r,datasets:o}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,u.iv)(n||(n=(0,r.Z)(["ha-chart-base{--chart-max-height:none}"])))}}]}}),u.oi);e()}catch(w){e(w)}}))},71489:function(t,e,i){i.a(t,(async function(t,e){try{var a,n,r,o,s,d,l,c,h=i(10265),u=i(63038),f=i(27862),m=i(52565),v=i(92776),y=i(5776),k=i(21475),p=(i(38419),i(19083),i(71695),i(64228),i(92745),i(52805),i(23509),i(42713),i(37362),i(61006),i(39527),i(41360),i(13334),i(34595),i(36993),i(49207),i(47021),i(57243)),g=i(50778),_=i(72344),b=i(31146),x=i(47641),w=i(67650),T=i(15815),C=t([w,T]);[w,T]=C.then?(await C)():C;(0,k.Z)([(0,g.Mo)("state-history-charts")],(function(t,e){var i=function(e){function i(){var e;(0,m.Z)(this,i);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=(0,v.Z)(this,i,[].concat(n)),t(e),e}return(0,y.Z)(i,e),(0,f.Z)(i)}(e);return{F:i,d:[{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"historyData",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean,reflect:!0})],key:"virtualize",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean,attribute:"up-to-now"})],key:"upToNow",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({type:Number})],key:"hoursToShow",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"showNames",value:function(){return!0}},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"clickForMoreInfo",value:function(){return!0}},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"isLoadingData",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"logarithmicScale",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"fitYData",value:function(){return!1}},{kind:"field",key:"_computedStartTime",value:void 0},{kind:"field",key:"_computedEndTime",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_maxYWidth",value:function(){return 0}},{kind:"field",decorators:[(0,g.SB)()],key:"_childYWidths",value:function(){return[]}},{kind:"field",decorators:[(0,g.SB)()],key:"_chartCount",value:function(){return 0}},{kind:"field",decorators:[(0,b.i)(".container")],key:"_savedScrollPos",value:void 0},{kind:"field",decorators:[(0,g.Kt)("state-history-chart-line")],key:"_charts",value:void 0},{kind:"field",key:"resize",value:function(){var t=this;return function(e){var i;null===(i=t._charts)||void 0===i||i.forEach((function(t){return t.resize(e)}))}}},{kind:"method",key:"render",value:function(){var t=this;if(!(0,_.p)(this.hass,"history"))return(0,p.dy)(a||(a=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,p.dy)(n||(n=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,p.dy)(r||(r=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.no_history_found"));var e,i,d=this.historyData.timeline.length?(this.virtualize?(e=this.historyData.timeline,i=10,e.reduce((function(t,e,a){var n=Math.floor(a/i);return t[n]||(t[n]=[]),t[n].push(e),t}),[])):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=d.length,this.virtualize?(0,p.dy)(o||(o=(0,u.Z)(['<div class="container ha-scrollbar" @scroll="','"> <lit-virtualizer scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer> </div>'])),this._saveScrollPos,d,this._renderHistoryItem):(0,p.dy)(s||(s=(0,u.Z)(["",""])),d.map((function(e,i){return t._renderHistoryItem(e,i)})))}},{kind:"field",key:"_renderHistoryItem",value:function(){var t=this;return function(e,i){return e&&void 0!==i?Array.isArray(e)?(0,p.dy)(l||(l=(0,u.Z)(['<div class="entry-container"> <state-history-chart-timeline .hass="','" .data="','" .startTime="','" .endTime="','" .showNames="','" .names="','" .narrow="','" .chunked="','" .paddingYAxis="','" .chartIndex="','" .clickForMoreInfo="','" @y-width-changed="','"></state-history-chart-timeline> </div> '])),t.hass,e,t._computedStartTime,t._computedEndTime,t.showNames,t.names,t.narrow,t.virtualize,t._maxYWidth,i,t.clickForMoreInfo,t._yWidthChanged):(0,p.dy)(d||(d=(0,u.Z)(['<div class="entry-container"> <state-history-chart-line .hass="','" .unit="','" .data="','" .identifier="','" .showNames="','" .startTime="','" .endTime="','" .paddingYAxis="','" .names="','" .chartIndex="','" .clickForMoreInfo="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" @y-width-changed="','"></state-history-chart-line> </div> '])),t.hass,e.unit,e.data,e.identifier,t.showNames,t._computedStartTime,t._computedEndTime,t._maxYWidth,t.names,i,t.clickForMoreInfo,t.logarithmicScale,t.minYAxis,t.maxYAxis,t.fitYData,t._yWidthChanged):p.Ld}}},{kind:"method",key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{kind:"method",key:"willUpdate",value:function(t){if(this.hasUpdated||(0,x.o)(),(0,h.Z)(t.keys()).some((function(t){return!["_maxYWidth","_childYWidths","_chartCount"].includes(t)}))){var e=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>e?e:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var i,a,n,r,o=(null!==(i=null===(a=this.historyData)||void 0===a?void 0:a.timeline)&&void 0!==i?i:[]).reduce((function(t,e){return Math.min(t,new Date(e.data[0].last_changed).getTime())}),(new Date).getTime());o=(null!==(n=null===(r=this.historyData)||void 0===r?void 0:r.line)&&void 0!==n?n:[]).reduce((function(t,e){return Math.min(t,e.data.reduce((function(t,e){return Math.min(t,new Date(e.states[0].last_changed).getTime())}),t))}),o),this._computedStartTime=new Date(o)}}}},{kind:"method",key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max.apply(Math,(0,h.Z)(Object.values(this._childYWidths)).concat([0])))}},{kind:"method",key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max.apply(Math,(0,h.Z)(Object.values(this._childYWidths)).concat([0]))}},{kind:"method",key:"_isHistoryEmpty",value:function(){var t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{kind:"method",decorators:[(0,g.hO)({passive:!0})],key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(c||(c=(0,u.Z)([":host{display:block;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}"])))}}]}}),p.oi);e()}catch(D){e(D)}}))},47641:function(t,e,i){i.d(e,{o:function(){return r}});var a=i(9833),n=i(94524),r=(i(71695),i(42713),i(40251),i(99341),i(47021),function(){var t=(0,n.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e("37066"),i.e("47745")]).then(i.bind(i,24700));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=6473.a75963cda27e1bc4.js.map