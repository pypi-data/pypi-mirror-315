"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11569"],{17712:function(t,e,n){n.r(e);var a,i,o=n(9833),r=n(94524),s=n(63038),c=n(27862),d=n(52565),l=n(92776),u=n(5776),h=n(21475),f=n(77204),p=(n(52247),n(38419),n(71695),n(42713),n(99341),n(47021),n(72700),n(8038),n(71513),n(75656),n(50100),n(18084),n(57243)),b=n(50778),k=(n(68424),n(29095),n(96194)),v=n(58014),m=n(72473),g=n(34798),w=(0,h.Z)(null,(function(t,e){var n,h=function(e){function n(){var e;(0,d.Z)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=(0,l.Z)(this,n,[].concat(i)),t(e),e}return(0,u.Z)(n,e),(0,c.Z)(n)}(e);return{F:h,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,b.SB)()],key:"_attached",value:function(){return!1}},{kind:"field",decorators:[(0,b.SB)()],key:"_waiting",value:function(){return!1}},{kind:"method",key:"connectedCallback",value:function(){(0,f.Z)(h,"connectedCallback",this,3)([]),this._attached=!0}},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.Z)(h,"disconnectedCallback",this,3)([]),this._attached=!1}},{kind:"method",key:"render",value:function(){return this._attached&&this.stateObj?(0,p.dy)(a||(a=(0,s.Z)([' <ha-camera-stream .hass="','" .stateObj="','" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="','" .progress="','" .disabled="','"> '," </ha-progress-button> </div> "])),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===k.nZ,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):p.Ld}},{kind:"method",key:"_downloadSnapshot",value:(n=(0,r.Z)((0,o.Z)().mark((function t(e){var n,a,i,r,s,c,d,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.currentTarget,this._waiting=!0,t.prev=2,t.next=5,this.hass.callApiRaw("GET","camera_proxy/".concat(this.stateObj.entity_id));case 5:if(a=t.sent){t.next=8;break}throw new Error("No response from API");case 8:return i=a.headers.get("content-type"),r="image/png"===i?"png":"jpg",s=(new Date).toLocaleString(),c="snapshot_".concat((0,g.l)(this.stateObj.entity_id),"_").concat(s,".").concat(r),t.next=14,a.blob();case 14:d=t.sent,l=window.URL.createObjectURL(d),(0,v.N)(l,c),t.next=25;break;case 19:return t.prev=19,t.t0=t.catch(2),this._waiting=!1,n.actionError(),(0,m.C)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")}),t.abrupt("return");case 25:this._waiting=!1,n.actionSuccess();case 27:case"end":return t.stop()}}),t,this,[[2,19]])}))),function(t){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(i||(i=(0,s.Z)([":host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:12px;z-index:1;gap:8px}"])))}}]}}),p.oi);customElements.define("more-info-camera",w)},58014:function(t,e,n){n.d(e,{G:function(){return o},N:function(){return i}});var a=n("18117"),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.target="_blank",n.href=t,n.download=e,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)},o=function(t){var e;return!function(t){return!!t.auth.external&&a.G}(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},18117:function(t,e,n){n.d(e,{G:function(){return a}});n(19134),n(5740);var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=11569.2413c08defae166d.js.map