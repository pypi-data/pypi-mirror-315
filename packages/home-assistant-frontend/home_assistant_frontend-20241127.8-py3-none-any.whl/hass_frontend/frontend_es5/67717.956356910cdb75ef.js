"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["67717"],{50875:function(t,n,e){e.d(n,{Eu:function(){return r},hZ:function(){return o}});var i=e(11259),a=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return a[t%a.length]}function o(t,n){var e=n.getPropertyValue("--graph-color-".concat(t+1))||r(t);return(0,i.Rq)(e)}},18520:function(t,n,e){e.d(n,{n:function(){return i}});var i=function(t){return!(t.native instanceof MouseEvent)||t.native instanceof PointerEvent&&"mouse"!==t.native.pointerType}},6736:function(t,n,e){e.d(n,{f:function(){return h}});var i=e(11655),a=e(27862),r=e(52565),o=e(92776),s=e(5776),u=e(21475),c=e(77204),d=(e(38419),e(19083),e(71695),e(42713),e(40251),e(61006),e(39527),e(36993),e(47021),e(50778)),h=function(t){var n=(0,u.Z)(null,(function(t,n){var e=function(n){function e(){var n;(0,r.Z)(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=(0,o.Z)(this,e,[].concat(a)),t(n),n}return(0,s.Z)(e,n),(0,a.Z)(e)}(n);return{F:e,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,c.Z)(e,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,c.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,c.Z)(e,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var n,a=(0,i.Z)(t.keys());try{for(a.s();!(n=a.n()).done;){var r=n.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this.__checkSubscribed()}}catch(o){a.e(o)}finally{a.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,n=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===n[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return n}},18709:function(t,n,e){e.a(t,(async function(t,i){try{e.r(n),e.d(n,{HuiEnergyDevicesGraphCard:function(){return F}});var a,r,o,s=e(9833),u=e(94524),c=e(63038),d=e(27862),h=e(52565),l=e(92776),f=e(5776),v=e(21475),b=(e(38419),e(18801),e(64228),e(92745),e(61893),e(63619),e(42713),e(39527),e(67670),e(41360),e(13334),e(49207),e(28451)),k=e(57243),p=e(50778),_=e(35359),g=e(27486),y=e(50875),m=e(36522),Z=e(50602),C=(e(25179),e(54977),e(1118)),S=e(17705),x=e(6736),D=e(93331),M=e(18520),N=t([C,Z,b]);[C,Z,b]=N.then?(await N)():N;var F=(0,v.Z)([(0,p.Mo)("hui-energy-devices-graph-card")],(function(t,n){var e,i=function(n){function e(){var n;(0,h.Z)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=(0,l.Z)(this,e,[].concat(a)),t(n),n}return(0,f.Z)(e,n),(0,d.Z)(e)}(n);return{F:i,d:[{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_chartData",value:function(){return{datasets:[]}}},{kind:"field",decorators:[(0,p.SB)()],key:"_data",value:void 0},{kind:"field",decorators:[(0,p.IO)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"hassSubscribe",value:function(){var t,n=this;return[(0,C.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((function(t){n._data=t,n._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,D.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){var t;return this.hass&&this._config?(0,k.dy)(a||(a=(0,c.Z)([" <ha-card> ",' <div class="content ','"> <ha-chart-base .hass="','" .data="','" .options="','" .height="','" chart-type="bar"></ha-chart-base> </div> </ha-card> '])),this._config.title?(0,k.dy)(r||(r=(0,c.Z)(['<h1 class="card-header">',"</h1>"])),this._config.title):"",(0,_.$)({"has-header":!!this._config.title}),this.hass,this._chartData,this._createOptions(this.hass.locale),28*((null===(t=this._chartData)||void 0===t||null===(t=t.datasets[0])||void 0===t?void 0:t.data.length)||0)+50):k.Ld}},{kind:"field",key:"_createOptions",value:function(){var t=this;return(0,g.Z)((function(n){return{parsing:!1,animation:!1,responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{y:{type:"category",ticks:{autoSkip:!1,callback:function(n){var e=t._chartData.datasets[0].data[n].y;return t.getDeviceName(e)}}},x:{title:{display:!0,text:"kWh"}}},elements:{bar:{borderWidth:1,borderRadius:4}},plugins:{tooltip:{mode:"nearest",callbacks:{title:function(n){var e=n[0].label;return t.getDeviceName(e)},label:function(t){return"".concat(t.dataset.label,": ").concat((0,Z.uf)(t.parsed.x,n)," kWh")}}}},locale:(0,Z.Hd)(t.hass.locale),onClick:function(n){var e;if(!(0,M.n)(n)){var i=n.chart,a=(0,b.z)(n,i),r=Math.abs(i.scales.y.getValueForPixel(a.y)),o=null===(e=t._chartData)||void 0===e||null===(e=e.datasets[0])||void 0===e||null===(e=e.data[r])||void 0===e?void 0:e.y;o&&!(0,S.Hs)(o)&&((0,m.B)(t,"hass-more-info",{entityId:o}),i.canvas.dispatchEvent(new Event("mouseout")))}}}}))}},{kind:"method",key:"getDeviceName",value:function(t){var n,e;return(null===(n=this._data)||void 0===n||null===(n=n.prefs.device_consumption.find((function(n){return n.stat_consumption===t})))||void 0===n?void 0:n.name)||(0,S.Kd)(this.hass,t,null===(e=this._data)||void 0===e?void 0:e.statsMetadata[t])}},{kind:"method",key:"_getStatistics",value:(e=(0,u.Z)((0,s.Z)().mark((function t(n){var e,i,a,r,o,u,c,d,h,l,f,v;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.stats,r=n.statsCompare,o=[],u=[],c=[],d=[],h=[],l=[],f=[{label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.energy_usage"),borderColor:c,backgroundColor:h,data:o,barThickness:r?10:20}],r&&f.push({label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.previous_energy_usage"),borderColor:d,backgroundColor:l,data:u,barThickness:10}),n.prefs.device_consumption.forEach((function(t,n){var e=t.stat_consumption in a&&(0,S.Kj)(a[t.stat_consumption])||0;if(o.push({y:t.stat_consumption,x:e,idx:n}),r){var i=t.stat_consumption in r&&(0,S.Kj)(r[t.stat_consumption])||0;u.push({y:t.stat_consumption,x:i,idx:n})}})),o.sort((function(t,n){return n.x-t.x})),o.length=(null===(e=this._config)||void 0===e?void 0:e.max_devices)||o.length,v=getComputedStyle(this),o.forEach((function(t){var n=(0,y.hZ)(t.idx,v);c.push(n),h.push(n+"7F")})),u.forEach((function(t){var n=(0,y.hZ)(t.idx,v);d.push(n+"7F"),l.push(n+"32")})),this._chartData={labels:o.map((function(t){return t.y})),datasets:f},t.next=19,this.updateComplete;case 19:null===(i=this._chart)||void 0===i||i.updateChart("none");case 20:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.iv)(o||(o=(0,c.Z)([".card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}ha-chart-base{--chart-max-height:none}"])))}}]}}),(0,x.f)(k.oi));i()}catch(E){i(E)}}))},32424:function(t,n,e){e.d(n,{E:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){var r=(0,a.Q)(t,null==e?void 0:e.in);return isNaN(n)?(0,i.L)((null==e?void 0:e.in)||t,NaN):n?(r.setDate(r.getDate()+n),r):r}},38836:function(t,n,e){e.d(n,{T:function(){return r}});var i=e(23711),a=e(76808);function r(t,n,e){return(0,i.n)(t,n*a.vh,e)}},23711:function(t,n,e){e.d(n,{n:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){return(0,i.L)((null==e?void 0:e.in)||t,+(0,a.Q)(t)+n)}},23459:function(t,n,e){e.d(n,{z:function(){return r}});var i=e(53907),a=e(18112);function r(t,n,e){var r=(0,a.Q)(t,null==e?void 0:e.in);if(isNaN(n))return(0,i.L)((null==e?void 0:e.in)||t,NaN);if(!n)return r;var o=r.getDate(),s=(0,i.L)((null==e?void 0:e.in)||t,r.getTime());return s.setMonth(r.getMonth()+n+1,0),o>=s.getDate()?s:(r.setFullYear(s.getFullYear(),s.getMonth(),o),r)}},2425:function(t,n,e){e.d(n,{U:function(){return a}});var i=e(18112);function a(t,n){var e=+(0,i.Q)(t)-+(0,i.Q)(n);return e<0?-1:e>0?1:e}},6542:function(t,n,e){e.d(n,{d:function(){return u}});var i=e("22936"),a=e("18492"),r=e("2425");function o(t,n,e){var r=(0,a.d)(null==e?void 0:e.in,t,n),o=(0,i.Z)(r,2),s=o[0],u=o[1];return 12*(s.getFullYear()-u.getFullYear())+(s.getMonth()-u.getMonth())}var s=e("3938");function u(t,n,e){var u=(0,a.d)(null==e?void 0:e.in,t,t,n),c=(0,i.Z)(u,3),d=c[0],h=c[1],l=c[2],f=(0,r.U)(h,l),v=Math.abs(o(h,l));if(v<1)return 0;1===h.getMonth()&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-f*v);var b=(0,r.U)(h,l)===-f;(0,s.h)(d)&&1===v&&1===(0,r.U)(d,l)&&(b=!1);var k=f*(v-+b);return 0===k?0:k}},96500:function(t,n,e){e.d(n,{i:function(){return a}});var i=e(18112);function a(t,n){var e=(0,i.Q)(t,null==n?void 0:n.in);return e.setHours(23,59,59,999),e}},2621:function(t,n,e){e.d(n,{V:function(){return a}});var i=e(18112);function a(t,n){var e=(0,i.Q)(t,null==n?void 0:n.in),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}},86319:function(t,n,e){e.d(n,{b:function(){return a}});var i=e(18112);function a(t,n){return 1===(0,i.Q)(t,null==n?void 0:n.in).getDate()}},3938:function(t,n,e){e.d(n,{h:function(){return o}});var i=e(96500),a=e(2621),r=e(18112);function o(t,n){var e=(0,r.Q)(t,null==n?void 0:n.in);return+(0,i.i)(e,n)==+(0,a.V)(e,n)}}}]);
//# sourceMappingURL=67717.956356910cdb75ef.js.map