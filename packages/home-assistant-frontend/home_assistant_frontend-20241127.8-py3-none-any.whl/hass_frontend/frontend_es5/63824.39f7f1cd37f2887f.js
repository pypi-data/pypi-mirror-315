"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["63824"],{31146:function(e,t,n){n.d(t,{i:function(){return a}});var i=(0,n(93826).P)((function(e){history.replaceState({scrollPosition:e},"")}),300),a=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){i(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var a=this[t.key];a&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=a}),0)}))}}}}}},20130:function(e,t,n){var i,a,r,o=n(63038),s=n(27862),l=n(52565),c=n(92776),u=n(5776),d=n(21475),h=n(77204),f=(n(38419),n(39785)),v=n(52876),y=n(50778),g=n(57243),p=n(5111);(0,d.Z)([(0,y.Mo)("ha-fab")],(function(e,t){var n=function(t){function n(){var t;(0,l.Z)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.Z)(this,n,[].concat(a)),e(t),t}return(0,u.Z)(n,t),(0,s.Z)(n)}(t);return{F:n,d:[{kind:"method",key:"firstUpdated",value:function(e){(0,h.Z)(n,"firstUpdated",this,3)([e]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}},{kind:"field",static:!0,key:"styles",value:function(){return[v.W,(0,g.iv)(i||(i=(0,o.Z)([":host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}"]))),"rtl"===p.E.document.dir?(0,g.iv)(a||(a=(0,o.Z)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,g.iv)(r||(r=(0,o.Z)([""])))]}}]}}),f._)},279:function(e,t,n){n.d(t,{Qc:function(){return c},Xr:function(){return l},zJ:function(){return s}});n(19083),n(71695),n(52961),n(42713),n(61427),n(92519),n(42179),n(89256),n(24931),n(88463),n(57449),n(19814),n(99341),n(39527),n(41360),n(49207),n(47021);var i=["zone","persistent_notification"],a=function(e,t){var n,i,a,r,o,s,l,c;if("call-service"===t.action&&(null!==(n=t.target)&&void 0!==n&&n.entity_id||null!==(i=t.service_data)&&void 0!==i&&i.entity_id||null!==(a=t.data)&&void 0!==a&&a.entity_id)){var u=null!==(r=null!==(o=null===(s=t.service_data)||void 0===s?void 0:s.entity_id)&&void 0!==o?o:null===(l=t.data)||void 0===l?void 0:l.entity_id)&&void 0!==r?r:null===(c=t.target)||void 0===c?void 0:c.entity_id;Array.isArray(u)||(u=[u]);for(var d=0,h=u;d<h.length;d++){var f=h[d];e.add(f)}}},r=function(e,t){t&&("string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&a(e,t.tap_action),t.hold_action&&a(e,t.hold_action)):e.add(t))},o=function(e,t){t.entity&&r(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return r(e,t)})),t.card&&o(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return o(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return o(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return r(e,t)})),t.sections&&Array.isArray(t.sections)&&t.sections.forEach((function(t){return o(e,t)}))},s=function(e){var t=new Set;return e.views.forEach((function(e){o(t,e)})),t},l=function(e,t){for(var n=new Set,a=0,r=Object.keys(e.states);a<r.length;a++){var o=r[a];t.has(o)||i.includes(o.split(".",1)[0])||n.add(o)}return n},c=function(e,t){var n=s(t);return l(e,n)}},71971:function(e,t,n){n.a(e,(async function(e,t){try{var i,a,r,o,s,l,c=n(63038),u=n(27862),d=n(52565),h=n(92776),f=n(5776),v=n(21475),y=(n(38419),n(63619),n(57243)),g=n(50778),p=n(27486),b=n(36522),m=(n(93288),n(5460)),k=n(95975),_=e([m,k]);[m,k]=_.then?(await _)():_;(0,v.Z)([(0,g.Mo)("hui-entity-picker-table")],(function(e,t){var n=function(t){function n(){var t;(0,d.Z)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,h.Z)(this,n,[].concat(a)),e(t),t}return(0,f.Z)(n,t),(0,u.Z)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({type:Boolean,attribute:"no-label-float"})],key:"noLabelFloat",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)({type:Array})],key:"entities",value:void 0},{kind:"method",key:"render",value:function(){return(0,y.dy)(i||(i=(0,c.Z)([' <ha-data-table .hass="','" selectable .id="','" .columns="','" .data="','" .searchLabel="','" .noLabelFloat="','" .noDataText="','" @selection-changed="','"></ha-data-table> '])),this.hass,"entity_id",this._columns(this.narrow),this.entities,this.hass.localize("ui.panel.lovelace.unused_entities.search"),this.noLabelFloat,this.hass.localize("ui.panel.lovelace.unused_entities.no_data"),this._handleSelectionChanged)}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,p.Z)((function(t){var n={icon:{title:"",label:e.hass.localize("ui.panel.lovelace.unused_entities.state_icon"),type:"icon",template:function(t){return(0,y.dy)(a||(a=(0,c.Z)([' <state-badge @click="','" .hass="','" .stateObj="','"></state-badge> '])),e._handleEntityClicked,e.hass,t.stateObj)}},name:{title:e.hass.localize("ui.panel.lovelace.unused_entities.entity"),sortable:!0,filterable:!0,flex:2,main:!0,direction:"asc",template:function(n){return(0,y.dy)(r||(r=(0,c.Z)([' <div @click="','" style="cursor:pointer"> '," "," </div> "])),e._handleEntityClicked,n.name,t?(0,y.dy)(o||(o=(0,c.Z)([' <div class="secondary">',"</div> "])),n.entity_id):"")}}};return n.entity_id={title:e.hass.localize("ui.panel.lovelace.unused_entities.entity_id"),sortable:!0,filterable:!0,hidden:t},n.domain={title:e.hass.localize("ui.panel.lovelace.unused_entities.domain"),sortable:!0,filterable:!0,hidden:t},n.last_changed={title:e.hass.localize("ui.panel.lovelace.unused_entities.last_changed"),type:"numeric",sortable:!0,hidden:t,template:function(t){return(0,y.dy)(s||(s=(0,c.Z)([' <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '])),e.hass,t.last_changed)}},n}))}},{kind:"method",key:"_handleSelectionChanged",value:function(e){var t=e.detail.value;(0,b.B)(this,"selected-changed",{selectedEntities:t})}},{kind:"method",key:"_handleEntityClicked",value:function(e){var t=e.target.closest(".mdc-data-table__row").rowId;(0,b.B)(this,"hass-more-info",{entityId:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,y.iv)(l||(l=(0,c.Z)(["ha-data-table{--data-table-border-width:0;height:100%}"])))}}]}}),y.oi);t()}catch(E){t(E)}}))},53380:function(e,t,n){n.d(t,{f:function(){return r}});n(71695),n(42713),n(40251),n(99341),n(47021);var i=n(36522),a=function(){return Promise.all([n.e("35671"),n.e("42950"),n.e("29570"),n.e("40099"),n.e("68182"),n.e("8795"),n.e("71588"),n.e("92139"),n.e("29818"),n.e("32146"),n.e("81190"),n.e("42532"),n.e("63055"),n.e("70147"),n.e("44251"),n.e("39379"),n.e("63556"),n.e("38326"),n.e("85365"),n.e("84860"),n.e("80891"),n.e("80312"),n.e("83646")]).then(n.bind(n,22958))},r=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:t})}},74941:function(e,t,n){n.d(t,{i:function(){return a}});n(71695),n(42713),n(40251),n(99341),n(47021);var i=n(36522),a=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return Promise.all([n.e("97983"),n.e("41258"),n.e("35671"),n.e("7010"),n.e("5851")]).then(n.bind(n,67271))},dialogParams:t})}},39507:function(e,t,n){n.a(e,(async function(e,i){try{n.r(t),n.d(t,{HuiUnusedEntities:function(){return A}});var a,r,o,s,l=n(10265),c=n(63038),u=n(27862),d=n(52565),h=n(92776),f=n(5776),v=n(21475),y=n(77204),g=(n(38419),n(64228),n(61893),n(13334),n(57243)),p=n(50778),b=n(35359),m=n(73850),k=n(47194),_=(n(20130),n(37583),n(279)),E=n(71971),w=n(53380),Z=n(74941),C=n(20526),S=e([E]);E=(S.then?(await S)():S)[0];var A=(0,v.Z)([(0,p.Mo)("hui-unused-entities")],(function(e,t){var n=function(t){function n(){var t;(0,d.Z)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,h.Z)(this,n,[].concat(a)),e(t),t}return(0,f.Z)(n,t),(0,u.Z)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.Cb)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,p.SB)()],key:"_unusedEntities",value:function(){return[]}},{kind:"field",decorators:[(0,p.SB)()],key:"_selectedEntities",value:function(){return[]}},{kind:"get",key:"_config",value:function(){return this.lovelace.config}},{kind:"method",key:"updated",value:function(e){(0,y.Z)(n,"updated",this,3)([e]),e.has("lovelace")&&this._getUnusedEntities()}},{kind:"method",key:"render",value:function(){var e=this;return this.hass&&this.lovelace?"storage"===this.lovelace.mode&&!1===this.lovelace.editMode?g.Ld:(0,g.dy)(a||(a=(0,c.Z)([' <div class="container"> ',' <hui-entity-picker-table .hass="','" .narrow="','" .entities="','" @selected-changed="','"></hui-entity-picker-table> </div> <div class="fab ','"> <ha-fab .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </div> '])),this.narrow?"":(0,g.dy)(r||(r=(0,c.Z)([' <ha-card header="','"> <div class="card-content"> '," "," </div> </ha-card> "])),this.hass.localize("ui.panel.lovelace.unused_entities.title"),this.hass.localize("ui.panel.lovelace.unused_entities.available_entities"),"storage"===this.lovelace.mode?(0,g.dy)(o||(o=(0,c.Z)([" <br>"," "])),this.hass.localize("ui.panel.lovelace.unused_entities.select_to_add")):""),this.hass,this.narrow,this._unusedEntities.map((function(t){var n=e.hass.states[t];return{icon:"",entity_id:t,stateObj:n,name:n?(0,k.C)(n):"Unavailable",domain:(0,m.M)(t),last_changed:null==n?void 0:n.last_changed}})),this._handleSelectedChanged,(0,b.$)({selected:this._selectedEntities.length}),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addToLovelaceView,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):g.Ld}},{kind:"method",key:"_getUnusedEntities",value:function(){if(this.hass&&this.lovelace){this._selectedEntities=[];var e=(0,_.Qc)(this.hass,this._config);this._unusedEntities=(0,l.Z)(e).sort()}}},{kind:"method",key:"_handleSelectedChanged",value:function(e){this._selectedEntities=e.detail.selectedEntities}},{kind:"method",key:"_addToLovelaceView",value:function(){var e=this,t=(0,C.VG)(this.hass.states,this._selectedEntities,{}),n=(0,C.lY)(this._selectedEntities,{});1!==this.lovelace.config.views.length?(0,Z.i)(this,{lovelaceConfig:this.lovelace.config,allowDashboardChange:!1,viewSelectedCallback:function(i,a,r){(0,w.f)(e,{lovelaceConfig:e.lovelace.config,saveConfig:e.lovelace.saveConfig,path:[r],entities:e._selectedEntities,cardConfig:t,sectionConfig:n})}}):(0,w.f)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[0],entities:this._selectedEntities,cardConfig:t,sectionConfig:n})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,g.iv)(s||(s=(0,c.Z)([":host{overflow:hidden}.container{display:flex;flex-direction:column;height:100%}ha-card{--ha-card-box-shadow:none;--ha-card-border-radius:0}hui-entity-picker-table{flex-grow:1}.fab{position:sticky;float:var(--float-end);right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;z-index:1}ha-fab{position:relative;bottom:calc(-80px - env(safe-area-inset-bottom));transition:bottom .3s}.fab.selected ha-fab{bottom:0}"])))}}]}}),g.oi);i()}catch(z){i(z)}}))},67985:function(e,t,n){n(40810)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},75351:function(e,t,n){n.d(t,{Ud:function(){return b}});var i=n(22936),a=n(38289),r=n(90391),o=n(10265),s=n(11655),l=n(86180),c=(n(73155),n(20223),n(63721),n(52247),n(38419),n(49871),n(71695),n(83069),n(64228),n(52805),n(451),n(63619),n(43451),n(11907),n(67985),n(19423),n(42713),n(40251),n(69235),n(12385),n(19134),n(64512),n(5740),n(11740),n(99341),n(46692),n(39527),n(13334),n(34595),n(47021),Symbol("Comlink.proxy")),u=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),h=Symbol("Comlink.finalizer"),f=Symbol("Comlink.thrown"),v=function(e){return"object"===(0,l.Z)(e)&&null!==e||"function"==typeof e},y=new Map([["proxy",{canHandle:function(e){return v(e)&&e[c]},serialize:function(e){var t=new MessageChannel,n=t.port1,i=t.port2;return g(e,n),[i,[i]]},deserialize:function(e){return e.start(),b(e)}}],["throw",{canHandle:function(e){return v(e)&&f in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function l(u){if(u&&u.data)if(function(e,t){var n,i=(0,s.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t===a||"*"===a)return!0;if(a instanceof RegExp&&a.test(t))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}(n,u.origin)){var d,v=Object.assign({path:[]},u.data),y=v.id,b=v.type,m=v.path,k=(u.data.argumentList||[]).map(A);try{var _=m.slice(0,-1).reduce((function(e,t){return e[t]}),e),E=m.reduce((function(e,t){return e[t]}),e);switch(b){case"GET":d=E;break;case"SET":_[m.slice(-1)[0]]=A(u.data.value),d=!0;break;case"APPLY":d=E.apply(_,k);break;case"CONSTRUCT":var w;d=function(e){return Object.assign(e,(0,a.Z)({},c,!0))}((0,r.Z)(E,(0,o.Z)(k)));break;case"ENDPOINT":var Z=new MessageChannel,z=Z.port1,x=Z.port2;g(e,x),d=function(e,t){return C.set(e,t),e}(z,[z]);break;case"RELEASE":d=void 0;break;default:return}}catch(w){d=(0,a.Z)({value:w},f,0)}Promise.resolve(d).catch((function(e){return(0,a.Z)({value:e},f,0)})).then((function(n){var a=S(n),r=(0,i.Z)(a,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:y}),s),"RELEASE"===b&&(t.removeEventListener("message",l),p(t),h in e&&"function"==typeof e[h]&&e[h]())})).catch((function(e){var n=S((0,a.Z)({value:new TypeError("Unserializable return value")},f,0)),r=(0,i.Z)(n,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:y}),s)}))}else console.warn("Invalid origin '".concat(u.origin,"' for comlink proxy"))})),t.start&&t.start()}function p(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function b(e,t){var n=new Map;return e.addEventListener("message",(function(e){var t=e.data;if(t&&t.id){var i=n.get(t.id);if(i)try{i(t)}finally{n.delete(t.id)}}})),w(e,n,[],t)}function m(e){if(e)throw new Error("Proxy has been released and is not useable")}function k(e){return z(e,new Map,{type:"RELEASE"}).then((function(){p(e)}))}var _=new WeakMap,E="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(_.get(e)||0)-1;_.set(e,t),0===t&&k(e)}));function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=!1,r=new Proxy(arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},{get:function(i,s){if(m(a),s===d)return function(){!function(e){E&&E.unregister(e)}(r),k(e),t.clear(),a=!0};if("then"===s){if(0===n.length)return{then:function(){return r}};var l=z(e,t,{type:"GET",path:n.map((function(e){return e.toString()}))}).then(A);return l.then.bind(l)}return w(e,t,[].concat((0,o.Z)(n),[s]))},set:function(r,s,l){m(a);var c=S(l),u=(0,i.Z)(c,2),d=u[0],h=u[1];return z(e,t,{type:"SET",path:[].concat((0,o.Z)(n),[s]).map((function(e){return e.toString()})),value:d},h).then(A)},apply:function(r,o,s){m(a);var l=n[n.length-1];if(l===u)return z(e,t,{type:"ENDPOINT"}).then(A);if("bind"===l)return w(e,t,n.slice(0,-1));var c=Z(s),d=(0,i.Z)(c,2),h=d[0],f=d[1];return z(e,t,{type:"APPLY",path:n.map((function(e){return e.toString()})),argumentList:h},f).then(A)},construct:function(r,o){m(a);var s=Z(o),l=(0,i.Z)(s,2),c=l[0],u=l[1];return z(e,t,{type:"CONSTRUCT",path:n.map((function(e){return e.toString()})),argumentList:c},u).then(A)}});return function(e,t){var n=(_.get(t)||0)+1;_.set(t,n),E&&E.register(e,t,e)}(r,e),r}function Z(e){var t,n=e.map(S);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var C=new WeakMap;function S(e){var t,n=(0,s.Z)(y);try{for(n.s();!(t=n.n()).done;){var a=(0,i.Z)(t.value,2),r=a[0],o=a[1];if(o.canHandle(e)){var l=o.serialize(e),c=(0,i.Z)(l,2);return[{type:"HANDLER",name:r,value:c[0]},c[1]]}}}catch(u){n.e(u)}finally{n.f()}return[{type:"RAW",value:e},C.get(e)||[]]}function A(e){switch(e.type){case"HANDLER":return y.get(e.name).deserialize(e.value);case"RAW":return e.value}}function z(e,t,n,i){return new Promise((function(a){var r=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.set(r,a),e.start&&e.start(),e.postMessage(Object.assign({id:r},n),i)}))}}}]);
//# sourceMappingURL=63824.39f7f1cd37f2887f.js.map