"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["57606"],{50875:function(t,e,a){a.d(e,{Eu:function(){return n},hZ:function(){return r}});var i=a(11259),s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function n(t){return s[t%s.length]}function r(t,e){var a=e.getPropertyValue("--graph-color-".concat(t+1))||n(t);return(0,i.Rq)(a)}},84892:function(t,e,a){a.a(t,(async function(t,i){try{a.d(e,{O:function(){return E}});var s,n,r,d,o,c=a(22936),h=a(10265),u=a(9833),l=a(94524),f=a(63038),p=a(27862),y=a(52565),m=a(92776),v=a(5776),k=a(21475),b=(a(38419),a(19083),a(71695),a(64228),a(92745),a(61893),a(23509),a(39304),a(52961),a(42713),a(61427),a(92519),a(42179),a(89256),a(24931),a(88463),a(57449),a(19814),a(61006),a(99341),a(39527),a(41360),a(13334),a(49207),a(47021),a(57243)),_=a(50778),g=a(27486),x=a(50875),D=a(72344),S=a(36522),T=a(50602),w=a(17705),Z=(a(25179),a(18520)),C=t([T]);T=(C.then?(await C)():C)[0];var E={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"};(0,k.Z)([(0,_.Mo)("statistics-chart")],(function(t,e){var a,i=function(e){function a(){var e;(0,y.Z)(this,a);for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e=(0,m.Z)(this,a,[].concat(s)),t(e),e}return(0,v.Z)(a,e),(0,p.Z)(a)}(e);return{F:i,d:[{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"statisticsData",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"metadata",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,_.Cb)({type:Array})],key:"statTypes",value:function(){return["sum","min","mean","max"]}},{kind:"field",decorators:[(0,_.Cb)()],key:"chartType",value:function(){return"line"}},{kind:"field",decorators:[(0,_.Cb)({type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,_.Cb)({type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"fitYData",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"hideLegend",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"logarithmicScale",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"isLoadingData",value:function(){return!1}},{kind:"field",decorators:[(0,_.Cb)({type:Boolean})],key:"clickForMoreInfo",value:function(){return!0}},{kind:"field",decorators:[(0,_.Cb)()],key:"period",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_chartData",value:function(){return{datasets:[]}}},{kind:"field",decorators:[(0,_.SB)()],key:"_chartDatasetExtra",value:function(){return[]}},{kind:"field",decorators:[(0,_.SB)()],key:"_statisticIds",value:function(){return[]}},{kind:"field",decorators:[(0,_.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_hiddenStats",value:function(){return new Set}},{kind:"field",decorators:[(0,_.IO)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"_computedStyle",value:void 0},{kind:"field",key:"resize",value:function(){var t=this;return function(e){var a;null===(a=t._chart)||void 0===a||a.resize(e)}}},{kind:"method",key:"shouldUpdate",value:function(t){return t.size>1||!t.has("hass")}},{kind:"method",key:"willUpdate",value:function(t){t.has("legendMode")&&this._hiddenStats.clear(),(!this.hasUpdated||t.has("unit")||t.has("period")||t.has("chartType")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("logarithmicScale")||t.has("hideLegend"))&&this._createOptions(),(t.has("statisticsData")||t.has("statTypes")||t.has("chartType")||t.has("hideLegend")||t.has("_hiddenStats"))&&this._generateData()}},{kind:"method",key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{kind:"method",key:"render",value:function(){return(0,D.p)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?(0,b.dy)(n||(n=(0,f.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.loading_statistics")):this.statisticsData&&Object.keys(this.statisticsData).length?(0,b.dy)(d||(d=(0,f.Z)([' <ha-chart-base externalHidden .hass="','" .data="','" .extraData="','" .options="','" .chartType="','" @dataset-hidden="','" @dataset-unhidden="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartDatasetExtra,this._chartOptions,this.chartType,this._datasetHidden,this._datasetUnhidden):(0,b.dy)(r||(r=(0,f.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.no_statistics_found")):(0,b.dy)(s||(s=(0,f.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"))}},{kind:"method",key:"_datasetHidden",value:function(t){t.stopPropagation(),this._hiddenStats.add(this._statisticIds[t.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_datasetUnhidden",value:function(t){t.stopPropagation(),this._hiddenStats.delete(this._statisticIds[t.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_createOptions",value:function(t){var e=this;this._chartOptions={parsing:!1,animation:!1,interaction:{mode:"nearest",axis:"x"},scales:{x:{type:"time",adapters:{date:{locale:this.hass.locale,config:this.hass.config}},ticks:{source:"bar"===this.chartType?"data":void 0,maxRotation:0,sampleSize:5,autoSkipPadding:20,major:{enabled:!0},font:function(t){return t.tick&&t.tick.major?{weight:"bold"}:{}}},time:{tooltipFormat:"datetime",unit:"bar"===this.chartType&&this.period&&["hour","day","week","month"].includes(this.period)?this.period:void 0}},y:{beginAtZero:"bar"===this.chartType,ticks:{maxTicksLimit:7},title:{display:t||this.unit,text:t||this.unit},type:this.logarithmicScale?"logarithmic":"linear",min:this.fitYData?null:this.minYAxis,max:this.fitYData?null:this.maxYAxis}},plugins:{tooltip:{callbacks:{label:function(t){return"".concat(t.dataset.label,": ").concat((0,T.uf)(t.parsed.y,e.hass.locale,(0,T.l4)(void 0,e.hass.entities[e._statisticIds[t.datasetIndex]]))," ").concat(t.dataset.unit||"")}}},filler:{propagate:!0},legend:{display:!this.hideLegend,labels:{usePointStyle:!0}}},elements:{line:{tension:.4,cubicInterpolationMode:"monotone",borderWidth:1.5},bar:{borderWidth:1.5,borderRadius:4},point:{hitRadius:50}},locale:(0,T.Hd)(this.hass.locale),onClick:function(t){if(e.clickForMoreInfo&&!(0,Z.n)(t)){var a=t.chart,i=a.getElementsAtEventForMode(t,"nearest",{intersect:!0},!0);if(i.length){var s=i[0],n=e._statisticIds[s.datasetIndex];(0,w.Hs)(n)||((0,S.B)(e,"hass-more-info",{entityId:n}),a.canvas.dispatchEvent(new Event("mouseout")))}}}}}},{kind:"field",key:"_getStatisticsMetaData",value:function(){var t=this;return(0,g.Z)(function(){var e=(0,l.Z)((0,u.Z)().mark((function e(a){var i,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Py)(t.hass,a);case 2:return i=e.sent,s={},i.forEach((function(t){s[t.statistic_id]=t})),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{kind:"method",key:"_generateData",value:(a=(0,l.Z)((0,u.Z)().mark((function t(){var e,a,i,s,n,r,d,o,l=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.statisticsData){t.next=2;break}return t.abrupt("return");case 2:if(t.t0=this.metadata,t.t0){t.next=7;break}return t.next=6,this._getStatisticsMetaData(Object.keys(this.statisticsData));case 6:t.t0=t.sent;case 7:if(e=t.t0,a=0,i=Object.entries(this.statisticsData),s=[],n=[],r=[],0!==i.length){t.next=15;break}return t.abrupt("return");case 15:(this.endTime||new Date(Math.max.apply(Math,(0,h.Z)(i.map((function(t){var e=(0,c.Z)(t,2),a=(e[0],e[1]);return new Date(a[a.length-1].start).getTime()}))))))>new Date&&new Date,o=this.names||{},i.forEach((function(t){var i=(0,c.Z)(t,2),u=i[0],f=i[1],p=null==e?void 0:e[u],y=o[u];void 0===y&&(y=(0,w.Kd)(l.hass,u,p)),l.unit||(void 0===d?d=(0,w.dO)(l.hass,u,p):null!==d&&d!==(0,w.dO)(l.hass,u,p)&&(d=null));var m,v=null,k=[],b=[],_=(0,x.hZ)(a,l._computedStyle||getComputedStyle(l));a++;var g=[],D=l.statTypes.includes("mean")&&(0,w.Nw)(f,"mean"),S=D||l.statTypes.includes("min")&&(0,w.Nw)(f,"min")&&l.statTypes.includes("max")&&(0,w.Nw)(f,"max"),T=S?(0,h.Z)(l.statTypes).sort((function(t,e){return"min"===t||"max"===e?-1:"max"===t||"min"===e?1:0})):l.statTypes,Z=!1;T.forEach((function(t){if((0,w.Nw)(f,t)){var e=S&&("min"===t||"max"===t);if(!l.hideLegend){var a=D?"mean"===t:!1===Z;b.push({legend_label:y,show_legend:a}),Z=Z||a}g.push(t),k.push({label:y?"".concat(y," (").concat(l.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),")\n            "):l.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),fill:!!S&&("min"===t&&D?"+1":"max"===t&&"-1"),borderColor:e&&D?_+(l.hideLegend?"00":"7F"):_,backgroundColor:e?_+"3F":_+"7F",pointRadius:0,hidden:!l.hideLegend&&l._hiddenStats.has(u),data:[],unit:null==p?void 0:p.unit_of_measurement,band:e}),r.push(u)}}));var C=null,E=null;f.forEach((function(t){var e=new Date(t.start);if(C!==e){C=e;var a=[];g.forEach((function(e){var i,s;"sum"===e?null==E?(s=0,E=t.sum):s=(t.sum||0)-E:s=t[e],a.push(null!==(i=s)&&void 0!==i?i:null)})),function(t,e,a){a&&(t>e||(k.forEach((function(e,i){"line"===l.chartType&&m&&v&&m.getTime()!==t.getTime()&&(e.data.push({x:m.getTime(),y:v[i]}),e.data.push({x:m.getTime(),y:null})),e.data.push({x:t.getTime(),y:a[i]})})),v=a,m=e))}(e,new Date(t.end),a)}})),Array.prototype.push.apply(s,k),Array.prototype.push.apply(n,b)})),d&&this._createOptions(d),this._chartData={datasets:s},this._chartDatasetExtra=n,this._statisticIds=r;case 23:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,b.iv)(o||(o=(0,f.Z)([":host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}"])))}}]}}),b.oi);i()}catch(I){i(I)}}))}}]);
//# sourceMappingURL=57606.bc0c8e7c3c400206.js.map