"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["53403"],{79419:function(e,t,i){i.d(t,{_:function(){return r}});i(19134),i(97003);var r=function(e){return e.normalize("NFD").replace(/[\u0300-\u036F]/g,"")}},279:function(e,t,i){i.d(t,{Qc:function(){return c},Xr:function(){return o},zJ:function(){return d}});i(19083),i(71695),i(52961),i(42713),i(61427),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(99341),i(39527),i(41360),i(49207),i(47021);var r=["zone","persistent_notification"],n=function(e,t){var i,r,n,a,s,d,o,c;if("call-service"===t.action&&(null!==(i=t.target)&&void 0!==i&&i.entity_id||null!==(r=t.service_data)&&void 0!==r&&r.entity_id||null!==(n=t.data)&&void 0!==n&&n.entity_id)){var l=null!==(a=null!==(s=null===(d=t.service_data)||void 0===d?void 0:d.entity_id)&&void 0!==s?s:null===(o=t.data)||void 0===o?void 0:o.entity_id)&&void 0!==a?a:null===(c=t.target)||void 0===c?void 0:c.entity_id;Array.isArray(l)||(l=[l]);for(var u=0,h=l;u<h.length;u++){var p=h[u];e.add(p)}}},a=function(e,t){t&&("string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&n(e,t.tap_action),t.hold_action&&n(e,t.hold_action)):e.add(t))},s=function(e,t){t.entity&&a(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return a(e,t)})),t.card&&s(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return s(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return s(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return a(e,t)})),t.sections&&Array.isArray(t.sections)&&t.sections.forEach((function(t){return s(e,t)}))},d=function(e){var t=new Set;return e.views.forEach((function(e){s(t,e)})),t},o=function(e,t){for(var i=new Set,n=0,a=Object.keys(e.states);n<a.length;n++){var s=a[n];t.has(s)||r.includes(s.split(".",1)[0])||i.add(s)}return i},c=function(e,t){var i=d(t);return o(e,i)}},3054:function(e,t,i){i.a(e,(async function(e,t){try{var r,n,a,s,d,o,c,l,u,h,p,v=i(9833),f=i(94524),y=i(10265),m=i(63038),g=i(27862),_=i(52565),k=i(92776),w=i(5776),b=i(21475),E=(i(20223),i(63721),i(38419),i(91599),i(19083),i(64228),i(61893),i(63619),i(19423),i(42713),i(19134),i(61006),i(47706),i(39527),i(99790),i(13334),i(41298)),x=i(57243),C=i(50778),Z=i(35359),z=i(69634),S=i(94571),A=i(27486),R=i(68958),L=i(36522),j=i(1416),B=i(79419),O=(i(97206),i(36841),i(96194)),U=i(17951),F=i(50566),P=i(279),D=i(62037),$=i(32817),H=i(33873),I=e([D,$]);[D,$]=I.then?(await I)():I;(0,b.Z)([(0,C.Mo)("hui-card-picker")],(function(e,t){var i,b=function(t){function i(){var t;(0,_.Z)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=(0,k.Z)(this,i,[].concat(n)),e(t),t}return(0,w.Z)(i,t),(0,g.Z)(i)}(t);return{F:b,d:[{kind:"field",decorators:[(0,C.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,C.Cb)({attribute:!1})],key:"suggestedCards",value:void 0},{kind:"field",decorators:[(0,R.t)({key:"dashboardCardClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",decorators:[(0,C.SB)()],key:"_cards",value:function(){return[]}},{kind:"field",key:"lovelace",value:void 0},{kind:"field",key:"cardPicked",value:void 0},{kind:"field",decorators:[(0,C.SB)()],key:"_filter",value:function(){return""}},{kind:"field",decorators:[(0,C.SB)()],key:"_width",value:void 0},{kind:"field",decorators:[(0,C.SB)()],key:"_height",value:void 0},{kind:"field",key:"_unusedEntities",value:void 0},{kind:"field",key:"_usedEntities",value:void 0},{kind:"field",key:"_filterCards",value:function(){return(0,A.Z)((function(e,t){if(!t)return e;var i=e.map((function(e){return e.card})),r={keys:["type","name","description"],isCaseSensitive:!1,minMatchCharLength:Math.min(t.length,2),threshold:.2,getFn:F.z},n=new E.Z(i,r);return i=n.search((0,B._)(t)).map((function(e){return e.item})),e.filter((function(e){return i.includes(e.card)}))}))}},{kind:"field",key:"_suggestedCards",value:function(){return(0,A.Z)((function(e){return e.filter((function(e){return e.card.isSuggested}))}))}},{kind:"field",key:"_customCards",value:function(){return(0,A.Z)((function(e){return e.filter((function(e){return e.card.isCustom&&!e.card.isSuggested}))}))}},{kind:"field",key:"_otherCards",value:function(){return(0,A.Z)((function(e){return e.filter((function(e){return!e.card.isSuggested&&!e.card.isCustom}))}))}},{kind:"method",key:"render",value:function(){if(!(this.hass&&this.lovelace&&this._unusedEntities&&this._usedEntities))return x.Ld;var e=this._suggestedCards(this._cards),t=this._otherCards(this._cards),i=this._customCards(this._cards);return(0,x.dy)(r||(r=(0,m.Z)([' <search-input .hass="','" .filter="','" @value-changed="','" .label="','"></search-input> <div id="content" style="','"> <div class="cards-container"> ',' </div> <div class="cards-container"> <div class="card manual" @click="','" .config="','"> <div class="card-header"> ',' </div> <div class="preview description"> '," </div> </div> </div> </div> "])),this.hass,this._filter,this._handleSearchChange,this.hass.localize("ui.panel.lovelace.editor.edit_card.search_cards"),(0,z.V)({width:this._width?"".concat(this._width,"px"):"auto",height:this._height?"".concat(this._height,"px"):"auto"}),this._filter?this._filterCards(this._cards,this._filter).map((function(e){return e.element})):(0,x.dy)(n||(n=(0,m.Z)([" "," "," "," "," "," "," "," "])),e.length>0?(0,x.dy)(a||(a=(0,m.Z)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.suggested_cards")):x.Ld,this._renderClipboardCard(),e.map((function(e){return e.element})),e.length>0?(0,x.dy)(s||(s=(0,m.Z)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.other_cards")):x.Ld,t.map((function(e){return e.element})),i.length>0?(0,x.dy)(d||(d=(0,m.Z)([' <div class="cards-container-header"> '," </div> "])),this.hass.localize("ui.panel.lovelace.editor.card.generic.custom_cards")):x.Ld,i.map((function(e){return e.element}))),this._cardPicked,{type:""},this.hass.localize("ui.panel.lovelace.editor.card.generic.manual"),this.hass.localize("ui.panel.lovelace.editor.card.generic.manual_description"))}},{kind:"method",key:"shouldUpdate",value:function(e){var t=e.get("hass");return!t||t.locale!==this.hass.locale}},{kind:"method",key:"firstUpdated",value:function(){var e=this;if(this.hass&&this.lovelace){var t=(0,P.zJ)(this.lovelace),i=(0,P.Xr)(this.hass,t);this._usedEntities=(0,y.Z)(t).filter((function(t){return e.hass.states[t]&&!(0,O.rk)(e.hass.states[t].state)})),this._unusedEntities=(0,y.Z)(i).filter((function(t){return e.hass.states[t]&&!(0,O.rk)(e.hass.states[t].state)})),this._loadCards()}}},{kind:"method",key:"_loadCards",value:function(){var e=this,t=H.C.map((function(t){var i;return Object.assign({name:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".name")),description:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".description")),isSuggested:(null===(i=e.suggestedCards)||void 0===i?void 0:i.includes(t.type))||!1},t)}));t=t.sort((function(t,i){var r;return t.isSuggested&&!i.isSuggested?-1:!t.isSuggested&&i.isSuggested?1:(0,j.$)(t.name||t.type,i.name||i.type,null===(r=e.hass)||void 0===r?void 0:r.language)})),U.kb.length>0&&(t=t.concat(U.kb.map((function(e){return{type:e.type,name:e.name,description:e.description,showElement:e.preview,isCustom:!0}})).sort((function(t,i){var r;return(0,j.$)(t.name||t.type,i.name||i.type,null===(r=e.hass)||void 0===r?void 0:r.language)})))),this._cards=t.map((function(t){return{card:t,element:(0,x.dy)(o||(o=(0,m.Z)(["",""])),(0,S.C)(e._renderCardElement(t),(0,x.dy)(c||(c=(0,m.Z)([' <div class="card spinner"> <ha-circular-progress indeterminate></ha-circular-progress> </div> '])))))}}))}},{kind:"method",key:"_renderClipboardCard",value:function(){return this._clipboard?(0,x.dy)(l||(l=(0,m.Z)([" ",""])),(0,S.C)(this._renderCardElement({type:this._clipboard.type,showElement:!0,isCustom:!1,name:this.hass.localize("ui.panel.lovelace.editor.card.generic.paste"),description:"".concat(this.hass.localize("ui.panel.lovelace.editor.card.generic.paste_description",{type:this._clipboard.type}))},this._clipboard),(0,x.dy)(u||(u=(0,m.Z)([' <div class="card spinner"> <ha-circular-progress indeterminate></ha-circular-progress> </div> ']))))):x.Ld}},{kind:"method",key:"_handleSearchChange",value:function(e){var t=e.detail.value;if(t){if(!this._width||!this._height){var i=this.shadowRoot.getElementById("content");if(i&&!this._width){var r=i.clientWidth;r&&(this._width=r)}if(i&&!this._height){var n=i.clientHeight;n&&(this._height=n)}}}else this._width=void 0,this._height=void 0;this._filter=t}},{kind:"method",key:"_cardPicked",value:function(e){var t=e.currentTarget.config;(0,L.B)(this,"config-changed",{config:t})}},{kind:"method",key:"_tryCreateCardElement",value:function(e){var t=this,i=(0,D.l$)(e);return i.hass=this.hass,i.addEventListener("ll-rebuild",(function(r){r.stopPropagation(),t._rebuildCard(i,e)}),{once:!0}),i}},{kind:"method",key:"_rebuildCard",value:function(e,t){var i;try{i=this._tryCreateCardElement(t)}catch(r){return}e.parentElement&&e.parentElement.replaceChild(i,e)}},{kind:"method",key:"_renderCardElement",value:(i=(0,f.Z)((0,v.Z)().mark((function e(t,i){var r,n,a,s,d,o,c,l;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,n=t.showElement,a=t.isCustom,s=t.name,d=t.description,o=a?(0,U.cs)(r):void 0,a&&(r="".concat(U.Qo).concat(r)),l=null!=i?i:{type:r},!this.hass||!this.lovelace){e.next=11;break}if(i){e.next=10;break}return e.next=9,(0,$.U)(this.hass,r,this._unusedEntities,this._usedEntities);case 9:l=e.sent;case 10:if(n)try{c=this._tryCreateCardElement(l)}catch(u){c=void 0}case 11:return e.abrupt("return",(0,x.dy)(h||(h=(0,m.Z)([' <div class="card"> <div class="overlay" @click="','" .config="','"></div> <div class="card-header"> ',' </div> <div class="preview ','"> '," </div> </div> "])),this._cardPicked,l,o?"".concat(this.hass.localize("ui.panel.lovelace.editor.cardpicker.custom_card"),": ").concat(o.name||o.type):s,(0,Z.$)({description:!c||"HUI-ERROR-CARD"===c.tagName}),c&&"HUI-ERROR-CARD"!==c.tagName?c:o?o.description||this.hass.localize("ui.panel.lovelace.editor.cardpicker.no_description"):d));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[(0,x.iv)(p||(p=(0,m.Z)(["search-input{display:block;--mdc-shape-small:var(--card-picker-search-shape);margin:var(--card-picker-search-margin)}.cards-container-header{font-size:16px;font-weight:500;padding:12px 8px 4px 8px;margin:0;grid-column:1/-1}.cards-container{display:grid;grid-gap:8px 8px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-top:20px}.card{height:100%;max-width:500px;display:flex;flex-direction:column;border-radius:var(--ha-card-border-radius,12px);background:var(--primary-background-color,#fafafa);cursor:pointer;position:relative;overflow:hidden;border:var(--ha-card-border-width,1px) solid var(--ha-card-border-color,var(--divider-color))}.card-header{color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:16px;font-weight:700;letter-spacing:-.012em;line-height:20px;padding:12px 16px;display:block;text-align:center;background:var(--ha-card-background,var(--card-background-color,#fff));border-bottom:1px solid var(--divider-color)}.preview{pointer-events:none;margin:20px;flex-grow:1;display:flex;align-items:center;justify-content:center}.preview>:first-child{zoom:0.6;display:block;width:100%}.description{text-align:center}.spinner{align-items:center;justify-content:center}.overlay{position:absolute;width:100%;height:100%;z-index:1;box-sizing:border-box;border-radius:var(--ha-card-border-radius,12px)}.manual{max-width:none;grid-column:1/-1}.icon{position:absolute;top:8px;right:8px inset-inline-start: 8px;inset-inline-end:8px;border-radius:50%;--mdc-icon-size:16px;line-height:16px;box-sizing:border-box;color:var(--text-primary-color);padding:4px}.icon.custom{background:var(--warning-color)}"])))]}}]}}),x.oi);t()}catch(M){t(M)}}))},32817:function(e,t,i){i.a(e,(async function(e,r){try{i.d(t,{U:function(){return o}});var n=i(9833),a=i(94524),s=(i(19423),i(62037)),d=e([s]);s=(d.then?(await d)():d)[0];var o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i,r,a){var d,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={type:i},e.next=3,(0,s.Do)(i);case 3:if(!(o=e.sent)||!o.getStubConfig){e.next=9;break}return e.next=7,o.getStubConfig(t,r,a);case 7:c=e.sent,d=Object.assign(Object.assign({},d),c);case 9:return e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})));return function(t,i,r,n){return e.apply(this,arguments)}}();r()}catch(c){r(c)}}))},33873:function(e,t,i){i.d(t,{C:function(){return r}});var r=[{type:"alarm-panel",showElement:!0},{type:"button",showElement:!0},{type:"calendar",showElement:!0},{type:"entities",showElement:!0},{type:"entity",showElement:!0},{type:"gauge",showElement:!0},{type:"glance",showElement:!0},{type:"history-graph",showElement:!0},{type:"statistics-graph",showElement:!1},{type:"statistic",showElement:!0},{type:"humidifier",showElement:!0},{type:"light",showElement:!0},{type:"map",showElement:!0},{type:"markdown",showElement:!0},{type:"media-control",showElement:!0},{type:"picture",showElement:!0},{type:"picture-elements",showElement:!0},{type:"picture-entity",showElement:!0},{type:"picture-glance",showElement:!0},{type:"plant-status",showElement:!0},{type:"sensor",showElement:!0},{type:"thermostat",showElement:!0},{type:"weather-forecast",showElement:!0},{type:"area",showElement:!0},{type:"tile",showElement:!0},{type:"conditional"},{type:"entity-filter"},{type:"grid"},{type:"horizontal-stack"},{type:"iframe"},{type:"logbook"},{type:"vertical-stack"},{type:"todo-list"},{type:"heading",showElement:!0}]},50566:function(e,t,i){i.d(t,{z:function(){return a}});i(64228),i(13334);var r=i(41298),n=i(79419),a=function(e,t){var i,a=r.Z.config.getFn(e,t);return Array.isArray(a)?a.map((function(e){return(0,n._)(null!=e?e:"")})):(0,n._)(null!==(i=a)&&void 0!==i?i:"")}}}]);
//# sourceMappingURL=53403.c00911aa90f599d9.js.map