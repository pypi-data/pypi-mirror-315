/*! For license information please see 38983.76c7721951e6c380.js.LICENSE.txt */
export const ids=["38983"];export const modules={92636:function(e,t,n){n.d(t,{z:function(){return i}});const i=e=>(t,n)=>e.includes(t,n)},29567:function(e,t,n){n.d(t,{h:function(){return o}});n(39527),n(41360);var i=n(57243),a=n(45779);const o=(0,a.XM)(class extends a.Xe{constructor(e){if(super(e),this._element=void 0,e.type!==a.pX.CHILD)throw new Error("dynamicElementDirective can only be used in content bindings")}update(e,[t,n]){return this._element&&this._element.localName===t?(n&&Object.entries(n).forEach((([e,t])=>{this._element[e]=t})),i.Jb):this.render(t,n)}render(e,t){return this._element=document.createElement(e),t&&Object.entries(t).forEach((([e,t])=>{this._element[e]=t})),this._element}})},59847:function(e,t,n){n.d(t,{N:function(){return a}});var i=n(73850);const a=e=>(0,i.M)(e.entity_id)},75278:function(e,t,n){n.d(t,{e:function(){return i}});const i=(e,t)=>a(e.attributes,t),a=(e,t)=>!!(e.supported_features&t)},73729:function(e,t,n){n.d(t,{i:function(){return u}});var i=n(44249),a=n(72621),o=n(74966),r=n(51408),s=n(57243),l=n(15093),d=n(76525);n(23334);const c=["button","ha-list-item"],u=(e,t)=>s.dy` <div class="header_title"> <span>${t}</span> <ha-icon-button .label="${e?.localize("ui.dialogs.generic.close")??"Close"}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" dialogAction="close" class="header_button"></ha-icon-button> </div> `;(0,i.Z)([(0,l.Mo)("ha-dialog")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"field",key:d.gA,value:void 0},{kind:"method",key:"scrollToPos",value:function(e,t){this.contentElement?.scrollTo(e,t)}},{kind:"method",key:"renderHeading",value:function(){return s.dy`<slot name="heading"> ${(0,a.Z)(n,"renderHeading",this,3)([])} </slot>`}},{kind:"method",key:"firstUpdated",value:function(){(0,a.Z)(n,"firstUpdated",this,3)([]),this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,c].join(", "),this._updateScrolledAttribute(),this.contentElement?.addEventListener("scroll",this._onScroll,{passive:!0})}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.Z)(n,"disconnectedCallback",this,3)([]),this.contentElement.removeEventListener("scroll",this._onScroll)}},{kind:"field",key:"_onScroll",value(){return()=>{this._updateScrolledAttribute()}}},{kind:"method",key:"_updateScrolledAttribute",value:function(){this.contentElement&&this.toggleAttribute("scrolled",0!==this.contentElement.scrollTop)}},{kind:"field",static:!0,key:"styles",value:()=>[r.W,s.iv`:host([scrolled]) ::slotted(ha-dialog-header){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog{--mdc-dialog-scroll-divider-color:var(
          --dialog-scroll-divider-color,
          var(--divider-color)
        );z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));--mdc-dialog-box-shadow:var(--dialog-box-shadow, none);--mdc-typography-headline6-font-weight:400;--mdc-typography-headline6-font-size:1.574rem}.mdc-dialog__actions{justify-content:var(--justify-action-buttons,flex-end);padding-bottom:max(env(safe-area-inset-bottom),24px)}.mdc-dialog__actions span:first-child{flex:var(--secondary-action-button-flex,unset)}.mdc-dialog__actions span:nth-child(2){flex:var(--primary-action-button-flex,unset)}.mdc-dialog__container{align-items:var(--vertical-align-dialog,center)}.mdc-dialog__title{padding:24px 24px 0 24px}.mdc-dialog__actions{padding:12px 24px 12px 24px}.mdc-dialog__title::before{content:unset}.mdc-dialog .mdc-dialog__content{position:var(--dialog-content-position,relative);padding:var(--dialog-content-padding,24px)}:host([hideactions]) .mdc-dialog .mdc-dialog__content{padding-bottom:max(var(--dialog-content-padding,24px),env(safe-area-inset-bottom))}.mdc-dialog .mdc-dialog__surface{position:var(--dialog-surface-position,relative);top:var(--dialog-surface-top);margin-top:var(--dialog-surface-margin-top);min-height:var(--mdc-dialog-min-height,auto);border-radius:var(--ha-dialog-border-radius,28px);-webkit-backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);background:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}:host([flexContent]) .mdc-dialog .mdc-dialog__content{display:flex;flex-direction:column}.header_title{position:relative;padding-right:40px;padding-inline-end:40px;padding-inline-start:initial;direction:var(--direction)}.header_title span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.header_button{position:absolute;right:-12px;top:-12px;text-decoration:none;color:inherit;inset-inline-start:initial;inset-inline-end:-12px;direction:var(--direction)}.dialog-actions{inset-inline-start:initial!important;inset-inline-end:0px!important;direction:var(--direction)}`]}]}}),o.M)},29073:function(e,t,n){var i=n(44249),a=n(72621),o=(n(39527),n(41360),n(13334),n(57243)),r=n(15093),s=n(29567),l=n(36522);n(99426),n(66671);const d={boolean:()=>Promise.all([n.e("29570"),n.e("79350")]).then(n.bind(n,8353)),constant:()=>n.e("69654").then(n.bind(n,5606)),float:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("56061")]).then(n.bind(n,53203)),grid:()=>n.e("45036").then(n.bind(n,20018)),expandable:()=>n.e("42653").then(n.bind(n,91624)),integer:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("42950"),n.e("29570"),n.e("40099"),n.e("92139"),n.e("92187"),n.e("42849")]).then(n.bind(n,96116)),multi_select:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("29570"),n.e("13824"),n.e("99562")]).then(n.bind(n,84545)),positive_time_period_dict:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("71139"),n.e("31352")]).then(n.bind(n,15063)),select:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("42950"),n.e("29570"),n.e("40099"),n.e("7010"),n.e("62524"),n.e("12020"),n.e("47818"),n.e("69638")]).then(n.bind(n,62706)),string:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("36620")]).then(n.bind(n,8327))},c=(e,t)=>e?!t.name||t.flatten?e:e[t.name]:null;(0,i.Z)([(0,r.Mo)("ha-form")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"schema",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"error",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"warning",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"computeError",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"computeWarning",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"computeLabel",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"computeHelper",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"localizeValue",value:void 0},{kind:"method",key:"getFormProperties",value:function(){return{}}},{kind:"method",key:"focus",value:async function(){await this.updateComplete;const e=this.renderRoot.querySelector(".root");if(e)for(const t of e.children)if("HA-ALERT"!==t.tagName){t instanceof o.fl&&await t.updateComplete,t.focus();break}}},{kind:"method",key:"willUpdate",value:function(e){e.has("schema")&&this.schema&&this.schema.forEach((e=>{"selector"in e||d[e.type]?.()}))}},{kind:"method",key:"render",value:function(){return o.dy` <div class="root" part="root"> ${this.error&&this.error.base?o.dy` <ha-alert alert-type="error"> ${this._computeError(this.error.base,this.schema)} </ha-alert> `:""} ${this.schema.map((e=>{const t=((e,t)=>e&&t.name?e[t.name]:null)(this.error,e),n=((e,t)=>e&&t.name?e[t.name]:null)(this.warning,e);return o.dy` ${t?o.dy` <ha-alert own-margin alert-type="error"> ${this._computeError(t,e)} </ha-alert> `:n?o.dy` <ha-alert own-margin alert-type="warning"> ${this._computeWarning(n,e)} </ha-alert> `:""} ${"selector"in e?o.dy`<ha-selector .schema="${e}" .hass="${this.hass}" .name="${e.name}" .selector="${e.selector}" .value="${c(this.data,e)}" .label="${this._computeLabel(e,this.data)}" .disabled="${e.disabled||this.disabled||!1}" .placeholder="${e.required?"":e.default}" .helper="${this._computeHelper(e)}" .localizeValue="${this.localizeValue}" .required="${e.required||!1}" .context="${this._generateContext(e)}"></ha-selector>`:(0,s.h)(this.fieldElementName(e.type),{schema:e,data:c(this.data,e),label:this._computeLabel(e,this.data),helper:this._computeHelper(e),disabled:this.disabled||e.disabled||!1,hass:this.hass,localize:this.hass?.localize,computeLabel:this.computeLabel,computeHelper:this.computeHelper,localizeValue:this.localizeValue,context:this._generateContext(e),...this.getFormProperties()})} `}))} </div> `}},{kind:"method",key:"fieldElementName",value:function(e){return`ha-form-${e}`}},{kind:"method",key:"_generateContext",value:function(e){if(!e.context)return;const t={};for(const[n,i]of Object.entries(e.context))t[n]=this.data[i];return t}},{kind:"method",key:"createRenderRoot",value:function(){const e=(0,a.Z)(n,"createRenderRoot",this,3)([]);return this.addValueChangedListener(e),e}},{kind:"method",key:"addValueChangedListener",value:function(e){e.addEventListener("value-changed",(e=>{e.stopPropagation();const t=e.target.schema;if(e.target===this)return;const n=!t.name||"flatten"in t&&t.flatten?e.detail.value:{[t.name]:e.detail.value};this.data={...this.data,...n},(0,l.B)(this,"value-changed",{value:this.data})}))}},{kind:"method",key:"_computeLabel",value:function(e,t){return this.computeLabel?this.computeLabel(e,t):e?e.name:""}},{kind:"method",key:"_computeHelper",value:function(e){return this.computeHelper?this.computeHelper(e):""}},{kind:"method",key:"_computeError",value:function(e,t){return Array.isArray(e)?o.dy`<ul> ${e.map((e=>o.dy`<li> ${this.computeError?this.computeError(e,t):e} </li>`))} </ul>`:this.computeError?this.computeError(e,t):e}},{kind:"method",key:"_computeWarning",value:function(e,t){return this.computeWarning?this.computeWarning(e,t):e}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`.root>*{display:block}.root>:not([own-margin]):not(:last-child){margin-bottom:24px}ha-alert[own-margin]{margin-bottom:4px}`}}]}}),o.oi)},53013:function(e,t,n){var i=n("44249"),a=n("72621"),o=(n("39527"),n("99790"),n("13334"),n("34595"),n("57243")),r=n("15093"),s=n("36522"),l=(n("75656"),n("50100"),n("18084"),n("75351"));let d;const c={reType:/(?<input>(\[!(?<type>caution|important|note|tip|warning)\])(?:\s|\\n)?)/i,typeToHaAlert:{caution:"error",important:"info",note:"info",tip:"success",warning:"warning"}};(0,i.Z)([(0,r.Mo)("ha-markdown-element")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"allowSvg",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"breaks",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value:()=>!1},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"update",value:function(e){(0,a.Z)(i,"update",this,3)([e]),void 0!==this.content&&this._render()}},{kind:"method",key:"_render",value:async function(){this.innerHTML=await(async(e,t,i)=>(d||(d=(0,l.Ud)(new Worker(new URL(n.p+n.u("45845"),n.b)))),d.renderMarkdown(e,t,i)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const t=e.currentNode;if(t instanceof HTMLAnchorElement&&t.host!==document.location.host)t.target="_blank",t.rel="noreferrer noopener";else if(t instanceof HTMLImageElement)this.lazyImages&&(t.loading="lazy"),t.addEventListener("load",this._resize);else if(t instanceof HTMLQuoteElement){const n=t.firstElementChild?.firstChild?.textContent&&c.reType.exec(t.firstElementChild.firstChild.textContent);if(n){const{type:i}=n.groups,a=document.createElement("ha-alert");a.alertType=c.typeToHaAlert[i.toLowerCase()],a.append(...Array.from(t.childNodes).map((e=>{const t=Array.from(e.childNodes);if(!this.breaks&&t.length){const e=t[0];e.nodeType===Node.TEXT_NODE&&e.textContent===n.input&&e.textContent?.includes("\n")&&(e.textContent=e.textContent.split("\n").slice(1).join("\n"))}return t})).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.textContent&&e.textContent!==n.input))),e.parentNode().replaceChild(a,t)}}else t instanceof HTMLElement&&["ha-alert","ha-qr-code","ha-icon","ha-svg-icon"].includes(t.localName)&&n(23265)(`./${t.localName}`)}}},{kind:"field",key:"_resize",value(){return()=>(0,s.B)(this,"content-resize")}}]}}),o.fl)},99254:function(e,t,n){var i=n(44249),a=n(57243),o=n(15093);n(53013);(0,i.Z)([(0,o.Mo)("ha-markdown")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"allowSvg",value:()=>!1},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"breaks",value:()=>!1},{kind:"field",decorators:[(0,o.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value:()=>!1},{kind:"method",key:"render",value:function(){return this.content?a.dy`<ha-markdown-element .content="${this.content}" .allowSvg="${this.allowSvg}" .breaks="${this.breaks}" .lazyImages="${this.lazyImages}"></ha-markdown-element>`:a.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return a.iv`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}ha-alert{display:block;margin:4px 0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:85%;padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:1.45;font-family:var(--code-font-family, monospace)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:1.5em;font-weight:700}hr{border-color:var(--divider-color);border-bottom:none;margin:16px 0}`}}]}}),a.oi)},66671:function(e,t,n){var i=n(44249),a=(n(92519),n(42179),n(89256),n(24931),n(88463),n(57449),n(19814),n(57243)),o=n(15093),r=n(27486),s=n(29567),l=n(41063);const d={action:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("72206"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("29570"),n.e("83895"),n.e("8795"),n.e("71588"),n.e("22599"),n.e("25737"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("3049"),n.e("52358"),n.e("2331"),n.e("78823"),n.e("93789"),n.e("9677"),n.e("7193"),n.e("61628"),n.e("40480"),n.e("73856"),n.e("31674"),n.e("53611")]).then(n.bind(n,32669)),addon:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("76760"),n.e("39053")]).then(n.bind(n,89778)),area:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("91523"),n.e("67390"),n.e("9142")]).then(n.bind(n,47250)),area_filter:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("38792")]).then(n.bind(n,39916)),attribute:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("72206"),n.e("27506"),n.e("21571"),n.e("40480"),n.e("61163")]).then(n.bind(n,47622)),assist_pipeline:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("72206"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("66697"),n.e("5027")]).then(n.bind(n,30363)),boolean:()=>Promise.all([n.e("31408"),n.e("29579")]).then(n.bind(n,56070)),color_rgb:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("55470")]).then(n.bind(n,52064)),condition:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("72206"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("83895"),n.e("8795"),n.e("71588"),n.e("22599"),n.e("46417"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("3049"),n.e("52358"),n.e("2331"),n.e("93789"),n.e("9677"),n.e("61628"),n.e("40480"),n.e("38095")]).then(n.bind(n,57071)),config_entry:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("40759"),n.e("54504")]).then(n.bind(n,49071)),conversation_agent:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("49975"),n.e("56500")]).then(n.bind(n,91838)),constant:()=>n.e("8751").then(n.bind(n,83268)),country:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("72206"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("92023"),n.e("95424")]).then(n.bind(n,8331)),date:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("72206"),n.e("33809")]).then(n.bind(n,47807)),datetime:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("78456"),n.e("72206"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("3561"),n.e("10698")]).then(n.bind(n,75677)),device:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("22599"),n.e("67390"),n.e("56614")]).then(n.bind(n,66557)),duration:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("68511"),n.e("30774")]).then(n.bind(n,73875)),entity:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("72206"),n.e("27506"),n.e("31897"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("3049"),n.e("2331"),n.e("62055")]).then(n.bind(n,56208)),statistic:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("72206"),n.e("27506"),n.e("99282"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("2331"),n.e("12633"),n.e("74165")]).then(n.bind(n,30490)),file:()=>n.e("22456").then(n.bind(n,48712)),floor:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("19454"),n.e("67390"),n.e("61843"),n.e("12563")]).then(n.bind(n,57172)),label:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("42950"),n.e("40099"),n.e("11899"),n.e("67390"),n.e("89790"),n.e("46140")]).then(n.bind(n,71670)),image:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("7010"),n.e("76504"),n.e("71513"),n.e("83118")]).then(n.bind(n,30030)),language:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("72206"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("57907"),n.e("26443")]).then(n.bind(n,74783)),navigation:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("75509"),n.e("85567"),n.e("38150")]).then(n.bind(n,5739)),number:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("42950"),n.e("40099"),n.e("92139"),n.e("33530")]).then(n.bind(n,69695)),object:()=>Promise.all([n.e("83895"),n.e("8795"),n.e("10645")]).then(n.bind(n,11530)),qr_code:()=>Promise.all([n.e("83895"),n.e("53750"),n.e("77382")]).then(n.bind(n,23534)),select:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("42950"),n.e("29570"),n.e("40099"),n.e("7010"),n.e("62524"),n.e("47818"),n.e("93907")]).then(n.bind(n,98491)),selector:()=>n.e("94377").then(n.bind(n,61320)),state:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("27506"),n.e("88474"),n.e("71199")]).then(n.bind(n,51794)),backup_location:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("39904"),n.e("99656")]).then(n.bind(n,52922)),stt:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("88355"),n.e("6888")]).then(n.bind(n,51974)),target:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("78456"),n.e("72206"),n.e("27506"),n.e("22599"),n.e("97147"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("3049"),n.e("2331"),n.e("65677"),n.e("99078"),n.e("96136")]).then(n.bind(n,17628)),template:()=>n.e("74347").then(n.bind(n,12234)),text:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("76542")]).then(n.bind(n,91126)),time:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("10961"),n.e("3561"),n.e("37557")]).then(n.bind(n,92472)),icon:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("72206"),n.e("27506"),n.e("14012"),n.e("18865"),n.e("2331"),n.e("47317")]).then(n.bind(n,28203)),media:()=>Promise.all([n.e("73856"),n.e("95267")]).then(n.bind(n,63721)),theme:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("91799"),n.e("59810")]).then(n.bind(n,93408)),trigger:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("72206"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("29570"),n.e("83895"),n.e("8795"),n.e("71588"),n.e("22599"),n.e("2532"),n.e("67390"),n.e("44959"),n.e("18865"),n.e("3049"),n.e("52358"),n.e("2331"),n.e("93789"),n.e("9677"),n.e("7193"),n.e("40480"),n.e("84681")]).then(n.bind(n,45127)),tts:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("88406"),n.e("73355")]).then(n.bind(n,65697)),tts_voice:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("56129"),n.e("80515")]).then(n.bind(n,12596)),location:()=>Promise.all([n.e("72206"),n.e("49554"),n.e("7117"),n.e("48815")]).then(n.bind(n,70579)),color_temp:()=>Promise.all([n.e("72206"),n.e("42950"),n.e("40099"),n.e("92139"),n.e("32146"),n.e("36217"),n.e("63556"),n.e("91056")]).then(n.bind(n,48563)),ui_action:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("91552"),n.e("24199"),n.e("78456"),n.e("72206"),n.e("27506"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("29570"),n.e("83895"),n.e("8795"),n.e("19005"),n.e("18865"),n.e("2331"),n.e("78823"),n.e("85567"),n.e("87471"),n.e("32240")]).then(n.bind(n,86772)),ui_color:()=>Promise.all([n.e("66031"),n.e("91552"),n.e("78456"),n.e("56898"),n.e("41258"),n.e("35671"),n.e("62396"),n.e("8058")]).then(n.bind(n,15439)),ui_state_content:()=>Promise.all([n.e("46379"),n.e("66031"),n.e("24199"),n.e("72206"),n.e("27506"),n.e("42950"),n.e("40099"),n.e("13748"),n.e("2331"),n.e("93072")]).then(n.bind(n,92884))},c=new Set(["ui-action","ui-color"]);(0,i.Z)([(0,o.Mo)("ha-selector")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"name",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"localizeValue",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"required",value:()=>!0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"context",value:void 0},{kind:"method",key:"focus",value:async function(){await this.updateComplete,this.renderRoot.querySelector("#selector")?.focus()}},{kind:"get",key:"_type",value:function(){const e=Object.keys(this.selector)[0];return c.has(e)?e.replace("-","_"):e}},{kind:"method",key:"willUpdate",value:function(e){e.has("selector")&&this.selector&&d[this._type]?.()}},{kind:"field",key:"_handleLegacySelector",value(){return(0,r.Z)((e=>{if("entity"in e)return(0,l.CM)(e);if("device"in e)return(0,l.c9)(e);const t=Object.keys(this.selector)[0];return c.has(t)?{[t.replace("-","_")]:e[t]}:e}))}},{kind:"method",key:"render",value:function(){return a.dy` ${(0,s.h)(`ha-selector-${this._type}`,{hass:this.hass,name:this.name,selector:this._handleLegacySelector(this.selector),value:this.value,label:this.label,placeholder:this.placeholder,disabled:this.disabled,required:this.required,helper:this.helper,context:this.context,localizeValue:this.localizeValue,id:"selector"})} `}}]}}),a.oi)},41063:function(e,t,n){n.d(t,{CM:function(){return v},QQ:function(){return m},aV:function(){return u},bq:function(){return y},c9:function(){return g},dh:function(){return k},lE:function(){return f},lV:function(){return b},o1:function(){return l},qJ:function(){return p},qR:function(){return d},vI:function(){return h},xO:function(){return c}});n(92745),n(92519),n(42179),n(89256),n(24931),n(88463),n(57449),n(19814),n(39527),n(99790),n(34810),n(41360),n(36993);var i=n(95262),a=n(59847),o=n(75278),r=n(96530),s=n(46329);const l=(e,t,n,i,a,o,r)=>{const s=[],l=[],d=[];return Object.values(n).forEach((n=>{n.labels.includes(t)&&h(e,a,i,n.area_id,o,r)&&d.push(n.area_id)})),Object.values(i).forEach((n=>{n.labels.includes(t)&&p(e,Object.values(a),n,o,r)&&l.push(n.id)})),Object.values(a).forEach((n=>{n.labels.includes(t)&&m(e.states[n.entity_id],o,r)&&s.push(n.entity_id)})),{areas:d,devices:l,entities:s}},d=(e,t,n,i,a)=>{const o=[];return Object.values(n).forEach((n=>{n.floor_id===t&&h(e,e.entities,e.devices,n.area_id,i,a)&&o.push(n.area_id)})),{areas:o}},c=(e,t,n,i,a,o)=>{const r=[],s=[];return Object.values(n).forEach((n=>{n.area_id===t&&p(e,Object.values(i),n,a,o)&&s.push(n.id)})),Object.values(i).forEach((n=>{n.area_id===t&&m(e.states[n.entity_id],a,o)&&r.push(n.entity_id)})),{devices:s,entities:r}},u=(e,t,n,i,a)=>{const o=[];return Object.values(n).forEach((n=>{n.device_id===t&&m(e.states[n.entity_id],i,a)&&o.push(n.entity_id)})),{entities:o}},h=(e,t,n,i,a,o)=>!!Object.values(n).some((n=>!(n.area_id!==i||!p(e,Object.values(t),n,a,o))))||Object.values(t).some((t=>!(t.area_id!==i||!m(e.states[t.entity_id],a,o)))),p=(e,t,n,a,o)=>{const r=o?(0,s.HP)(o,t):void 0;if(a.target?.device&&!(0,i.r)(a.target.device).some((e=>f(e,n,r))))return!1;if(a.target?.entity){return t.filter((e=>e.device_id===n.id)).some((t=>{const n=e.states[t.entity_id];return m(n,a,o)}))}return!0},m=(e,t,n)=>!t.target?.entity||(0,i.r)(t.target.entity).some((t=>b(t,e,n))),f=(e,t,n)=>{const{manufacturer:i,model:a,integration:o}=e;return(!i||t.manufacturer===i)&&((!a||t.model===a)&&!(o&&n&&!n?.[t.id]?.has(o)))},b=(e,t,n)=>{const{domain:r,device_class:s,supported_features:l,integration:d}=e;if(r){const e=(0,a.N)(t);if(Array.isArray(r)?!r.includes(e):e!==r)return!1}if(s){const e=t.attributes.device_class;if(e&&Array.isArray(s)?!s.includes(e):e!==s)return!1}return!(l&&!(0,i.r)(l).some((e=>(0,o.e)(t,e))))&&(!d||n?.[t.entity_id]?.domain===d)},v=e=>{if(!e.entity)return{entity:null};if("filter"in e.entity)return e;const{domain:t,integration:n,device_class:i,...a}=e.entity;return t||n||i?{entity:{...a,filter:{domain:t,integration:n,device_class:i}}}:{entity:a}},g=e=>{if(!e.device)return{device:null};if("filter"in e.device)return e;const{integration:t,manufacturer:n,model:i,...a}=e.device;return t||n||i?{device:{...a,filter:{integration:t,manufacturer:n,model:i}}}:{device:a}},y=e=>{let t;if("target"in e)t=(0,i.r)(e.target?.entity);else if("entity"in e){if(e.entity?.include_entities)return;t=(0,i.r)(e.entity?.filter)}if(!t)return;const n=t.flatMap((e=>e.integration||e.device_class||e.supported_features||!e.domain?[]:(0,i.r)(e.domain).filter((e=>(0,r.X)(e)))));return[...new Set(n)]},k=(e,t,n,a,o)=>{if(!t)return[];const r={target:{}},s=new Set((0,i.r)(t.entity_id)),h=new Set((0,i.r)(t.device_id)),p=new Set((0,i.r)(t.area_id)),m=new Set((0,i.r)(t.floor_id));return new Set((0,i.r)(t.label_id)).forEach((t=>{const i=l(e,t,o,a,n,r);i.devices.forEach((e=>h.add(e))),i.entities.forEach((e=>s.add(e))),i.areas.forEach((e=>p.add(e)))})),m.forEach((t=>{d(e,t,o,r).areas.forEach((e=>p.add(e)))})),p.forEach((t=>{const i=c(e,t,a,n,r);i.devices.forEach((e=>h.add(e))),i.entities.forEach((e=>s.add(e)))})),h.forEach((t=>{u(e,t,n,r).entities.forEach((e=>s.add(e)))})),Array.from(s)}},96530:function(e,t,n){n.d(t,{X:function(){return o},y:function(){return a}});var i=n(92636);const a=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],o=(0,i.z)(a)},33518:function(e,t,n){n.r(t);var i=n(44249),a=n(72621),o=(n(31622),n(57243)),r=n(15093),s=(n(97206),n(73729),n(29073),n(99254),n(43546)),l=n(28008);let d=0;(0,i.Z)([(0,r.Mo)("ha-mfa-module-setup-flow")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_dialogClosedCallback",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_instance",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_loading",value:()=>!1},{kind:"field",decorators:[(0,r.SB)()],key:"_opened",value:()=>!1},{kind:"field",decorators:[(0,r.SB)()],key:"_stepData",value:()=>({})},{kind:"field",decorators:[(0,r.SB)()],key:"_step",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_errorMessage",value:void 0},{kind:"method",key:"showDialog",value:function({continueFlowId:e,mfaModuleId:t,dialogClosedCallback:n}){this._instance=d++,this._dialogClosedCallback=n,this._opened=!0;const i=e?this.hass.callWS({type:"auth/setup_mfa",flow_id:e}):this.hass.callWS({type:"auth/setup_mfa",mfa_module_id:t}),a=this._instance;i.then((e=>{a===this._instance&&this._processStep(e)}))}},{kind:"method",key:"closeDialog",value:function(){this._step&&this._flowDone(),this._opened=!1}},{kind:"method",key:"render",value:function(){return this._opened?o.dy` <ha-dialog open .heading="${this._computeStepTitle()}" @closed="${this.closeDialog}"> <div> ${this._errorMessage?o.dy`<div class="error">${this._errorMessage}</div>`:""} ${this._step?o.dy`${"abort"===this._step.type?o.dy` <ha-markdown allowsvg breaks .content="${this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.abort.${this._step.reason}`)}"></ha-markdown>`:"create_entry"===this._step.type?o.dy`<p> ${this.hass.localize("ui.panel.profile.mfa_setup.step_done",{step:this._step.title||this._step.handler})} </p>`:"form"===this._step.type?o.dy`<ha-markdown allowsvg breaks .content="${this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.description`,this._step.description_placeholders)}"></ha-markdown> <ha-form .hass="${this.hass}" .data="${this._stepData}" .schema="${(0,s.oT)(this._step.data_schema)}" .error="${this._step.errors}" .computeLabel="${this._computeLabel}" .computeError="${this._computeError}" @value-changed="${this._stepDataChanged}"></ha-form>`:""}`:o.dy`<div class="init-spinner"> <ha-circular-progress indeterminate></ha-circular-progress> </div>`} </div> ${["abort","create_entry"].includes(this._step?.type||"")?o.dy`<mwc-button slot="primaryAction" @click="${this.closeDialog}">${this.hass.localize("ui.panel.profile.mfa_setup.close")}</mwc-button>`:""} ${"form"===this._step?.type?o.dy`<mwc-button slot="primaryAction" .disabled="${this._loading}" @click="${this._submitStep}">${this.hass.localize("ui.panel.profile.mfa_setup.submit")}</mwc-button>`:""} </ha-dialog> `:o.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return[l.yu,o.iv`.error{color:red}ha-dialog{max-width:500px}ha-markdown{--markdown-svg-background-color:white;--markdown-svg-color:black;display:block;margin:0 auto}ha-markdown a{color:var(--primary-color)}ha-markdown-element p{text-align:center}ha-markdown-element code{background-color:transparent}ha-markdown-element>:last-child{margin-bottom:revert}.init-spinner{padding:10px 100px 34px;text-align:center}.submit-spinner{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial}`]}},{kind:"method",key:"firstUpdated",value:function(e){(0,a.Z)(n,"firstUpdated",this,3)([e]),this.hass.loadBackendTranslation("mfa_setup","auth"),this.addEventListener("keypress",(e=>{"Enter"===e.key&&this._submitStep()}))}},{kind:"method",key:"_stepDataChanged",value:function(e){this._stepData=e.detail.value}},{kind:"method",key:"_submitStep",value:function(){this._loading=!0,this._errorMessage=void 0;const e=this._instance;this.hass.callWS({type:"auth/setup_mfa",flow_id:this._step.flow_id,user_input:this._stepData}).then((t=>{e===this._instance&&(this._processStep(t),this._loading=!1)}),(e=>{this._errorMessage=e&&e.body&&e.body.message||"Unknown error occurred",this._loading=!1}))}},{kind:"method",key:"_processStep",value:function(e){e.errors||(e.errors={}),this._step=e,0===Object.keys(e.errors).length&&(this._stepData={})}},{kind:"method",key:"_flowDone",value:function(){const e=Boolean(this._step&&["create_entry","abort"].includes(this._step.type));this._dialogClosedCallback({flowFinished:e}),this._errorMessage=void 0,this._step=void 0,this._stepData={},this._dialogClosedCallback=void 0,this.closeDialog()}},{kind:"method",key:"_computeStepTitle",value:function(){return"abort"===this._step?.type?this.hass.localize("ui.panel.profile.mfa_setup.title_aborted"):"create_entry"===this._step?.type?this.hass.localize("ui.panel.profile.mfa_setup.title_success"):"form"===this._step?.type?this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.title`):""}},{kind:"field",key:"_computeLabel",value(){return e=>this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.data.${e.name}`)||e.name}},{kind:"field",key:"_computeError",value(){return e=>this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.error.${e}`)||e}}]}}),o.oi)},23265:function(e,t,n){var i={"./ha-icon":["65981","97406"],"./ha-icon-next.ts":["13928","99172"],"./ha-icon-overflow-menu":["59959","91552","78456","56898","22787"],"./ha-icon-overflow-menu.ts":["59959","91552","78456","56898","22787"],"./ha-icon-prev.ts":["95499","87557"],"./ha-alert.ts":["99426","4809"],"./ha-icon-button-arrow-prev":["54202","41069"],"./ha-icon-button-next":["4635","51577"],"./ha-icon-button-arrow-next":["54237","21559"],"./ha-alert":["99426","4809"],"./ha-icon-button.ts":["23334"],"./ha-icon-next":["13928","99172"],"./ha-svg-icon.ts":["37583"],"./ha-icon-button-arrow-next.ts":["54237","21559"],"./ha-svg-icon":["37583"],"./ha-icon-button-group.ts":["45747","97792"],"./ha-icon-button-prev.ts":["5828","43537"],"./ha-icon-prev":["95499","87557"],"./ha-icon-button-toggle":["79505","80175"],"./ha-qr-code.ts":["50634","83895","53750","40360"],"./ha-icon.ts":["65981","97406"],"./ha-icon-picker":["21393","46379","66031","24199","27506","11090"],"./ha-icon-button-toggle.ts":["79505","80175"],"./ha-icon-button-arrow-prev.ts":["54202","41069"],"./ha-icon-button-next.ts":["4635","51577"],"./ha-icon-button":["23334"],"./ha-icon-button-prev":["5828","43537"],"./ha-qr-code":["50634","83895","53750","40360"],"./ha-icon-button-group":["45747","97792"],"./ha-icon-picker.ts":["21393","46379","66031","24199","27506","11090"]};function a(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=()=>Object.keys(i),a.id="23265",e.exports=a},30338:function(e,t,n){var i=n(97934),a=n(71998),o=n(4576),r=n(36760);e.exports=function(e,t){t&&"string"==typeof e||a(e);var n=r(e);return o(a(void 0!==n?i(n,e):e))}},25677:function(e,t,n){var i=n(40810),a=n(97934),o=n(63983),r=n(71998),s=n(4576),l=n(30338),d=n(79995),c=n(14181),u=n(92288),h=d((function(){for(var e,t,n=this.iterator,i=this.mapper;;){if(t=this.inner)try{if(!(e=r(a(t.next,t.iterator))).done)return e.value;this.inner=null}catch(e){c(n,"throw",e)}if(e=r(a(this.next,n)),this.done=!!e.done)return;try{this.inner=l(i(e.value,this.counter++),!1)}catch(e){c(n,"throw",e)}}}));i({target:"Iterator",proto:!0,real:!0,forced:u},{flatMap:function(e){return r(this),o(e),new h(s(this),{mapper:e,inner:null})}})},34810:function(e,t,n){n(25677)},75351:function(e,t,n){n.d(t,{Ud:function(){return h}});n(39527),n(13334),n(34595);const i=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),r=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),l=e=>"object"==typeof e&&null!==e||"function"==typeof e,d=new Map([["proxy",{canHandle:e=>l(e)&&e[i],serialize(e){const{port1:t,port2:n}=new MessageChannel;return c(e,t),[n,[n]]},deserialize:e=>(e.start(),h(e))}],["throw",{canHandle:e=>l(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function c(e,t=globalThis,n=["*"]){t.addEventListener("message",(function a(o){if(!o||!o.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:l,type:d,path:h}=Object.assign({path:[]},o.data),p=(o.data.argumentList||[]).map(_);let m;try{const t=h.slice(0,-1).reduce(((e,t)=>e[t]),e),n=h.reduce(((e,t)=>e[t]),e);switch(d){case"GET":m=n;break;case"SET":t[h.slice(-1)[0]]=_(o.data.value),m=!0;break;case"APPLY":m=n.apply(t,p);break;case"CONSTRUCT":m=function(e){return Object.assign(e,{[i]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;c(e,n),m=function(e,t){return y.set(e,t),e}(t,[t])}break;case"RELEASE":m=void 0;break;default:return}}catch(e){m={value:e,[s]:0}}Promise.resolve(m).catch((e=>({value:e,[s]:0}))).then((n=>{const[i,o]=k(n);t.postMessage(Object.assign(Object.assign({},i),{id:l}),o),"RELEASE"===d&&(t.removeEventListener("message",a),u(t),r in e&&"function"==typeof e[r]&&e[r]())})).catch((e=>{const[n,i]=k({value:new TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:l}),i)}))})),t.start&&t.start()}function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function h(e,t){const n=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const i=n.get(t.id);if(i)try{i(t)}finally{n.delete(t.id)}})),v(e,n,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function m(e){return w(e,new Map,{type:"RELEASE"}).then((()=>{u(e)}))}const f=new WeakMap,b="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(f.get(e)||0)-1;f.set(e,t),0===t&&m(e)}));function v(e,t,n=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(i,a){if(p(r),a===o)return()=>{!function(e){b&&b.unregister(e)}(s),m(e),t.clear(),r=!0};if("then"===a){if(0===n.length)return{then:()=>s};const i=w(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(_);return i.then.bind(i)}return v(e,t,[...n,a])},set(i,a,o){p(r);const[s,l]=k(o);return w(e,t,{type:"SET",path:[...n,a].map((e=>e.toString())),value:s},l).then(_)},apply(i,o,s){p(r);const l=n[n.length-1];if(l===a)return w(e,t,{type:"ENDPOINT"}).then(_);if("bind"===l)return v(e,t,n.slice(0,-1));const[d,c]=g(s);return w(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:d},c).then(_)},construct(i,a){p(r);const[o,s]=g(a);return w(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:o},s).then(_)}});return function(e,t){const n=(f.get(t)||0)+1;f.set(t,n),b&&b.register(e,t,e)}(s,e),s}function g(e){const t=e.map(k);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const y=new WeakMap;function k(e){for(const[t,n]of d)if(n.canHandle(e)){const[i,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},a]}return[{type:"RAW",value:e},y.get(e)||[]]}function _(e){switch(e.type){case"HANDLER":return d.get(e.name).deserialize(e.value);case"RAW":return e.value}}function w(e,t,n,i){return new Promise((a=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(o,a),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),i)}))}}};
//# sourceMappingURL=38983.76c7721951e6c380.js.map