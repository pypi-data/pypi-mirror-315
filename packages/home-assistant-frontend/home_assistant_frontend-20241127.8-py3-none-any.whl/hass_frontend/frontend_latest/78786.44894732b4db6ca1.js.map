{"version":3,"file":"78786.44894732b4db6ca1.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20241127.8/src/panels/lovelace/cards/energy/hui-energy-usage-graph-card.ts"],"names":["colorPropertyMap","to_grid","to_battery","from_grid","used_grid","used_solar","used_battery","HuiEnergyUsageGraphCard","_decorate","customElement","_initialize","_SubscribeMixin","F","constructor","args","d","kind","decorators","property","attribute","key","value","state","datasets","startOfToday","endOfToday","getEnergyDataCollection","this","hass","_config","collection_key","subscribe","data","_getStatistics","config","changedProps","hasConfigChanged","size","has","html","title","classMap","_chartData","_createOptions","_start","_end","locale","_compareStart","_compareEnd","some","dataset","length","isToday","localize","nothing","memoizeOne","start","end","compareStart","compareEnd","commonOptions","getCommonOptions","plugins","tooltip","itemSort","a","b","raw","y","datasetIndex","callbacks","footer","contexts","totalConsumed","totalReturned","context","dataIndex","Math","abs","num","formatNumber","filter","Boolean","energyData","statIds","source","prefs","energy_sources","type","flowFrom","flow_from","push","stat_energy_from","flowTo","flow_to","stat_energy_to","from_battery","solar","computedStyles","getComputedStyle","colorIndices","Object","keys","forEach","values","id","idx","labels","startCompare","endCompare","_processDataSet","stats","statsMetadata","statsCompare","order","xAxisID","statistics","statisticsMetaData","statIdsByCat","compare","combinedData","summedData","pointEndTime","entries","sum","includes","add","totalStats","sets","set","stat","change","undefined","val","grid_to_battery","battery_to_grid","noOfSources","total_from_grid","allKeys","sources","concat","uniqueKeys","Array","from","Set","sort","Number","statId","points","x","label","getStatisticLabel","borderColor","getEnergyColor","themes","darkMode","backgroundColor","stack","static","css","SubscribeMixin","LitElement"],"mappings":"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"}