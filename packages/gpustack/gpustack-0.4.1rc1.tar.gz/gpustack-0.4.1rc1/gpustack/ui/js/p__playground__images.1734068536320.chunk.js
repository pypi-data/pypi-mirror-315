"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3560],{17485:function(e,n,a){a.d(n,{Z:function(){return o}});var t=a(35453),r=a(50959),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},s=a(52273),i=function(e,n){return r.createElement(s.Z,(0,t.Z)({},e,{ref:n,icon:l}))};var o=r.forwardRef(i)},22471:function(e,n,a){a.d(n,{Ci:function(){return o},FM:function(){return l},GF:function(){return i},I_:function(){return t},JY:function(){return r},QU:function(){return s}});var t=[{type:"Select",name:"voice",options:[],label:{text:"playground.params.voice",isLocalized:!0},rules:[{required:!0,message:"Voice is required"}]},{type:"Select",name:"response_format",options:[{label:"mp3",value:"mp3"},{label:"wav",value:"wav"}],label:{text:"playground.params.format",isLocalized:!0},rules:[{required:!1}]}],r=[{type:"Select",name:"language",options:[{label:"Auto",value:"auto"},{label:"English",value:"en"},{label:"中文",value:"zh"},{label:"日本語",value:"ja"},{label:"Français",value:"fr"},{label:"Deutsch",value:"de"}],label:{text:"playground.params.language",isLocalized:!0},rules:[{required:!0}]}],l=[{type:"InputNumber",name:"n",label:{text:"playground.params.counts",isLocalized:!0},attrs:{min:1,max:4},rules:[{required:!1}]},{type:"Select",name:"size",options:[{label:"playground.params.custom",value:"custom",locale:!0},{label:"512x512",value:"512x512"},{label:"768x1024",value:"768x1024"},{label:"1024x1024",value:"1024x1024"}],description:{text:"playground.params.size.description",html:!0,isLocalized:!0},label:{text:"playground.params.size",isLocalized:!0},rules:[{required:!1}]}],s=[{type:"Select",name:"quality",options:[{label:"playground.params.standard",value:"standard",locale:!0},{label:"playground.params.hd",value:"hd",locale:!0}],label:{text:"playground.params.quality",isLocalized:!0},rules:[{required:!1}]},{type:"Select",name:"style",options:[{label:"playground.params.style.vivid",value:"vivid",locale:!0},{label:"playground.params.style.natural",value:"natural",locale:!0}],attrs:{allowClear:!0},label:{text:"playground.params.style",isLocalized:!0},rules:[{required:!1}]}],i=[{type:"Select",name:"sampler",options:[{label:"euler_a",value:"euler_a"},{label:"euler",value:"euler"},{label:"heun",value:"heun"},{label:"dpm2",value:"dpm2"},{label:"dpm++2s_a",value:"dpm++2s_a"},{label:"dpm++2m",value:"dpm++2m"},{label:"dpm++2mv2",value:"dpm++2mv2"},{label:"ipndm",value:"ipndm"},{label:"ipndm_v",value:"ipndm_v"},{label:"lcm",value:"lcm"}],label:{text:"playground.image.params.sampler",isLocalized:!0},rules:[{required:!1}]},{type:"Select",name:"schedule",options:[{label:"discrete",value:"discrete"},{label:"karras",value:"karras"},{label:"exponential",value:"exponential"},{label:"ays",value:"ays"},{label:"gits",value:"gits"}],label:{text:"playground.image.params.schedule",isLocalized:!0},rules:[{required:!1}]},{type:"InputNumber",name:"sample_steps",label:{text:"playground.image.params.samplerSteps",isLocalized:!0},attrs:{min:1,max:100},rules:[{required:!1}]},{type:"InputNumber",name:"cfg_scale",label:{text:"CFG Scale",isLocalized:!1},attrs:{min:1,max:10,step:.1},rules:[{required:!1}]},{type:"Input",name:"negative_prompt",label:{text:"playground.image.params.negativePrompt",isLocalized:!0},attrs:{trim:!1},rules:[{required:!1}]},{type:"InputNumber",name:"seed",label:{text:"playground.image.params.seed",isLocalized:!0},attrs:{min:0},disabledConfig:{depends:["random_seed"],when:function(e){return null==e?void 0:e.random_seed}},rules:[{required:!1}]},{type:"Checkbox",name:"random_seed",label:{text:"playground.image.params.randomseed",isLocalized:!0},rules:[{required:!1}]}],o=[{type:"Slider",name:"width",label:{text:"playground.params.width",isLocalized:!0},attrs:{min:256,max:3200,step:64,inputnumber:!1},rules:[{required:!0,message:"playground.params.width"}]},{type:"Slider",name:"height",label:{text:"playground.params.height",isLocalized:!0},attrs:{min:256,max:3200,step:64,inputnumber:!1},rules:[{required:!0,message:"playground.params.height"}]}]},36098:function(e,n,a){a.r(n),a.d(n,{default:function(){return me}});var t=a(90228),r=a.n(t),l=a(87999),s=a.n(l),i=a(48305),o=a.n(i),u=a(83057),c=a(35445),d=a(93495),p=a(55592),m=a(55169),f=a(99178),v=a(54235),g=a(85885),h=a(82187),x=a.n(h),b=a(32699),y=a.n(b),j=a(50959),C=a(94299),_=a(35014),w=a(15558),z=a.n(w),S=a(26068),k=a.n(S),Z=a(49662),M=a(67825),I=a.n(M),N=a(88641),q=a(83603),L=a(92233),A=a(42779),P=a(13770),U=a(4423),E=a(68476),R=a(23333),T=a(40474),F=a(96247),O=a(75489),Y="slider-label___rGKKE",G=a(11527),K=["label","value","required","description","isInFormItems","max","min","step","defaultValue","checkStatus","inputnumber","labelWidth","tooltip"],V=function(e){var n=e.label,a=e.value,t=e.required,r=e.description,l=e.isInFormItems,s=void 0===l||l,i=e.max,o=e.min,u=e.step,c=e.defaultValue,d=e.checkStatus,p=e.inputnumber,m=void 0!==p&&p,f=e.labelWidth,v=e.tooltip,g=void 0===v?{open:!1}:v,h=I()(e,K),x="";if(s){var b,y,C=null===E.Z||void 0===E.Z||null===(b=E.Z.Item)||void 0===b||null===(y=b.useStatus)||void 0===y?void 0:y.call(b);x=(null==C?void 0:C.status)||""}var _=function(n){var a,t=n||0;null===(a=e.onChange)||void 0===a||a.call(e,t)},w=j.useMemo((function(){return(0,G.jsxs)("span",{className:Y,style:{width:f||P.d.mini},children:[(0,G.jsx)("span",{className:"text",children:r?(0,G.jsxs)(R.Z,{title:r,children:[(0,G.jsxs)("span",{children:[" ",n]}),(0,G.jsx)("span",{className:"m-l-5",children:(0,G.jsx)(U.Z,{})})]}):(0,G.jsx)("span",{children:n})}),m?(0,G.jsx)(T.Z,{className:"label-val",variant:"outlined",size:"small",value:a,controls:!1,onChange:_}):(0,G.jsx)("span",{className:"val",children:a})]})}),[n,f,r,a,i,o,u,c]);return(0,G.jsx)(O.Z,{required:t,status:d||x,label:w,style:{padding:"20px 2px 0"},variant:"borderless",children:(0,G.jsx)(F.Z,k()(k()({},h),{},{defaultValue:c,max:i,min:o,step:u,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:g,value:a,onChange:function(n){var a;null===(a=e.onChange)||void 0===a||a.call(e,n)}}))})},H={InputNumber:L.Z.Number,Select:A.Z,Slider:V,TextArea:L.Z.TextArea,Input:L.Z.Input,Checkbox:q.Z},B=["type","label","attrs","style","value"],J=function(e){var n=(0,f.useIntl)(),a=e.type,t=e.label,r=e.attrs,l=e.style,s=e.value,i=I()(e,B),o=(0,j.useCallback)((function(a){return"Checkbox"===a?(0,G.jsx)(N.Z,{required:e.required,label:t.isLocalized?n.formatMessage({id:t.text}):t.text}):null}),[n,a]),u=(0,j.useMemo)((function(){return"Checkbox"===a?{checked:s}:{value:s}}),[a,s]);return j.createElement(H[a],k()(k()(k()(k()({},i),r),u),{},{style:k()(k()({},l),{},{width:"100%"}),label:t.isLocalized?n.formatMessage({id:t.text}):t.text}),o(a))},W=j.memo(J),D=a(571),$=a(38852),Q=a(71239),X=a(81117),ee=a(17485),ne=a(67201),ae=(a(72183),a(9298)),te=a(22471),re=(a(51662),a(21435),a(56797)),le=a(76483),se=a(26598),ie=a(49918),oe={seed:null,sampler:"euler_a",cfg_scale:4.5,sample_steps:10,negative_prompt:null,schedule:"discrete"},ue={quality:"standard",style:null},ce=k()({n:1,size:"512x512"},oe),de=(0,j.forwardRef)((function(e,n){var a,t=e.modelList,l=(0,j.useRef)(0),i=(0,j.useState)(!1),c=o()(i,2),d=c[0],p=c[1],m=(0,j.useState)([]),v=o()(m,2),h=v[0],b=v[1],C=(0,f.useIntl)(),w=(0,f.useSearchParams)(),S=o()(w,1)[0].get("model")||"",M=(0,j.useState)({}),I=o()(M,2),N=I[0],q=I[1],L=(0,j.useState)(!1),P=o()(L,2),U=P[0],T=P[1],F=(0,j.useState)(!1),O=o()(F,2),Y=O[0],K=O[1],V=(0,j.useState)(null),H=o()(V,2),B=H[0],J=H[1],de=(0,j.useState)(!1),pe=o()(de,2),me=pe[0],fe=pe[1],ve=(0,j.useRef)(null),ge=(0,j.useRef)(null),he=(0,j.useRef)(0),xe=(0,j.useRef)(null),be=(0,j.useState)(""),ye=o()(be,2),je=ye[0],Ce=ye[1],_e=(0,j.useRef)(null),we=(0,j.useRef)(null),ze=E.Z.useWatch("size",null===(a=_e.current)||void 0===a?void 0:a.form),Se=(0,D.Z)(),ke=Se.initialize,Ze=Se.updateScrollerPosition,Me=(0,D.Z)().initialize;(0,j.useImperativeHandle)(n,(function(){return{viewCode:function(){T(!0)},setCollapse:function(){fe(!me)},collapse:me}}));var Ie=(0,j.useCallback)((function(){var e,n,a,t=(n=0,a=ae.ce.length-1,Math.floor(Math.random()*(a-n+1)+n)),r=ae.ce[t];null===(e=we.current)||void 0===e||e.handleInputChange({target:{value:r}})}),[]),Ne=(0,j.useCallback)((function(){var e={span:12};return 1===N.n&&(e.span=24),2===N.n&&(e.span=12),3===N.n&&(e.span=12),4===N.n&&(e.span=12),e}),[N.n]),qe=(0,j.useMemo)((function(){return"custom"===N.size?k()(k()({},y().omit(N,["width","height"])),{},{size:N.width&&N.height?"".concat(N.width,"x").concat(N.height):""}):k()({},y().omit(N,["width","height","random_seed"]))}),[N]),Le=(0,j.useMemo)((function(){return d?function(e){var n=e.api,a=e.parameters,t=window.location.origin,r="\ncurl ".concat(t).concat(n,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,re.Yy)(a,!1)).trim(),l='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(t,'/v1-openai", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.images.generate(\n').concat((0,re.G4)(k()({},a)),")\n\nprint(response.data[0].b64_json)").trim(),s=(0,re.GT)(k()({},a));return{curlCode:r,pythonCode:l,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(t,'/v1-openai"\n});\n\nasync function main() {\n  const params = ').concat(s,"; \n  const response = await openai.images.generate(params);\n  console.log(response.data[0].b64_json);\n}\nmain();").trim()}}({api:"/v1-openai/images/generations",parameters:k()(k()({},qe),{},{prompt:je})}):function(e){var n=e.api,a=e.parameters,t=window.location.origin;return{curlCode:"\ncurl ".concat(t).concat(n,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,re.Yy)(a,!1)).trim(),pythonCode:'\nimport requests\n\nurl="'.concat(t).concat(n,'"\nheaders = {\n  "Content-type": "application/json",\n  "Authorization": "Bearer ${YOUR_GPUSTACK_API_KEY}"\n}\ndata = ').concat(JSON.stringify(a,null,2).replace(/null/g,"None"),"\n\nresponse = requests.post(url, headers=headers, json=data)\nprint(response.json()['data'][0]['b64_json'])").trim(),nodeJsCode:'\nconst axios = require(\'axios\');\n\nconst url = "http://localhost/v1-openai/images/generations";\nconst headers = {\n  "Content-type": "application/json",\n  "Authorization": "Bearer ${YOUR_GPUSTACK_API_KEY}"\n};\nconst data = '.concat((0,re.GT)(a),";\n\naxios.post(url, data, { headers }).then((response) => {\n  console.log(response.data.data[0].b64_json);\n});").trim()}}({api:"/v1-openai/images/generations",parameters:k()(k()({},qe),{},{prompt:je})})}),[qe,je,N.size]),Ae=function(){return l.current=l.current+1,l.current},Pe=function(){var e=s()(r()().mark((function e(n){var a,t,l,s,i,o,u,c,d,p,m,f,v,g,h;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(a=_e.current)||void 0===a||null===(a=a.form)||void 0===a?void 0:a.validateFields();case 3:if(N.model){e.next=5;break}return e.abrupt("return");case 5:return i=Ne(),K(!0),Ae(),J(null),Ce((null==n?void 0:n.content)||""),o=y().split(qe.size,"x"),u=Array(N.n).fill({}).map((function(e,n){return k()(k()({dataUrl:"data:image/png;base64,"},i),{},{progress:0,height:o[1],width:o[0],loading:!0,uid:Ae()})})),b(u),null===(t=xe.current)||void 0===t||null===(l=t.abort)||void 0===l||l.call(t),xe.current=new AbortController,c=k()(k()({},y().omitBy(qe,(function(e){return!e}))),{},{seed:N.random_seed?(0,Q.Hq)():N.seed,stream:!0,stream_options:{chunk_size:16384,chunk_results:!0},prompt:(null==n?void 0:n.content)||je||""}),q(k()(k()({},N),{},{seed:c.seed})),null===(s=_e.current)||void 0===s||null===(s=s.form)||void 0===s||s.setFieldValue("seed",c.seed),e.next=20,(0,X.U3)({data:c,url:"".concat(_.U$,"?t=").concat(Date.now()),signal:xe.current.signal});case 20:if(!(d=e.sent).error){e.next=25;break}return J({error:!0,errorMessage:(null==d||null===(p=d.data)||void 0===p||null===(p=p.error)||void 0===p?void 0:p.message)||(null==d||null===(m=d.data)||void 0===m?void 0:m.error)||""}),b([]),e.abrupt("return");case 25:return f=d.reader,v=d.decoder,e.next=28,(0,X.YT)(f,v,(function(e){var n,a;null!=e&&e.error?J({error:!0,errorMessage:(null==e||null===(a=e.error)||void 0===a?void 0:a.message)||(null==e?void 0:e.message)||""}):(null==e||null===(n=e.data)||void 0===n||n.forEach((function(e){var n=u[e.index];e.b64_json&&(n.dataUrl+=e.b64_json);var a=y().round(e.progress,0);u[e.index]={dataUrl:n.dataUrl,height:o[1],width:o[0],maxHeight:"".concat(o[1],"px"),maxWidth:"".concat(o[0],"px"),uid:n.uid,span:n.span,loading:a<100,progress:a}})),b(z()(u)))}));case 28:e.next=35;break;case 30:e.prev=30,e.t0=e.catch(0),null===(g=xe.current)||void 0===g||null===(h=g.abort)||void 0===h||h.call(g),b([]);case 35:return e.prev=35,K(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,30,35,38]])})));return function(n){return e.apply(this,arguments)}}(),Ue=(0,j.useMemo)((function(){return d?te.QU.map((function(e){return(0,G.jsx)(E.Z.Item,{name:e.name,rules:e.rules,children:(0,G.jsx)(A.Z,k()(k()({},e.attrs),{},{options:e.options,label:e.label.isLocalized?C.formatMessage({id:e.label.text}):e.label.text}))},e.name)})):[]}),[te.QU,d,C]),Ee=function(e){var n;e.target.id.indexOf("random_seed")>-1&&(null===(n=_e.current)||void 0===n||null===(n=n.form)||void 0===n||n.setFieldValue("random_seed",e.target.checked),q((function(n){return k()(k()({},n),{},{random_seed:e.target.checked})})))},Re=(0,j.useMemo)((function(){var e;if(d)return[];var n=null===(e=_e.current)||void 0===e||null===(e=e.form)||void 0===e?void 0:e.getFieldsValue();return te.GF.map((function(e){var a,t;return(0,G.jsx)(E.Z.Item,{name:e.name,rules:e.rules,noStyle:"random_seed"===e.name,children:(0,G.jsx)(W,k()({style:"random_seed"===e.name?{marginBottom:20}:{},disabled:e.disabledConfig?null===(a=e.disabledConfig)||void 0===a||null===(t=a.when)||void 0===t?void 0:t.call(a,n):e.disabled,onChange:"random_seed"===e.name?Ee:null},y().omit(e,["name","rules","disabledConfig"])))},e.name)}))}),[te.GF,d,C,_e.current]),Te=(0,j.useMemo)((function(){return"custom"===ze?te.Ci.map((function(e){var n,a;return(0,G.jsx)(E.Z.Item,{name:e.name,rules:[{message:C.formatMessage({id:"common.form.rule.input"},{name:C.formatMessage({id:e.label.text})}),required:!0}],children:(0,G.jsx)(W,k()(k()({label:e.label.isLocalized?C.formatMessage({id:e.label.text}):e.label.text,description:null!==(n=e.description)&&void 0!==n&&n.isLocalized?C.formatMessage({id:e.description.text}):null===(a=e.description)||void 0===a?void 0:a.text},e.attrs),y().omit(e,["name","description","rules","disabledConfig"])))},e.name)})):null}),[ze,C]);return(0,j.useEffect)((function(){return function(){var e,n;null===(e=xe.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e)}}),[]),(0,j.useEffect)((function(){var e;"custom"===ze&&(null===(e=_e.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue({width:512,height:512}),q((function(e){return k()(k()({},e),{},{width:512,height:512})})))}),[ze]),(0,j.useEffect)((function(){ve.current&&ke(ve.current)}),[ve.current,ke]),(0,j.useEffect)((function(){ge.current&&Me(ge.current)}),[ge.current,Me]),(0,j.useEffect)((function(){Y&&Ze()}),[h,Y]),(0,j.useEffect)((function(){h.length>he.current&&Ze(),he.current=h.length}),[h.length]),(0,G.jsxs)("div",{className:"ground-left-wrapper",children:[(0,G.jsxs)("div",{className:"ground-left",children:[(0,G.jsx)("div",{className:"message-list-wrap",ref:ve,style:{paddingBottom:16},children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"content",style:{height:"100%"},children:[(0,G.jsx)($.Z,{style:{padding:0,height:"100%",justifyContent:"center",flexDirection:"column",flexWrap:"unset",alignItems:"center"},autoBgColor:!1,editable:!1,dataList:h,loading:Y,responseable:!0,gutter:[8,16],autoSize:!0}),!h.length&&(0,G.jsxs)("div",{className:"flex-column font-size-14 flex-center gap-20 justify-center hold-wrapper",children:[(0,G.jsx)("span",{children:(0,G.jsx)(ee.Z,{className:"font-size-32 text-secondary"})}),(0,G.jsx)("span",{children:C.formatMessage({id:"playground.params.empty.tips"})})]})]})})}),B&&(0,G.jsx)("div",{style:{height:40},children:(0,G.jsx)(Z.Z,{type:"danger",message:null==B?void 0:B.errorMessage})}),(0,G.jsx)("div",{className:"ground-left-footer",children:(0,G.jsx)(se.Z,{ref:we,placeholer:C.formatMessage({id:"playground.input.prompt.holder"}),actions:["clear"],defaultSize:{minRows:5,maxRows:5},title:(0,G.jsx)("span",{className:"font-600",children:C.formatMessage({id:"playground.image.prompt"})}),loading:Y,disabled:!N.model,isEmpty:!h.length,handleSubmit:function(e){var n=e.content?e:void 0;Pe(n)},handleAbortFetch:function(){var e,n;null===(e=xe.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),K(!1)},onInputChange:function(e){Ce(e.target.value)},shouldResetMessage:!1,clearAll:function(){Ae(),b([]),J(null)},tools:(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(R.Z,{title:C.formatMessage({id:"playground.image.prompt.random"}),children:(0,G.jsx)(g.ZP,{onClick:Ie,size:"middle",type:"text",icon:(0,G.jsx)(u.Z,{type:"icon-random"})})})})})})]}),(0,G.jsx)("div",{className:x()("params-wrapper",{collapsed:me}),ref:ge,children:(0,G.jsx)("div",{className:"box",children:(0,G.jsx)(le.Z,{ref:_e,parametersTitle:(0,G.jsxs)("div",{className:"flex-between flex-center",children:[(0,G.jsx)("span",{children:C.formatMessage({id:"playground.parameters"})}),(0,G.jsx)(R.Z,{title:C.formatMessage({id:"playground.image.params.custom.tips"}),children:(0,G.jsx)(g.ZP,{size:"middle",type:"text",icon:(0,G.jsx)(ne.Z,{}),onClick:function(){var e,n;d?(null===(e=_e.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue(k()({},oe)),q((function(e){return k()(k()({},y().omit(e,y().keys(ue))),oe)}))):(null===(n=_e.current)||void 0===n||null===(n=n.form)||void 0===n||n.setFieldsValue(k()({},ue)),q((function(e){return k()(k()({},ue),y().omit(e,y().keys(oe)))})));p(!d)},children:d?C.formatMessage({id:"playground.image.params.custom"}):C.formatMessage({id:"playground.image.params.openai"})})})]}),setParams:q,paramsConfig:te.FM,initialValues:ce,params:N,selectedModel:S,modelList:t,extra:[Te].concat(z()(Ue),z()(Re))})})}),(0,G.jsx)(ie.Z,{open:U,viewCodeContent:Le,onCancel:function(){T(!1)},title:C.formatMessage({id:"playground.viewcode"})})]})})),pe=(0,j.memo)(de),me=(a(20988),function(){var e=(0,f.useIntl)(),n=(0,p.Z)().size,a=(0,j.useRef)(null),t=(0,j.useState)([]),l=o()(t,2),i=l[0],h=l[1],b=(0,j.useState)(!1),w=o()(b,2),z=(w[0],w[1]),S=(0,j.useCallback)((function(){var e,n;null===(e=a.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)}),[]),k=(0,j.useCallback)((function(){var e,n;null===(e=a.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),[]);(0,j.useEffect)((function(){var e,t,r;n.width<c.Z.lg&&(null!==(e=a.current)&&void 0!==e&&e.collapse||null===(t=a.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t))}),[n.width]),(0,j.useEffect)((function(){var e=function(){var e=s()(r()().mark((function e(){var n,a,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={image_only:!0},e.next=4,(0,_.nb)(n);case 4:return a=e.sent,t=y().map(a.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=s()(r()().mark((function n(){var a;return r()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:a=n.sent,h(a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),z(!0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,C.y1)(d.ZP.RIGHT.join(","),(function(){var e,n;null===(e=a.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),{preventDefault:!0}),(0,G.jsx)(m._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.text2images"}),breadcrumb:{}},extra:(0,G.jsxs)(v.Z,{children:[(0,G.jsx)(g.ZP,{size:"middle",onClick:S,icon:(0,G.jsx)(u.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,G.jsx)(g.ZP,{size:"middle",onClick:k,icon:(0,G.jsx)(u.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:x()("playground-container chat"),children:(0,G.jsx)("div",{className:"play-ground",children:(0,G.jsx)("div",{className:"chat",children:(0,G.jsx)(pe,{ref:a,modelList:i})})})})})},81117:function(e,n,a){a.d(n,{LN:function(){return v},U3:function(){return f},YT:function(){return h}});var t=a(335),r=a.n(t),l=a(90228),s=a.n(l),i=a(26068),o=a.n(i),u=a(87999),c=a.n(u),d=a(55360),p=/data:\s*({.*?})(?=\n|$)/g,m=function(e){var n,a=[];if(!e)return a;for(;null!==(n=p.exec(e));)try{var t=JSON.parse(n[1]);a.push(t)}catch(e){continue}return a},f=function(){var e=c()(s()().mark((function e(n){var a,t,r,l,i,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.method||"POST",r=n.url,n.params&&(r="".concat(r,"?").concat(d.Z.stringify(n.params))),e.next=5,fetch(r,{method:t,body:"POST"===t?JSON.stringify(n.data):null,signal:n.signal,headers:o()({"Content-Type":"application/json"},n.headers)});case 5:if((l=e.sent).ok){e.next=12;break}return e.next=10,l.json();case 10:return e.t0=e.sent,e.abrupt("return",{error:!0,data:e.t0});case 12:return i=null==l||null===(a=l.body)||void 0===a?void 0:a.getReader(),u=new TextDecoder("utf-8",{fatal:!0}),e.abrupt("return",{reader:i,decoder:u});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=c()(s()().mark((function e(n,a,t){var r,l,i,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(r=e.sent,l=r.done,i=r.value,!l){e.next=7;break}return e.abrupt("return");case 7:return o=a.decode(i,{stream:!0}),m(o).forEach((function(e){null==t||t(e)})),e.next=11,v(n,a,t);case 11:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}(),g=function(e,n){var a,t=e.split("\n"),l=r()(t);try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s.startsWith("data: ")){var i=s.slice(6).trim();try{n(JSON.parse(i))}catch(e){}}}}catch(e){l.e(e)}finally{l.f()}},h=function(){var e=c()(s()().mark((function e(n,a,t){var l,i,o,u,c,d,p,m,f,v,h;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l="";case 1:return e.next=4,null==n||null===(i=n.read)||void 0===i?void 0:i.call(n);case 4:if(o=e.sent,u=o.done,c=o.value,!u){e.next=10;break}return l.trim()&&g(l,t),e.abrupt("break",17);case 10:l+=a.decode(c,{stream:!0}),d=l.split("\n"),l=d.pop()||"",p=r()(d);try{for(p.s();!(m=p.n()).done;)if((f=m.value).startsWith("data: ")){v=f.slice(6).trim();try{"[DONE]"!==v&&(h=JSON.parse(v),t(h))}catch(e){}}}catch(e){p.e(e)}finally{p.f()}e.next=1;break;case 17:case"end":return e.stop()}}),e)})));return function(n,a,t){return e.apply(this,arguments)}}()}}]);