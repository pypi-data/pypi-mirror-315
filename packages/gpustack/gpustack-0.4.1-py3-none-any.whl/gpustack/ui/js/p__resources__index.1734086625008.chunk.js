"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[485],{42034:function(e,t,n){var r=n(26068),a=n.n(r),o=n(48305),l=n.n(o),s=n(5268),i=n(26268),c=n(99178),d=n(70109),u=n(23333),m=n(85885),p=n(99013),h=n.n(p),f=n(50959),g=n(11527);t.Z=function(e){var t=e.text,n=e.disabled,r=e.type,o=void 0===r?"text":r,p=e.shape,x=void 0===p?"default":p,v=e.fontSize,y=void 0===v?"14px":v,j=e.style,b=e.size,k=void 0===b?"middle":b,C=(0,c.useIntl)(),M=(0,f.useState)(!1),Z=l()(M,2),w=Z[0],P=Z[1],I=(0,f.useRef)(null),S=(0,f.useRef)(null);return(0,f.useEffect)((function(){return I.current&&(S.current=new(h())(I.current),S.current.on("success",(function(){P(!0),setTimeout((function(){P(!1)}),3e3)})),S.current.on("error",(function(e){d.ZP.success(C.formatMessage({id:"common.copy.fail"})),e.clearSelection()}))),function(){var e;null===(e=S.current)||void 0===e||e.destroy()}}),[I]),(0,g.jsx)(u.Z,{title:C.formatMessage({id:"common.button.copy"}),children:(0,g.jsx)(m.ZP,{className:"copy-button",ref:I,type:o,shape:x,size:k,disabled:!!n,"data-clipboard-text":t,icon:w?(0,g.jsx)(s.Z,{style:{color:"var(--ant-color-success)",fontSize:y}}):(0,g.jsx)(i.Z,{style:a()({fontSize:y},j)})})})}},16333:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(50959),a=n(26068),o=n.n(a),l=n(82187),s=n.n(l),i=n(49034),c=n(42034);var d=n(11527),u=function(e){var t=e||{},n=t.code,a=t.copyValue,l=t.lang,u=t.autodetect,m=void 0===u||u,p=t.ignoreIllegals,h=void 0===p||p,f=t.copyable,g=void 0===f||f,x=t.height,v=void 0===x?"auto":x,y=t.style,j=(0,r.useMemo)((function(){var e,t=m&&!l,r=!t&&!i.Z.getLanguage(l),a="";return r||(a="hljs ".concat(l)),r?{value:(e=n,e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")),className:a}:t?{value:i.Z.highlightAuto(n).value,className:a}:{value:i.Z.highlight(n,{language:l,ignoreIllegals:h}).value,className:a}}),[n,l,m,h]);return(0,d.jsxs)("pre",{className:s()("code-pre custome-scrollbar custom-scrollbar-horizontal ",{dark:"dark"===e.theme,light:"light"===e.theme,copyable:g}),style:o()({height:v},y),children:[(0,d.jsx)("code",{style:{minHeight:v},className:s()(j.className,{dark:"dark"===e.theme,light:"light"===e.theme}),dangerouslySetInnerHTML:{__html:j.value}}),g&&(0,d.jsx)(c.Z,{text:a||n,size:"small",style:{color:"#abb2bf"}})]})},m=(0,r.memo)(u),p=function(e){var t=e||{},n=t.code,r=t.copyValue,a=t.lang,o=t.autodetect,l=t.ignoreIllegals,s=t.copyable,i=t.height,c=void 0===i?"auto":i;return(0,d.jsx)(m,{style:e.style,height:c,code:n,copyValue:r,lang:a,theme:"dark",autodetect:o,ignoreIllegals:l,copyable:s})},h=(0,r.memo)(p),f=function(e){var t=e||{},n=t.code,r=t.copyValue,a=t.lang,o=t.autodetect,l=t.ignoreIllegals,s=t.copyable,i=t.style,c=t.height,u=void 0===c?"auto":c;return(0,d.jsx)(m,{style:i,height:u,code:n,copyValue:r,lang:a,theme:"light",autodetect:o,ignoreIllegals:l,copyable:s})},g=(0,r.memo)(f),x=function(e){var t=e.style,n=e.code,r=e.copyValue,a=e.lang,o=void 0===a?"bash":a,l=e.copyable,s=void 0===l||l,i=e.theme,c=void 0===i?"dark":i,u=e.height,m=void 0===u?"auto":u;return(0,d.jsx)("div",{className:"high-light-wrapper hj-wrapper",children:"dark"===c?(0,d.jsx)(h,{lang:o,code:n,copyValue:r,copyable:s,height:m,style:t}):(0,d.jsx)(g,{style:t,lang:o,code:n,copyValue:r,copyable:s,height:m})})},v=r.memo(x)},93495:function(e,t,n){n.d(t,{d4:function(){return s}});var r=n(48305),a=n.n(r),o=(0,n(71239).oc)(),l={CREATE:["Alt+Ctrl+N","Alt+Meta+N"],CLEAR:["Alt+Ctrl+K","Alt+Meta+K"],RIGHT:["Ctrl+RIGHT","Meta+RIGHT"],SAVE:["Ctrl+S","Meta+S"],SUBMIT:["Ctrl+Enter","Meta+Enter"],SAVEAS:["Alt+Ctrl+S","Alt+Meta+S"],OPEN:["Alt+Ctrl+O","Alt+Meta+O"],CANCEL:["Ctrl+W","Meta+W"],DELETE:["delete"],COPY:["Ctrl+C","Meta+C"],REFRESH:["Ctrl+R","Meta+R"],EDIT:["Ctrl+E","Meta+E"],SEARCH:["Ctrl+K","Meta+K"],RESET:["Alt+Ctrl+R","Alt+Meta+R"],INPUT:["Ctrl+K","Meta+K"],NEW1:["Ctrl+1","Meta+1"],NEW2:["Ctrl+2","Meta+2"],NEW3:["Ctrl+3","Meta+3"],NEW4:["Ctrl+4","Meta+4"],FOCUS:["/","/"],ADD:["Alt+Ctrl+Enter","Alt+Meta+Enter"]},s=Object.entries(l).map((function(e){var t=a()(e,2),n=t[0],r=t[1],l=o.isMac&&r[1]||r[0];return{keybinding:l,command:n,textKeybinding:o.isMac?l.replace("Meta","Cmd").replace("Alt","Option"):l.replace("Ctrl","Ctrl"),iconKeybinding:o.isMac?l.replace("Meta","⌘").replace("Alt","⌥"):l.replace("Ctrl","Ctrl")}})).reduce((function(e,t){return e[t.command]=t,e}),{});t.ZP=l},571:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(48305),a=n.n(r),o=n(32699),l=n(92605),s=n(50959);function i(e){var t,n=s.useRef(null),r=s.useRef(null),i=s.useRef(!1),c=(0,l.A)({options:{update:{debounce:0},overflow:{x:"hidden"},scrollbars:{theme:(null==e?void 0:e.theme)||"os-theme-dark",autoHide:"scroll",autoHideDelay:600,clickScroll:"instant"}},defer:!0}),d=a()(c,2),u=d[0],m=d[1];r.current=null==m?void 0:m(),n.current=null===(t=r.current)||void 0===t||null===(t=t.elements())||void 0===t?void 0:t.scrollEventElement;var p=s.useCallback((0,o.throttle)((function(){var e,t,a,o,l;null===(e=n.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:null===(a=n.current)||void 0===a?void 0:a.scrollHeight,behavior:"smooth"}),null===(o=r.current)||void 0===o||null===(l=o.update)||void 0===l||l.call(o)}),100),[(n.current,r.current)]),h=s.useCallback((function(){var e,t,a,o;null===(e=n.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:n.current.scrollHeight,behavior:"auto"}),null===(a=r.current)||void 0===a||null===(o=a.update)||void 0===o||o.call(a)}),[n.current,r.current]),f=s.useCallback((function(e){0===e?h():p()}),[p,h]),g=s.useCallback((function(){var e,t,a,o;null===(e=n.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{top:0,behavior:"auto"}),null===(a=r.current)||void 0===a||null===(o=a.update)||void 0===o||o.call(a)}),[n.current,r.current]),x=s.useCallback((function(e){var t;r.current||e&&(u(e),i.current=!0,r.current=null==m?void 0:m(),n.current=null===(t=r.current)||void 0===t||null===(t=t.elements())||void 0===t?void 0:t.scrollEventElement)}),[u,m]);return(0,s.useEffect)((function(){return function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}}),[m]),{initialize:x,instance:r.current,scrollEventElement:n.current,initialized:i.current,generateInstance:function(){var e;r.current=null==m?void 0:m(),n.current=null===(e=r.current)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement},updateScrollerPosition:f,updateScrollerPositionToTop:g}}},91845:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var r=n(48305),a=n.n(r),o=n(55169),l=n(99178),s=n(47946),i=n(50959),c=n(90228),d=n.n(c),u=n(87999),m=n.n(u),p=n(26068),h=n.n(p),f=n(33883),g=n(40198),x=n(23333),v=n(9288),y=n(11527),j=(0,i.memo)((function(e){var t=e.percent,n=(e.steps,e.download),r=e.label,a=(0,i.useMemo)((function(){return n?"var(--ant-color-primary)":t<=50?"var(--color-progress-green)":t<=80?"var(--ant-color-warning)":"var(--ant-color-error)"}),[t]);return(0,y.jsx)(y.Fragment,{children:r?(0,y.jsx)(x.Z,{title:r,children:(0,y.jsx)(v.Z,{percentPosition:{align:"center",type:"inner"},size:[void 0,16],format:function(){return(0,y.jsxs)("span",{style:{color:"#fff"},children:[t,"%"]})},percent:t,strokeColor:a})}):(0,y.jsx)(v.Z,{type:"line",percentPosition:{align:"center",type:"inner"},size:[void 0,16],format:function(){return(0,y.jsxs)("span",{style:{color:"#fff"},children:[t,"%"]})},percent:t,strokeColor:a})})})),b=n(51980),k=n(71239),C=n(56838),M=n(9281),Z=n(54235),w=n(8267),P=n(85885),I=n(32699),S=n.n(I),E=n(13172),A=M.Z.Column,R=function(){var e=(0,l.useIntl)(),t=(0,b.Z)({defaultSortOrder:"descend"}),n=(t.sortOrder,t.setSortOrder),r=(0,i.useState)({dataList:[],loading:!1,total:0}),o=a()(r,2),s=o[0],c=o[1],u=(0,i.useState)({page:1,perPage:10,search:""}),p=a()(u,2),x=p[0],v=p[1],I=function(){var e=m()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((function(e){return e.loading=!0,h()({},e)})),e.prev=1,t=h()({},S().pickBy(x,(function(e){return!!e}))),e.next=5,(0,E.oz)(t);case 5:n=e.sent,c({dataList:n.items||[],loading:!1,total:n.pagination.total}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c({dataList:[],loading:!1,total:s.total});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){I()}),[x]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{marginBottom:10,marginTop:10,left:(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(w.Z,{placeholder:e.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:function(e){v(h()(h()({},x),{},{search:e.target.value}))}}),(0,y.jsx)(P.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:function(e){I()},icon:(0,y.jsx)(C.Z,{})})]})}),(0,y.jsxs)(M.Z,{dataSource:s.dataList,loading:s.loading,rowKey:"id",onChange:function(e,t,r){n(r.order)},pagination:{showSizeChanger:!0,pageSize:x.perPage,current:x.page,total:s.total,hideOnSinglePage:10===x.perPage,onChange:function(e,t){v(h()(h()({},x),{},{page:e,perPage:t||10}))}},children:[(0,y.jsx)(A,{title:e.formatMessage({id:"common.table.name"}),dataIndex:"name",render:function(e,t){return(0,y.jsx)(f.Z,{ghost:!0,style:{width:"100%"},children:e})}},"name"),(0,y.jsx)(A,{title:e.formatMessage({id:"resources.table.index"}),dataIndex:"index",render:function(e,t){return(0,y.jsx)("span",{children:t.index})}},"index"),(0,y.jsx)(A,{title:e.formatMessage({id:"resources.table.workername"}),dataIndex:"worker_name",width:200,render:function(e,t){return(0,y.jsx)("span",{style:{display:"flex",width:"100%"},children:(0,y.jsx)(f.Z,{ghost:!0,maxWidth:340,children:e})})}},"worker_name"),(0,y.jsx)(A,{title:e.formatMessage({id:"resources.table.vender"}),dataIndex:"vendor"},"vendor"),(0,y.jsx)(A,{title:"".concat(e.formatMessage({id:"resources.table.temperature"})," (°C)"),dataIndex:"temperature",render:function(e,t){return(0,y.jsx)("span",{children:e?S().round(e,1):"-"})}},"Temperature"),(0,y.jsx)(A,{title:e.formatMessage({id:"resources.table.gpuutilization"}),dataIndex:"gpuUtil",render:function(e,t){var n;return(0,y.jsx)(y.Fragment,{children:t.core?(0,y.jsx)(j,{percent:S().round(null===(n=t.core)||void 0===n?void 0:n.utilization_rate,2)}):"-"})}},"gpuUtil"),(0,y.jsx)(A,{title:e.formatMessage({id:"resources.table.vramutilization"}),dataIndex:"VRAM",render:function(t,n){var r,a,o,l,s,i,c;return(0,y.jsx)(j,{percent:null!==(r=n.memory)&&void 0!==r&&r.used?S().round(null===(a=n.memory)||void 0===a?void 0:a.utilization_rate,0):S().round((null===(o=n.memory)||void 0===o?void 0:o.allocated)/(null===(l=n.memory)||void 0===l?void 0:l.total),0),label:(0,y.jsxs)("span",{className:"flex-column",children:[(0,y.jsxs)("span",{children:[e.formatMessage({id:"resources.table.total"}),":"," ",(0,k.hy)(null===(s=n.memory)||void 0===s?void 0:s.total,0)]}),(0,y.jsxs)("span",{children:[e.formatMessage({id:"resources.table.used"}),":"," ",(0,k.hy)((null===(i=n.memory)||void 0===i?void 0:i.used)||(null===(c=n.memory)||void 0===c?void 0:c.allocated),0)]})]})})}},"VRAM")]})]})},N=(0,i.memo)(R),T=n(94186),z=n(28203),O=n(60073),W=n(93495),_=n(34531),V=n(48660),K=n(69070),L=n(19019),U=n(4423),H=n(70109),B=n(94299),D=n(82092),F=n.n(D),G=n(12526),q="ready",$="not_ready",J=F()(F()({},q,"Ready"),$,"Not Ready"),Y=F()(F()({},q,G.iE.success),$,G.iE.error),Q={getToken:"cat /var/lib/gpustack/token",registerWorker:function(e){return"curl -sfL https://get.gpustack.ai | sh -s - --server-url ".concat(e," --token mytoken")}},X={getToken:'Get-Content -Path (Join-Path -Path $env:APPDATA -ChildPath "gpustack\\token") -Raw',registerWorker:function(e){return'Invoke-Expression "& { $((Invoke-WebRequest -Uri "https://get.gpustack.ai" -UseBasicParsing).Content) } --server-url '.concat(e,' --token mytoken"')}},ee={getToken:'Get-Content -Path (Join-Path -Path $env:APPDATA -ChildPath "gpustack\\token") -Raw',registerWorker:function(e){return"docker run -d --gpus all --ipc=host --network=host gpustack/gpustack --server-url ".concat(e," --token mytoken")}},te=n(16333),ne=n(1956),re=function(e){var t=e||{},n=t.open,r=t.onCancel,a=(0,l.useIntl)(),o=window.location.origin;return(0,y.jsx)(ne.Z,{title:a.formatMessage({id:"resources.button.create"}),open:n,centered:!0,onCancel:r,destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:(0,y.jsxs)("div",{children:[(0,y.jsxs)("h3",{children:["1. ",a.formatMessage({id:"resources.worker.add.step1"})]}),(0,y.jsx)("h4",{children:a.formatMessage({id:"resources.worker.linuxormaxos"})}),(0,y.jsx)(te.Z,{code:Q.getToken,theme:"dark"}),(0,y.jsx)("h4",{children:"Windows "}),(0,y.jsx)(te.Z,{code:X.getToken,theme:"dark"}),(0,y.jsxs)("h3",{children:["2. ",a.formatMessage({id:"resources.worker.add.step2"})," ",(0,y.jsx)("span",{className:"font-size-12",style:{color:"var(--ant-color-text-tertiary)"},dangerouslySetInnerHTML:{__html:"(".concat(a.formatMessage({id:"resources.worker.add.step2.tips"}),")")}})]}),(0,y.jsx)("h4",{children:a.formatMessage({id:"resources.worker.linuxormaxos"})}),(0,y.jsx)(te.Z,{code:Q.registerWorker(o),theme:"dark"}),(0,y.jsx)("h4",{children:"Windows "}),(0,y.jsx)(te.Z,{theme:"dark",code:X.registerWorker(o)}),(0,y.jsx)("h4",{children:"Docker "}),(0,y.jsx)(te.Z,{theme:"dark",code:ee.registerWorker(o)}),(0,y.jsxs)("h3",{children:["3. ",a.formatMessage({id:"resources.worker.add.step3"})]})]})})},ae=i.memo(re),oe=n(77674),le=n(7215),se=n(92233),ie=n(68476),ce=n(56377),de=(n(9763),function(e){var t=e||{},n=t.open,r=t.onCancel,o=t.data,s=t.onOk,i=(0,l.useIntl)(),c=ie.Z.useForm(),d=a()(c,1)[0],u=ie.Z.useWatch("labels",d);return(0,y.jsx)(ne.Z,{title:i.formatMessage({id:"resources.button.edit"}),open:n,centered:!0,onCancel:r,destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,styles:{content:{padding:"0px"},header:{padding:"var(--ant-modal-content-padding)",paddingBottom:"0"},body:{padding:"0"},footer:{padding:"0 var(--ant-modal-content-padding)"}},footer:(0,y.jsx)(le.Z,{onOk:function(){d.submit()},onCancel:r}),children:(0,y.jsx)(ce.Z,{style:{maxHeight:"550px"},children:(0,y.jsxs)(ie.Z,{name:"deployModel",form:d,onFinish:s,preserve:!1,clearOnDestroy:!0,initialValues:{name:o.name,labels:o.labels},style:{padding:"var(--ant-modal-content-padding)",paddingBlock:0},children:[(0,y.jsx)(ie.Z.Item,{name:"name",children:(0,y.jsx)(se.Z.Input,{label:i.formatMessage({id:"common.table.name"}),disabled:!0})}),(0,y.jsx)(ie.Z.Item,{name:"labels",rules:[function(){return{validator:function(e,t){return S().keys(t).length>0&&S().some(S().keys(t),(function(e){return!t[e]}))?Promise.reject(i.formatMessage({id:"common.validate.value"},{name:i.formatMessage({id:"resources.form.label"})})):Promise.resolve()}}}],children:(0,y.jsx)(oe.Z,{label:i.formatMessage({id:"resources.table.labels"}),labels:u,btnText:"common.button.addLabel",onChange:function(e){d.setFieldValue("labels",e)}})})]})})})}),ue=i.memo(de),me=M.Z.Column,pe=[{label:"common.button.edit",key:"edit",icon:(0,y.jsx)(V.Z,{})},{label:"common.button.delete",key:"delete",props:{danger:!0},icon:(0,y.jsx)(K.Z,{})}],he=function(){var e,t,n=(0,b.Z)({defaultSortOrder:"descend"}),r=(n.sortOrder,n.setSortOrder),o=(0,i.useRef)(null),s=(0,_.Z)(),c=(0,l.useIntl)(),u=(0,i.useState)(!1),p=a()(u,2),v=p[0],I=p[1],A=(0,i.useState)({dataList:[],loading:!1,total:0}),R=a()(A,2),N=R[0],V=R[1],D=(0,i.useState)({page:1,perPage:10,search:""}),F=a()(D,2),G=F[0],q=F[1],$=(0,i.useState)({open:!1,data:{}}),Q=a()($,2),X=Q[0],ee=Q[1],te=(0,i.useCallback)(m()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V((function(e){return e.loading=!0,h()({},e)})),e.prev=1,t=h()({},S().pickBy(G,(function(e){return!!e}))),e.next=5,(0,E.Sw)(t);case 5:n=e.sent,V({dataList:n.items,loading:!1,total:n.pagination.total}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),V({dataList:[],loading:!1,total:N.total});case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),[G]),ne=(0,i.useCallback)((function(e,t,n){r(n.order)}),[]),re=function(e,t){return t&&e?S().round(e/t*100,0):0},oe=function(){I(!0)},le=function(e){var t=S().find(e,(function(e){return"/"===e.mount_point}));return t?(0,y.jsxs)("span",{className:"flex-column",children:[(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.total"}),":"," ",(0,k.hy)(null==t?void 0:t.total,0)]}),(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.used"}),":"," ",(0,k.hy)(null==t?void 0:t.used,0)]})]}):0},se=(0,i.useCallback)(function(){var e=m()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,(0,E.Vq)(X.data.id,h()(h()({},X.data),{},{labels:t.labels}));case 4:H.ZP.success(c.formatMessage({id:"common.message.success"})),te(),ee({open:!1,data:{}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[X,te]),ie=(0,i.useCallback)((function(){ee(h()(h()({},X),{},{open:!1}))}),[]),ce=function(e,t){var n;"edit"!==e?"delete"===e&&(n=t,o.current.show({content:"worker",name:n.name,onOk:function(){return m()(d()().mark((function e(){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,E.lM)(n.id);case 3:te();case 4:case"end":return e.stop()}}),e)})))()}})):function(e){ee({open:!0,data:h()({},e)})}(t)};return(0,i.useEffect)((function(){te()}),[G]),(0,B.y1)(W.ZP.CREATE.join(","),oe,{enabled:!v}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{marginBottom:10,marginTop:10,left:(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(w.Z,{placeholder:c.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:function(e){q(h()(h()({},G),{},{search:e.target.value}))}}),(0,y.jsx)(P.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:function(e){te()},icon:(0,y.jsx)(C.Z,{})})]}),right:(0,y.jsxs)(Z.Z,{size:20,children:[(0,y.jsx)(P.ZP,{icon:(0,y.jsx)(L.Z,{}),type:"primary",onClick:oe,children:c.formatMessage({id:"resources.button.create"})}),(0,y.jsx)(P.ZP,{icon:(0,y.jsx)(K.Z,{}),danger:!0,onClick:function(){o.current.show({content:"wokers",selection:!0,onOk:function(){return m()(d()().mark((function e(){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.D6)(s.selectedRowKeys,E.lM);case 2:s.clearSelections(),te();case 4:case"end":return e.stop()}}),e)})))()}})},disabled:!s.selectedRowKeys.length,children:(0,y.jsxs)("span",{children:[null==c||null===(e=c.formatMessage)||void 0===e?void 0:e.call(c,{id:"common.button.delete"}),s.selectedRowKeys.length>0&&(0,y.jsxs)("span",{children:["(",null===(t=s.selectedRowKeys)||void 0===t?void 0:t.length,")"]})]})})]})}),(0,y.jsxs)(M.Z,{style:{width:"100%"},dataSource:N.dataList,loading:N.loading,rowKey:"id",onChange:ne,rowSelection:s,pagination:{showSizeChanger:!0,pageSize:G.perPage,current:G.page,total:N.total,hideOnSinglePage:10===G.perPage,onChange:function(e,t){q(h()(h()({},G),{},{page:e,perPage:t||10}))}},children:[(0,y.jsx)(me,{title:c.formatMessage({id:"common.table.name"}),dataIndex:"name",width:100,render:function(e,t){return(0,y.jsx)(f.Z,{ghost:!0,maxWidth:240,children:(0,y.jsx)("span",{children:t.name})})}},"name"),(0,y.jsx)(me,{title:c.formatMessage({id:"resources.table.labels"}),dataIndex:"labels",width:200,render:function(e,t){return(0,y.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,maxWidth:200},children:S().map(t.labels,(function(e,t){return(0,y.jsxs)(f.Z,{className:"m-r-0",maxWidth:120,style:{paddingInline:8,borderRadius:12},children:[t,":",e]},t)}))})}},"labels"),(0,y.jsx)(me,{title:c.formatMessage({id:"common.table.status"}),dataIndex:"state",render:function(e,t){return(0,y.jsx)(O.Z,{statusValue:{status:Y[t.state],text:J[t.state],message:t.state_message}})}},"state"),(0,y.jsx)(me,{title:"IP",dataIndex:"ip"},"address"),(0,y.jsx)(me,{title:"CPU",dataIndex:"CPU",render:function(e,t){var n;return(0,y.jsx)(j,{percent:S().round(null==t||null===(n=t.status)||void 0===n||null===(n=n.cpu)||void 0===n?void 0:n.utilization_rate,0)})}},"CPU"),(0,y.jsx)(me,{title:c.formatMessage({id:"resources.table.memory"}),dataIndex:"memory",render:function(e,t){var n,r,a,o;return(0,y.jsx)(j,{percent:re(null==t||null===(n=t.status)||void 0===n||null===(n=n.memory)||void 0===n?void 0:n.used,null==t||null===(r=t.status)||void 0===r||null===(r=r.memory)||void 0===r?void 0:r.total),label:(0,y.jsxs)("span",{className:"flex-column",children:[(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.total"}),":"," ",(0,k.hy)(null==t||null===(a=t.status)||void 0===a||null===(a=a.memory)||void 0===a?void 0:a.total,0)]}),(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.used"}),":"," ",(0,k.hy)(null==t||null===(o=t.status)||void 0===o||null===(o=o.memory)||void 0===o?void 0:o.used,0)]})]})})}},"Memory"),(0,y.jsx)(me,{title:"GPU",dataIndex:"GPU",render:function(e,t){var n;return(0,y.jsx)("span",{className:"flex-column flex-gap-2",children:S().map(S().sortBy((null==t||null===(n=t.status)||void 0===n?void 0:n.gpu_devices)||[],["index"]),(function(e,t){var n;return(0,y.jsxs)("span",{className:"flex-center",children:[(0,y.jsxs)("span",{className:"m-r-5",style:{display:"flex",width:25},children:["[",e.index,"]"]}),e.core?(0,y.jsx)(j,{percent:S().round(null===(n=e.core)||void 0===n?void 0:n.utilization_rate,0)},t):"-"]},t)}))})}},"GPU"),(0,y.jsx)(me,{title:c.formatMessage({id:"resources.table.vram"}),dataIndex:"VRAM",render:function(e,t){var n;return(0,y.jsx)("span",{className:"flex-column flex-gap-2",children:S().map(S().sortBy((null==t||null===(n=t.status)||void 0===n?void 0:n.gpu_devices)||[],["index"]),(function(e,t){var n,r,a,o,l,s,i;return(0,y.jsx)("span",{children:(0,y.jsxs)("span",{className:"flex-center",children:[(0,y.jsxs)("span",{className:"m-r-5",style:{display:"flex",width:25},children:["[",e.index,"]"]}),(0,y.jsx)(j,{percent:null!==(n=e.memory)&&void 0!==n&&n.used?S().round(null===(r=e.memory)||void 0===r?void 0:r.utilization_rate,0):S().round((null===(a=e.memory)||void 0===a?void 0:a.allocated)/(null===(o=e.memory)||void 0===o?void 0:o.total)*100,0),label:(0,y.jsxs)("span",{className:"flex-column",children:[(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.total"}),": ",(0,k.hy)(null===(l=e.memory)||void 0===l?void 0:l.total,0)]}),(0,y.jsxs)("span",{children:[c.formatMessage({id:"resources.table.used"}),":"," ",(0,k.hy)((null===(s=e.memory)||void 0===s?void 0:s.used)||(null===(i=e.memory)||void 0===i?void 0:i.allocated),0)]})]})},t),e.memory.is_unified_memory&&(0,y.jsx)(x.Z,{title:c.formatMessage({id:"resources.table.unified"}),children:(0,y.jsx)(U.Z,{className:"m-l-5"})})]})},t)}))})}},"VRAM"),(0,y.jsx)(me,{title:c.formatMessage({id:"resources.table.disk"}),dataIndex:"storage",render:function(e,t){var n,r,a;return(0,y.jsx)(j,{percent:(r=null===(n=t.status)||void 0===n?void 0:n.filesystem,a=S().find(r,(function(e){return"/"===e.mount_point})),a?re(a.used,a.total):0),label:le(t.status.filesystem)})}},"storage"),(0,y.jsx)(me,{title:c.formatMessage({id:"common.table.operation"}),render:function(e,t){return(0,y.jsx)(z.Z,{items:pe,onSelect:function(e){return ce(e,t)}})}},"operation")]}),(0,y.jsx)(T.Z,{ref:o}),(0,y.jsx)(ae,{open:v,onCancel:function(){return I(!1)}}),(0,y.jsx)(ue,{open:X.open,onOk:se,onCancel:ie,data:{name:X.data.name,labels:X.data.labels}})]})},fe=(0,i.memo)(he),ge=[{key:"workers",label:"Workers",children:(0,y.jsx)(fe,{})},{key:"gpus",label:"GPUs",children:(0,y.jsx)(N,{})}],xe=function(){var e=(0,i.useState)("workers"),t=a()(e,2),n=t[0],r=t[1],c=(0,l.useIntl)(),d=(0,i.useCallback)((function(e){r(e)}),[]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(o._z,{ghost:!0,header:{title:c.formatMessage({id:"resources.title"})},extra:[],children:(0,y.jsx)("div",{style:{marginTop:30},children:(0,y.jsx)(s.Z,{type:"card",defaultActiveKey:"workers",items:ge,accessKey:n,onChange:d})})})})}},9763:function(){}}]);