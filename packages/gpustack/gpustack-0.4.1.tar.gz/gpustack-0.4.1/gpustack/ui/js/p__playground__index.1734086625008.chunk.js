"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8268],{33883:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),a=t.n(r),s=t(48305),l=t.n(s),o=t(67825),i=t.n(o),c=t(23333),u=t(76808),d=t(32699),m=t(50959),p=t(571),f=t(11527),h=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,a=e.children,s=(0,p.Z)().initialize,l=m.useRef(null);return m.useEffect((function(){l.current&&s(l.current)}),[s,l.current]),(0,f.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,f.jsx)("div",{style:{width:"max-content",maxWidth:250,paddingInline:10},children:n||t?r||a:""})})},v=m.memo(h),g=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],x=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,s=e.minWidth,o=e.ghost,p=void 0!==o&&o,h=e.title,x=e.showTitle,y=void 0!==x&&x,j=e.tooltipProps,b=i()(e,g),w=(0,m.useRef)(null),k=(0,m.useState)(!1),Z=l()(k,2),S=Z[0],M=Z[1],N=((0,m.useRef)(),(0,m.useCallback)((function(){if(w.current){var e=w.current,n=e.scrollWidth,t=e.clientWidth;M(n>t)}}),[w.current]));(0,m.useEffect)((function(){var e=(0,d.throttle)(N,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[N]),(0,m.useEffect)((function(){N()}),[n,N]);var C=(0,m.useMemo)((function(){return a()({maxWidth:r,minWidth:s,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},b.style)}),[r,b.style]);return(0,f.jsx)(c.Z,a()(a()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:S||y?(0,f.jsx)(v,{isOverflowing:S,title:h,showTitle:y,children:n}):""},j),{},{children:p?(0,f.jsx)("div",{ref:w,style:C,children:n}):(0,f.jsx)(u.Z,a()(a()({},b),{},{ref:w,style:C,children:n}))}))},y=m.memo(x)},16850:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(26068),a=t.n(r),s=t(60857),l=t(50959),o=t(42034),i=t(11527),c=function(e){var n=e.header,t=e.children,r=e.copyText,l=e.langOptions,c=e.onChangeLang,u=e.defaultValue,d=e.styles,m=void 0===d?{}:d,p=e.showHeader,f=void 0===p||p,h=function(e){null==c||c(e)};return(0,i.jsxs)("div",{className:"editor-wrap",style:a()({},m.wrapper),children:[n?(0,i.jsx)("div",{className:"editor-header",children:n}):f?(0,i.jsxs)("div",{className:"editor-header",children:[(0,i.jsx)(s.default,{defaultValue:u,style:{width:120},size:"middle",variant:"filled",options:l,onChange:h}),(0,i.jsx)(o.Z,{text:r,size:"small",style:{color:"rgba(255,255,255,.7)"}})]}):null,(0,i.jsx)("div",{className:"editor-content",children:t})]})},u=l.memo(c)},75489:function(e,n,t){var r=t(26068),a=t.n(r),s=t(82187),l=t.n(s),o=(t(50959),t(88641)),i=t(1066),c=t(11527);n.Z=function(e){var n=e.children,t=e.label,r=e.status,s=e.className,u=e.disabled,d=e.required,m=e.variant,p=e.style,f=e.description;return(0,c.jsxs)("div",{style:a()({padding:"0 calc(var(--ant-padding-sm) - 5px)",width:"100%"},p),className:l()(i.Z.wrapper,i.Z["validate-status-".concat(r)],u?i.Z["seal-input-wrapper-disabled"]:"","filled"===m?i.Z.filled:"","borderless"===m?i.Z.borderless:"",s?i.Z[s]:""),children:[(0,c.jsx)("label",{className:l()(i.Z.label,i.Z["isfoucs-has-value"]),children:(0,c.jsx)(o.Z,{label:t,required:d,description:f})}),(0,c.jsx)("div",{className:"child-inner",style:{width:"100%"},children:n})]})}},13770:function(e,n,t){t.d(n,{d:function(){return r}});var r={default:500,large:600,small:400,mini:300}},35014:function(e,n,t){t.d(n,{AA:function(){return d},U$:function(){return c},jQ:function(){return p},nb:function(){return u},qt:function(){return i},wE:function(){return f},xO:function(){return m},zv:function(){return h}});var r=t(90228),a=t.n(r),s=t(87999),l=t.n(s),o=t(99178),i="/v1-openai/chat/completions",c="/v1-openai/images/generations";var u=function(){var e=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("".concat("/v1-openai/models"),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=l()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("".concat("/rerank"),{method:"POST",data:n,cancelToken:null==t?void 0:t.cancelToken}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=l()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("".concat("/v1-openai/embeddings"),{method:"POST",data:n,cancelToken:null==t?void 0:t.cancelToken}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),p=function(){var e=l()(a()().mark((function e(n,t){var r,s,l,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/v1-openai/audio/speech",{method:"POST",body:JSON.stringify(n.data),signal:n.signal});case 2:if((s=e.sent).ok){e.next=7;break}return e.next=6,s.json();case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,s.blob();case 9:if(-1!==(null==(l=e.sent)||null===(r=l.type)||void 0===r?void 0:r.indexOf("audio"))){e.next=12;break}return e.abrupt("return",{url:"",type:""});case 12:return o=l.size>0?URL.createObjectURL(l):"",e.abrupt("return",{url:o,type:l.type});case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=l()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/v1-openai/audio/transcriptions",{method:"POST",data:n.data,cancelToken:null==t?void 0:t.cancelToken,headers:{"Content-Type":"multipart/form-data"}}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/voices",{method:"GET",params:n,skipErrorHandler:!0}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},68800:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ke}});var r=t(90228),a=t.n(r),s=t(87999),l=t.n(s),o=t(48305),i=t.n(o),c=t(83057),u=t(35445),d=t(93495),m=t(55592),p=t(92067),f=t(63830),h=t(55169),v=t(99178),g=t(54235),x=t(85885),y=t(96938),j=t(47946),b=t(82187),w=t.n(b),k=t(32699),Z=t.n(k),S=t(50959),M=t(94299),N=t(35014),C=t(26068),R=t.n(C),P=t(15558),T=t.n(P),_=t(571),O=t(81117),I=t(54876),A=(t(72183),t(9298)),E=(t(51662),t(21435),t(26598)),z=(t(9763),t(42034)),L=t(81e3),F=t(23333),D=t(8267),G=t(38852),U=t(2565),q=t(11527),V=function(e){var n,t,r,s=e.updateMessage,o=e.onDelete,i=e.loading,c=e.data,u=e.editable,d=e.showTitle,m=void 0===d||d,p=e.actions,f=void 0===p?["upload","delete","copy"]:p,h=(0,v.useIntl)(),g=(0,S.useRef)(null),y=(0,S.useRef)(0),j=(0,S.useCallback)(function(){var e=l()(a()().mark((function e(n){var t,r,l,o,i,u,d;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.clipboardData||window.clipboardData,r=t.items,l=[],o=a()().mark((function e(){var n,t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"file"===(n=r[i]).kind&&-1!==n.type.indexOf("image")?(t=n.getAsFile(),s=new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var r,a=null===(r=t.target)||void 0===r?void 0:r.result;a?e(a):n("Failed to convert image to base64")},r.readAsDataURL(t)})),l.push(s)):n.kind;case 2:case"end":return e.stop()}}),e)})),i=0;case 5:if(!(i<r.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:i++,e.next=5;break;case 10:return e.prev=10,e.next=13,Promise.all(l);case 13:(u=e.sent).length&&(d=Z().map(u,(function(e){return y.current+=1,{uid:y.current,dataUrl:e}})),null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:[].concat(T()(c.imgs||[]),T()(d))})),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10);case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(n){return e.apply(this,arguments)}}(),[c,s]),b=(0,S.useCallback)((function(e){null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:[].concat(T()(c.imgs||[]),T()(e))})}),[c,s]),k=function(e){var n=Z().filter(c.imgs,(function(n){return n.uid!==e}));null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:n})},M=(0,S.useCallback)((function(){var e;if(c.imgs&&(null===(e=c.imgs)||void 0===e?void 0:e.length)>0){var n=T()(c.imgs||[]).pop();n&&k(n.uid)}}),[c.imgs,k]),N=(0,S.useCallback)((function(e){var n;"Backspace"===e.key&&""===c.content&&c.imgs&&(null===(n=c.imgs)||void 0===n?void 0:n.length)>0&&(e.preventDefault(),M())}),[c,M]);return(0,q.jsxs)("div",{className:"content-item",children:[(0,q.jsxs)("div",{className:"content-item-role",style:{display:m||f.length?"flex":"none"},children:[m&&(0,q.jsx)("div",{className:"role",children:null!==(n=c.title)&&void 0!==n?n:h.formatMessage({id:"playground.".concat(c.role)})}),(0,q.jsxs)("div",{className:"actions",children:[f.includes("upload")&&c.role===A.G7.User&&(0,q.jsx)(U.Z,{handleUpdateImgList:b}),c.content&&f.includes("copy")&&(0,q.jsx)(z.Z,{text:c.content,size:"small",shape:"default",type:"text",fontSize:"12px"}),f.includes("delete")&&(0,q.jsx)(F.Z,{title:h.formatMessage({id:"common.button.delete"}),children:(0,q.jsx)(x.ZP,{size:"small",type:"text",onClick:o,icon:(0,q.jsx)(L.Z,{})})})]})]}),u?(0,q.jsxs)("div",{className:w()("message-content-input",{"has-img":null===(t=c.imgs)||void 0===t?void 0:t.length}),onClick:function(e){e.stopPropagation(),e.preventDefault(),g.current.focus()},children:[(0,q.jsx)(G.Z,{editable:u,dataList:c.imgs||[],onDelete:k}),(0,q.jsx)(D.Z.TextArea,{ref:g,value:c.content,variant:"filled",autoSize:{minRows:1},style:{borderRadius:"var(--border-radius-mini)"},readOnly:i,onKeyDown:N,onChange:function(e){null==s||s({imgs:c.imgs||[],role:c.role,content:e.target.value,uid:c.uid})},onPaste:function(e){e.clipboardData.getData("text")||(e.preventDefault(),j(e))}})]}):(0,q.jsxs)("div",{className:w()("content-item-content",{"has-img":null===(r=c.imgs)||void 0===r?void 0:r.length}),children:[(0,q.jsx)(G.Z,{editable:u,dataList:c.imgs||[],onDelete:k}),c.content&&(0,q.jsx)("div",{className:"text",children:c.content})]})]})},W=S.memo(V),B=function(e){var n=e.setMessageList,t=e.messageList,r=e.editable,a=e.showTitle,s=void 0===a||a,l=e.actions,o=void 0===l?["upload","delete","copy"]:l;return(0,q.jsx)(q.Fragment,{children:!!t.length&&(0,q.jsx)("div",{className:"message-content-list",children:t.map((function(e,a){return(0,q.jsx)(W,{data:e,editable:r,actions:o,showTitle:s,onDelete:function(){return function(e){var r=T()(t);r.splice(e,1),null==n||n(r)}(a)},updateMessage:function(e){return function(e,r){var a=T()(t);a[e]=r,null==n||n(a)}(a,e)}},e.uid)}))})})},H=S.memo(B),K=t(43943),Y=t(83603),J=t(76571),$=function(e){var n=e.systemMessage,t=e.showApplyToAll,r=e.setSystemMessage,a=e.style,s=e.applyToAll,l=(0,v.useIntl)(),o=(0,S.useState)(!1),c=i()(o,2),u=c[0],d=c[1],m=S.useRef(null),p=(0,S.useState)({minRows:1,maxRows:1,focus:!1}),f=i()(p,2),h=f[0],g=f[1],y=function(){g({minRows:4,maxRows:4,focus:!0}),setTimeout((function(){var e,n;null===(e=m.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),100)};return(0,S.useEffect)((function(){u&&(null==s||s(n))}),[u]),(0,q.jsxs)("div",{className:w()("sys-message",{focus:h.focus}),style:R()({},a),children:[(0,q.jsxs)("div",{style:{display:h.focus?"block":"none"},className:"textarea-wrapper",children:[(0,q.jsx)("span",{className:"system-label",children:l.formatMessage({id:"playground.systemMessage"})}),(0,q.jsx)(D.Z.TextArea,{className:"custome-scrollbar",ref:m,variant:"filled",placeholder:l.formatMessage({id:"playground.system.tips"}),style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:h.minRows,maxRows:h.maxRows},onFocus:y,onBlur:function(e){g({minRows:1,maxRows:1,focus:!1})},allowClear:!1,onChange:function(e){r(e.target.value),u&&(null==s||s(e.target.value))}}),t&&(0,q.jsxs)("span",{className:"apply-check",onMouseDown:function(e){e.preventDefault(),d(!u)},children:[(0,q.jsx)("span",{className:"m-r-5",children:l.formatMessage({id:"playground.compare.applytoall"})}),(0,q.jsx)(Y.Z,{checked:u})]}),(0,q.jsx)(J.Z,{style:{margin:"0"}})]}),!h.focus&&(0,q.jsxs)("div",{className:"sys-content-wrap",onClick:y,children:[(0,q.jsxs)("div",{className:"sys-content",children:[(0,q.jsx)("span",{className:"title",children:l.formatMessage({id:"playground.systemMessage"})}),n||(0,q.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:l.formatMessage({id:"playground.system.tips"})})]}),n&&(0,q.jsx)(F.Z,{title:l.formatMessage({id:"common.button.clear"}),children:(0,q.jsx)(x.ZP,{className:"clear-btn",type:"text",icon:(0,q.jsx)(K.Z,{}),size:"small",onClick:function(){r("")}})})]})]})},Q=S.memo($),X=t(82092),ee=t.n(X),ne=t(75489),te=t(92233),re=t(42779),ae=t(13770),se=t(4423),le=t(68476),oe=t(40474),ie=t(96247),ce=t(26938),ue=function(e){var n=e.selectedModel,t=e.setParams,r=e.globalParams,a=e.onValuesChange,s=e.modelList,l=e.showModelSelector,o=void 0===l||l,c=(0,v.useIntl)(),u=R()({seed:null,stop:null,temperature:1,top_p:1,max_tokens:1024},r),d=le.Z.useForm(),m=i()(d,1)[0],p=(0,S.useId)();(0,S.useEffect)((function(){o?(m.setFieldsValue(R()(R()({},u),{},{model:n||Z().get(s,"[0].value")})),t(R()(R()({},u),{},{model:n||Z().get(s,"[0].value")}))):(m.setFieldsValue(R()(R()({},u),{},{model:n||""})),t(R()(R()({},u),{},{model:n||""})))}),[s,o,n]);var f=(0,S.useCallback)((function(e,n){null==t||t(n),null==a||a(e,n)}),[a,t]),h=(0,S.useCallback)((function(e,n){var r=m.getFieldsValue();m.setFieldsValue(R()(R()({},r),{},ee()({},n,e))),t(R()(R()({},r),{},ee()({},n,e))),null==a||a(ee()({},n,e),R()(R()({},r),{},ee()({},n,e)))}),[m,t,a]);(0,S.useEffect)((function(){m.setFieldsValue(r)}),[r]);var g=function(e){return(0,q.jsxs)("span",{className:ce.Z.label,style:{width:ae.d.mini},children:[(0,q.jsx)("span",{className:"text",children:e.description?(0,q.jsxs)(F.Z,{title:e.description,children:[(0,q.jsxs)("span",{children:[" ",e.label]}),(0,q.jsx)("span",{className:"m-l-5",children:(0,q.jsx)(se.Z,{})})]}):(0,q.jsx)("span",{children:e.label})}),(0,q.jsx)(oe.Z,{className:"label-val",variant:"outlined",size:"small",value:m.getFieldValue(e.field),controls:!1,onChange:function(n){return h(n,e.field)}})]})};return(0,q.jsx)(le.Z,{name:p,form:m,onValuesChange:f,onFinish:function(e){},onFinishFailed:function(e){},children:(0,q.jsxs)("div",{children:[o&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("h3",{className:"m-b-20 m-l-10 font-size-14 line-24",children:c.formatMessage({id:"playground.model"})}),(0,q.jsx)(le.Z.Item,{name:"model",rules:[{required:!0,message:c.formatMessage({id:"common.form.rule.select"},{name:c.formatMessage({id:"playground.model"})})}],children:(0,q.jsx)(re.Z,{showSearch:!0,options:s})})]}),(0,q.jsx)("h3",{className:"m-b-20 m-l-10 flex-between flex-center font-size-14 line-24",children:(0,q.jsx)("span",{children:c.formatMessage({id:"playground.parameters"})})}),(0,q.jsx)(le.Z.Item,{name:"temperature",rules:[{required:!1}],children:(0,q.jsx)(ne.Z,{label:g({field:"temperature",label:"Temperature",description:c.formatMessage({id:"playground.params.temperature.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,q.jsx)(ie.Z,{defaultValue:1,max:2,step:.1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("temperature")||void 0,onChange:function(e){return h(e,"temperature")}})})}),(0,q.jsx)(le.Z.Item,{name:"max_tokens",rules:[{required:!1}],children:(0,q.jsx)(ne.Z,{label:g({field:"max_tokens",label:"Max Tokens",description:c.formatMessage({id:"playground.params.maxtokens.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,q.jsx)(ie.Z,{defaultValue:2048,max:16384,step:1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("max_tokens")||void 0,onChange:function(e){return h(e,"max_tokens")}})})}),(0,q.jsx)(le.Z.Item,{name:"top_p",rules:[{required:!1}],children:(0,q.jsx)(ne.Z,{label:g({field:"top_p",label:"Top P",description:c.formatMessage({id:"playground.params.topp.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,q.jsx)(ie.Z,{defaultValue:1,max:1,step:.1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("top_p")||void 0,onChange:function(e){return h(e,"top_p")}})})}),(0,q.jsx)(le.Z.Item,{name:"seed",rules:[{required:!1}],children:(0,q.jsx)(te.Z.Number,{label:"Seed",min:0,description:c.formatMessage({id:"playground.params.seed.tips"}),style:{width:ae.d.mini}})}),(0,q.jsx)(le.Z.Item,{name:"stop",rules:[{required:!1}],normalize:function(e){return e||null},children:(0,q.jsx)(te.Z.Input,{allowClear:!0,label:"Stop Sequence",description:c.formatMessage({id:"playground.params.stop.tips"}),style:{width:ae.d.mini}})})]})})},de=(0,S.memo)(ue),me=t(78093),pe=t(87497),fe=function(e){var n=(0,v.useIntl)(),t=e.usage,r=e.showOutput,a=void 0===r||r,s=e.scaleable,l=e.fields,o=void 0===l?["completion_tokens","prompt_tokens"]:l;return!t||Z().isEmpty(t)?null:t.error?(0,q.jsxs)(pe.Z.Paragraph,{type:"danger",ellipsis:{rows:2,tooltip:null==t?void 0:t.errorMessage},style:{textAlign:"center",paddingBlock:0,margin:0,backgroundColor:"var(--ant-color-error-bg)"},children:[(0,q.jsx)(me.Z,{className:"m-r-8"}),null==t?void 0:t.errorMessage]}):(0,q.jsxs)("div",{className:w()("reference-params",{scaleable:s}),children:[(0,q.jsx)("span",{className:w()("usage",{scaleable:s}),children:(0,q.jsx)(F.Z,{title:(0,q.jsxs)(g.Z,{children:[o.includes("completion_tokens")&&(0,q.jsxs)("span",{children:[n.formatMessage({id:"playground.completion"}),":"," ",t.completion_tokens]}),o.includes("prompt_tokens")&&(0,q.jsxs)("span",{children:[n.formatMessage({id:"playground.prompt"}),":"," ",t.prompt_tokens]})]}),children:(0,q.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenusage"}),":"," ",t.total_tokens]})})}),a&&(0,q.jsx)("span",{className:w()("usage",{scaleable:s}),children:(0,q.jsx)(F.Z,{title:(0,q.jsxs)(g.Z,{children:[(0,q.jsxs)("span",{children:["TPOT: ",Z().round(t.time_per_output_token_ms,2)||0," ms"]}),(0,q.jsxs)("span",{children:["TTFT: ",Z().round(t.time_to_first_token_ms,2)||0," ms"]})]}),children:(0,q.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenoutput"}),":"," ",Z().round(t.tokens_per_second,2)||0," Tokens/s"]})})})]})},he=t(31759),ve=t.n(he),ge=t(16850),xe=t(16333),ye=t(90515),je=t(1956),be="bash",we="python",ke="javascript",Ze=[{label:"Curl",value:be},{label:"Python",value:we},{label:"Nodejs",value:ke}],Se=function(e){var n=e||{},t=n.title,r=n.open,a=n.api,s=n.clientType,l=n.logcommand,o=n.onCancel,c=n.payload,u=n.parameters,d=void 0===u?{}:u,m=(0,v.useIntl)(),p=(0,S.useState)(be),f=i()(p,2),h=f[0],g=f[1],y="".concat(window.location.origin,"/v1-openai"),j=(0,S.useMemo)((function(){var e=l?"console.log(response.".concat(l,");\n"):"",n=l?"print(response.".concat(l,")"):"";if(h===be)return"curl ".concat(window.location.origin,"/v1-openai/").concat(a,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n-d \'').concat(JSON.stringify(R()(R()({},d),c),null,2),"'");if(h===ke)return'const OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(y,'"\n});\n\nasync function main(){\n  const params = ').concat(JSON.stringify(R()(R()({},d),c),null,4),";\nconst response = await openai.").concat(s,"(params);\n  ").concat(e,"}\nmain();");if(h===we){var t=Z().keys(d).reduce((function(e,n){if(null===d[n])return e;var t="string"==typeof d[n]?'"'.concat(d[n],'"'):d[n];return e+"  ".concat(n,"=").concat(t,",\n")}),""),r=function(e){return Z().keys(e).reduce((function(n,t){if(null===e[t])return n;var r="object"===ve()(e[t])?JSON.stringify(e[t],null,2):'"'.concat(e[t],'"');return n+"  ".concat(t,"=").concat(r,",\n")}),"")}(c);return'from openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(y,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.').concat(s,"(\n").concat(t).concat(r,")\n").concat(n)}return""}),[h,c,d,a,s,l]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(je.Z,{title:t,open:r,centered:!0,onCancel:function(){g(be),o()},destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:[(0,q.jsx)("div",{style:{marginBottom:"10px"},children:m.formatMessage({id:"playground.viewcode.info"})}),(0,q.jsxs)("div",{children:[(0,q.jsx)(ge.Z,{copyText:j,langOptions:Ze,defaultValue:be,showHeader:!0,onChangeLang:function(e){g(e)},styles:{wrapper:{backgroundColor:"var(--color-editor-dark)"}},children:(0,q.jsx)("div",{style:{paddingRight:2,paddingBottom:2},children:(0,q.jsx)(xe.Z,{height:380,theme:"dark",code:j,lang:h,copyable:!1})})}),(0,q.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"baseline"},children:[(0,q.jsx)(ye.Z,{className:"m-r-8"}),(0,q.jsx)("span",{children:m.formatMessage({id:"playground.viewcode.tips"},{here:(0,q.jsx)(x.ZP,{type:"link",size:"small",href:"#/api-keys",target:"_blank",style:{paddingInline:2},children:(0,q.jsxs)("span",{children:[" ",m.formatMessage({id:"playground.viewcode.here"})]})})})})]})]})]})})},Me=S.memo(Se),Ne=(0,S.forwardRef)((function(e,n){var t=e.modelList,r=(0,S.useRef)(0),s=(0,S.useState)([]),o=i()(s,2),c=o[0],u=o[1],d=(0,v.useIntl)(),m=(0,v.useSearchParams)(),p=i()(m,1)[0].get("model")||"",f=(0,S.useState)({}),h=i()(f,2),g=h[0],x=h[1],y=(0,S.useState)(""),j=i()(y,2),b=j[0],k=j[1],M=(0,S.useState)(!1),C=i()(M,2),P=C[0],z=C[1],L=(0,S.useState)(!1),F=i()(L,2),D=F[0],G=F[1],U=(0,S.useState)(null),V=i()(U,2),W=V[0],B=V[1],K=(0,S.useState)(!1),Y=i()(K,2),J=Y[0],$=Y[1],X=(0,S.useRef)(""),ee=(0,S.useRef)(null),ne=(0,S.useRef)(null),te=(0,S.useRef)(null),re=(0,S.useRef)(null),ae=(0,S.useRef)(0),se=(0,_.Z)(),le=se.initialize,oe=se.updateScrollerPosition,ie=(0,_.Z)().initialize;(0,S.useImperativeHandle)(n,(function(){return{viewCode:function(){z(!0)},setCollapse:function(){$(!J)},collapse:J}}));var ce=(0,S.useMemo)((function(){return(0,A.kA)([{role:A.G7.System,content:b}].concat(T()(c)))}),[c,b]),ue=function(){r.current=r.current+1},me=function(e){var n;B(R()({},null!==(n=null==e?void 0:e.usage)&&void 0!==n?n:{})),e&&Z().get(e,"choices",[]).length&&(X.current=X.current+Z().get(e,"choices.0.delta.content",""),u([].concat(T()(c),T()(te.current),[{role:A.G7.Assistant,content:X.current,uid:r.current}])))},pe=function(){var e=l()(a()().mark((function e(n){var t,s,l,o,i,d,m,p,f,h,v;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.model){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,G(!0),ue(),B(null),null===(t=ee.current)||void 0===t||null===(s=t.abort)||void 0===s||s.call(t),ee.current=new AbortController,l=ee.current.signal,te.current=n?[R()(R()({},n),{},{uid:r.current})]:[],X.current="",u((function(e){return[].concat(T()(e),T()(te.current))})),o=[{role:A.G7.System,content:b}].concat(T()(c),T()(te.current)),i=(0,A.kA)(o),d=R()(R()({messages:i},g),{},{stream:!0,stream_options:{include_usage:!0}}),e.next=17,(0,O.U3)({data:d,url:N.qt,signal:l});case 17:if(null==(m=e.sent)||!m.error){e.next=21;break}return B({error:!0,errorMessage:(null==m||null===(p=m.data)||void 0===p||null===(p=p.error)||void 0===p?void 0:p.message)||(null==m||null===(f=m.data)||void 0===f?void 0:f.message)||""}),e.abrupt("return");case 21:return ue(),h=m.reader,v=m.decoder,e.next=25,(0,O.LN)(h,v,(function(e){var n;null!=e&&e.error?B({error:!0,errorMessage:(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||""}):me(e)}));case 25:e.next=29;break;case 27:e.prev=27,e.t0=e.catch(2);case 29:return e.prev=29,G(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,27,29,32]])})));return function(n){return e.apply(this,arguments)}}();return(0,S.useEffect)((function(){ne.current&&le(ne.current)}),[ne.current,le]),(0,S.useEffect)((function(){re.current&&ie(re.current)}),[re.current,ie]),(0,S.useEffect)((function(){D&&oe()}),[c,D]),(0,S.useEffect)((function(){c.length>ae.current&&oe(),ae.current=c.length}),[c.length]),(0,q.jsxs)("div",{className:"ground-left-wrapper",children:[(0,q.jsxs)("div",{className:"ground-left",children:[(0,q.jsx)("div",{className:"message-list-wrap",ref:ne,children:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{style:{marginBottom:20},children:(0,q.jsx)(Q,{style:{borderRadius:"var(--border-radius-mini)",overflow:"hidden"},systemMessage:b,setSystemMessage:k})}),(0,q.jsxs)("div",{className:"content",children:[(0,q.jsx)(H,{messageList:c,setMessageList:u,editable:!0,loading:D}),D&&(0,q.jsx)(I.Z,{size:"small",children:(0,q.jsx)("div",{style:{height:"46px"}})})]})]})}),W&&(0,q.jsx)("div",{style:{height:40},children:(0,q.jsx)(fe,{usage:W})}),(0,q.jsx)("div",{className:"ground-left-footer",children:(0,q.jsx)(E.Z,{defaultSize:{minRows:5,maxRows:5},loading:D,disabled:!g.model,isEmpty:!c.length,handleSubmit:function(e){var n,t=e.content||null!==(n=e.imgs)&&void 0!==n&&n.length?e:void 0;pe(t)},addMessage:function(e){var n,t=e||{role:(null===(n=Z().last(c))||void 0===n?void 0:n.role)===A.G7.User?A.G7.Assistant:A.G7.User,content:""};c.push(R()(R()({},t),{},{uid:r.current+1})),ue(),u(T()(c))},handleAbortFetch:function(){var e,n;null===(e=ee.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),G(!1)},clearAll:function(){c.length&&(ue(),u([]),B(null))},setModelSelections:function(){},presetPrompt:function(e){var n,t=e.filter((function(e){return"system"===e.role})),a=e.filter((function(e){return"user"===e.role})).map((function(e){return ue(),R()(R()({},e),{},{uid:r.current})}));k((null===(n=t[0])||void 0===n?void 0:n.content)||""),u(a)}})})]}),(0,q.jsx)("div",{className:w()("params-wrapper",{collapsed:J}),ref:re,children:(0,q.jsx)("div",{className:"box",children:(0,q.jsx)(de,{setParams:x,params:g,selectedModel:p,modelList:t})})}),(0,q.jsx)(Me,R()(R()({},A.NW.chat),{},{open:P,payload:{messages:ce},parameters:g,onCancel:function(){z(!1)},title:d.formatMessage({id:"playground.viewcode"})}))]})})),Ce=(0,S.memo)(Ne),Re=S.createContext({}),Pe=t(23010),Te=function(e){var n=e.style,t=(0,v.useIntl)();(0,v.useNavigate)();return(0,q.jsx)("div",{className:"flex-center  justify-center",style:R()({},n),children:(0,q.jsx)(Pe.Z,{image:Pe.Z.PRESENTED_IMAGE_SIMPLE,description:(0,q.jsx)("div",{className:"flex-column",children:(0,q.jsx)(pe.Z.Text,{type:"secondary",children:t.formatMessage({id:"playground.model.noavailable"})})})})})},_e=t(81745),Oe=t(7922),Ie=t(33883),Ae=t(51076),Ee=t(69070),ze=t(1404),Le=t(43211),Fe=t(60857),De=t(8964),Ge=t(40918),Ue=(0,S.forwardRef)((function(e,n){var t=e.model,r=e.modelList,s=e.instanceId,o=(0,S.useContext)(Re),u=o.globalParams,d=o.setGlobalParams,m=o.setLoadingStatus,p=o.handleDeleteModel,f=o.handleApplySystemChangeToAll,h=o.modelFullList,g=o.loadingStatus,y=(0,v.useIntl)(),j=(0,S.useRef)(!1),b=(0,S.useState)(""),w=i()(b,2),k=w[0],M=w[1],C=(0,S.useState)({model:t}),P=i()(C,2),E=P[0],z=P[1],L=(0,S.useState)(!1),F=i()(L,2),D=F[0],G=(F[1],(0,S.useRef)(0)),U=(0,S.useState)([]),V=i()(U,2),W=V[0],B=V[1],K=(0,S.useState)(null),J=i()(K,2),$=J[0],X=J[1],ee=(0,S.useState)(!1),ne=i()(ee,2),te=ne[0],re=ne[1],ae=(0,S.useRef)(""),se=(0,S.useRef)(null),le=(0,S.useRef)([]),oe=(0,S.useRef)(null),ie=(0,S.useRef)(0),ce=(0,_.Z)(),ue=ce.initialize,me=ce.updateScrollerPosition,pe=(0,S.useMemo)((function(){return(0,A.kA)([{role:A.G7.System,content:k}].concat(T()(W)))}),[W,k]),he=function(){G.current=G.current+1},ve=function(){var e,n;null===(e=se.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),m(s,!1)},ge=function(e){var n;X(R()({},null!==(n=null==e?void 0:e.usage)&&void 0!==n?n:{})),e&&Z().get(e,"choices",[].length)&&(ae.current=ae.current+Z().get(e,"choices.0.delta.content",""),B([].concat(T()(W),T()(le.current),[{role:A.G7.Assistant,content:ae.current,uid:G.current}])))},xe=function(){var e=l()(a()().mark((function e(n){var t,r,l,o,i,c,u,d,p,f,h;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.model){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(s,!0),he(),null===(t=se.current)||void 0===t||null===(r=t.abort)||void 0===r||r.call(t),se.current=new AbortController,l=se.current.signal,le.current=n?[R()(R()({},n),{},{uid:G.current})]:[],B((function(e){return[].concat(T()(e),T()(le.current))})),ae.current="",o=[{role:A.G7.System,content:k}].concat(T()(W),T()(le.current)),i=(0,A.kA)(o),c=R()(R()({messages:i},E),{},{stream:!0,stream_options:{include_usage:!0}}),e.next=16,(0,O.U3)({data:c,url:N.qt,signal:l});case 16:if(null==(u=e.sent)||!u.error){e.next=20;break}return X({error:!0,errorMessage:(null==u||null===(d=u.data)||void 0===d||null===(d=d.error)||void 0===d?void 0:d.message)||(null==u||null===(p=u.data)||void 0===p?void 0:p.message)||""}),e.abrupt("return");case 20:return he(),f=u.reader,h=u.decoder,e.next=24,(0,O.LN)(f,h,(function(e){var n;null!=e&&e.error?X({error:!0,errorMessage:(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||""}):ge(e)}));case 24:e.next=28;break;case 26:e.prev=26,e.t0=e.catch(2);case 28:return e.prev=28,m(s,!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,26,28,31]])})));return function(n){return e.apply(this,arguments)}}(),ye=function(e){var n,t=e.content||null!==(n=e.imgs)&&void 0!==n&&n.length?e:void 0;xe(t)},je=(0,S.useCallback)((function(e,n){j.current?(z(R()(R()({},E),n)),d(R()({},n))):z(R()(R()({},E),e))}),[E,j.current]),be=function(){B([]),X(null),le.current=[]},we=function(e){he(),B((function(n){return[].concat(T()(n),[R()(R()({},e),{},{uid:G.current})])}))},ke=function(e){le.current=[];var n=Z().map(e,(function(e){return he(),{role:e.role,content:e.content,uid:G.current}}));X(null),B(n)},Ze=((0,S.useMemo)((function(){return h.filter((function(e){return"empty"!==e.type}))}),[h]),(0,S.useMemo)((function(){var e=[{label:y.formatMessage({id:"common.button.clear"}),key:"clear",icon:(0,q.jsx)(Ae.Z,{}),danger:!1,onClick:function(){B([]),M("")}},{label:y.formatMessage({id:"playground.viewcode"}),key:"viewcode",icon:(0,q.jsx)(c.Z,{type:"icon-code"}),onClick:function(){re(!0)}}];return r.length>2&&e.push({label:y.formatMessage({id:"common.button.delete"}),key:"delete",icon:(0,q.jsx)(Ee.Z,{}),danger:!0,onClick:function(){p(s)}}),e}),[r,y]));return(0,S.useEffect)((function(){z(R()(R()({},E),u))}),[u]),(0,S.useEffect)((function(){return function(){ve()}}),[]),(0,S.useEffect)((function(){oe.current&&ue(oe.current)}),[oe.current,ue]),(0,S.useEffect)((function(){g[s]&&me()}),[W]),(0,S.useEffect)((function(){W.length>ie.current&&me(),ie.current=W.length}),[W.length]),(0,S.useImperativeHandle)(n,(function(){return{submit:ye,abortFetch:ve,addNewMessage:we,clear:be,presetPrompt:ke,setSystemMessage:M,loading:D}})),(0,q.jsxs)("div",{className:"model-item",children:[(0,q.jsxs)("div",{className:"header",children:[(0,q.jsx)("span",{className:"title",children:(0,q.jsx)(Fe.default,{style:{width:"100%"},variant:"borderless",options:h,onChange:function(e){z(R()(R()({},E),{},{model:e})),be()},value:E.model,labelRender:function(e){return(0,q.jsx)(Ie.Z,{ghost:!0,tooltipProps:{placement:"right"},minWidth:60,maxWidth:180,children:e.label})},optionRender:function(e){return(0,q.jsx)(Ie.Z,{ghost:!0,tooltipProps:{placement:"right"},minWidth:60,maxWidth:180,children:e.label})}})}),(0,q.jsx)(fe,{usage:$,scaleable:!0}),(0,q.jsxs)("span",{className:"action",children:[(0,q.jsx)(De.Z,{menu:{items:Ze},placement:"bottomRight",children:(0,q.jsx)(x.ZP,{type:"text",icon:(0,q.jsx)(ze.Z,{style:{fontSize:"14px"}}),size:"small"})}),(0,q.jsx)(Ge.Z,{placement:"bottomRight",content:(0,q.jsx)(de,{showModelSelector:!1,setParams:z,modelList:r,globalParams:u,selectedModel:E.model,onValuesChange:je}),trigger:["click"],arrow:!1,fresh:!0,title:(0,q.jsx)("div",{children:(0,q.jsx)(Y.Z,{onChange:function(e){j.current=e.target.checked,e.target.checked&&d(R()({},Z().omit(E,"model")))},children:y.formatMessage({id:"playground.compare.applytoall"})})}),children:(0,q.jsx)(x.ZP,{type:"text",icon:(0,q.jsx)(Le.Z,{}),size:"small"})})]})]}),(0,q.jsx)(Q,{showApplyToAll:!0,systemMessage:k,applyToAll:f,setSystemMessage:M}),(0,q.jsx)("div",{className:"content",ref:oe,children:(0,q.jsxs)("div",{children:[(0,q.jsx)(H,{messageList:W,setMessageList:B,editable:!0}),(0,q.jsx)(I.Z,{spinning:!!g[s],size:"small",style:{width:"100%"}})]})}),(0,q.jsx)(Me,R()(R()({},A.NW.chat),{},{open:te,payload:{messages:pe},parameters:E,onCancel:function(){re(!1)},title:y.formatMessage({id:"playground.viewcode"})}))]})})),qe=S.memo(Ue),Ve=function(e){var n=e.spans,t=e.modelSelections,r=e.setModelRefs;return(0,q.jsx)(_e.Z,{gutter:[16,0],style:{height:"100%"},children:t.map((function(e,a){return(0,q.jsx)(Oe.Z,{span:n.span,style:{height:n.count<4?"calc(100% - 16px)":"calc(50% - 16px)"},children:(0,q.jsx)(qe,{ref:function(n){return r(e.instanceId,n)},instanceId:e.instanceId,modelList:t,model:e.value},"".concat(e.value||"empty","-").concat(e.uid))},"".concat(e.value||"empty","-").concat(e.uid))}))})},We=S.memo(Ve),Be=function(e){var n=e.modelList,t=e.loaded,r=(0,_.Z)().initialize,s=(0,S.useState)({}),o=i()(s,2),c=o[0],u=o[1],d=(0,S.useState)([]),m=i()(d,2),p=m[0],f=m[1],h=(0,S.useState)({seed:null,stop:null,temperature:1,top_p:1,max_tokens:1024}),v=i()(h,2),g=v[0],x=v[1],y=(0,S.useState)({span:12,count:2}),j=i()(y,2),b=j[0],w=j[1],k=(0,S.useRef)({}),M=(0,S.useRef)({}),N=(0,S.useRef)(null),C=(0,S.useMemo)((function(){return Object.getOwnPropertySymbols(c).some((function(e){return c[e]}))}),[c]),P=((0,S.useMemo)((function(){return n.map((function(e){return R()(R()({},e),{},{disabled:p.some((function(n){return n.value===e.value}))})}))}),[n,p]),function(e){return k.current[e]=Z().add(k.current[e],1),k.current[e]}),T=(0,S.useCallback)((function(e,n){M.current[e]=n}),[]);return(0,S.useEffect)((function(){M.current={};var e=Z().take(n,b.count);if(e.length<b.count&&e.length>0){var t=b.count-e.length,r=Array.from({length:t},(function(e,n){return{label:"",value:"",type:"empty"}}));e=Z().concat(e,r)}var a=e.map((function(e){return R()(R()({},e),{},{uid:P(e.value||"empty"),instanceId:"empty"===e.type?Symbol("empty"):Symbol(e.value)})}));f(a)}),[n]),(0,S.useEffect)((function(){N.current&&r(N.current)}),[N.current,r]),(0,q.jsxs)("div",{className:"multiple-chat",style:{height:"calc(100vh - 72px)"},children:[(0,q.jsx)("div",{className:"chat-list",ref:N,children:n.length>0?(0,q.jsx)(Re.Provider,{value:{spans:b,globalParams:g,loadingStatus:c,modelFullList:n,handleApplySystemChangeToAll:function(e){Object.getOwnPropertySymbols(M.current).forEach((function(n){var t=M.current[n];null==t||t.setSystemMessage(e)}))},setGlobalParams:x,setLoadingStatus:function(e,n){u((function(t){var r=R()({},t);return r[e]=n,r}))},handleDeleteModel:function(e){var n,t=p.filter((function(n){return n.instanceId!==e}));!function(e){M.current[e]=null,c[e]=!1}(e),n=b.count-1,6===b.count?w({span:8,count:n}):5===b.count?w({span:12,count:n}):4===b.count?w({span:8,count:n}):3===b.count&&w({span:12,count:n}),f(t)}},children:(0,q.jsx)(We,{spans:b,modelSelections:p,setModelRefs:T})}):t&&(0,q.jsx)(Te,{style:{height:"100%",paddingBottom:60}})}),(0,q.jsx)("div",{children:(0,q.jsx)(E.Z,{loading:C,disabled:C||!p.length||!n.length,handleSubmit:function(e){Object.getOwnPropertySymbols(M.current).forEach((function(n){var t=M.current[n];null==t||t.submit(e)}))},addMessage:function(e){Object.getOwnPropertySymbols(M.current).forEach((function(n){var t=M.current[n];null==t||t.addNewMessage(e)}))},handleAbortFetch:function(){Object.getOwnPropertySymbols(M.current).forEach((function(e){var n=M.current[e];null==n||n.abortFetch()}))},clearAll:function(){Object.getOwnPropertySymbols(M.current).forEach((function(e){var n=M.current[e];null==n||n.clear()}))},updateLayout:function(e){w(e),function(e){var t=p;if(t.length<e.count){var r=e.count-t.length,a=Z().slice(n,t.length,t.length+r),s=Array.from({length:r-a.length},(function(e,n){return{label:"",value:"",type:"empty"}})),l=Z().concat(a,s).map((function(e){return R()(R()({},e),{},{uid:P(e.value||"empty"),instanceId:"empty"===e.type?Symbol("empty"):Symbol(e.value)})}));f(Z().concat(t,l))}else if(t.length>e.count){var o=t.slice(0,e.count);f(o)}}(e)},setModelSelections:function(e){var n=e.map((function(e){return R()(R()({},e),{},{uid:P(e.value),instanceId:Symbol(e.value)})})),t=Z().concat(p,n),r=Math.floor(24/t.length);w({span:r<8?8:r,count:b.count}),f(t)},presetPrompt:function(e){var n=e.filter((function(e){return"system"===e.role})),t=e.filter((function(e){return"user"===e.role}));Object.getOwnPropertySymbols(M.current).forEach(function(){var e=l()(a()().mark((function e(r){var s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(s=M.current[r])||s.presetPrompt(t),null==s||s.setSystemMessage(Z().get(n,"0.content",""));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},defaultSize:{minRows:5,maxRows:5}})})]})},He=(0,S.memo)(Be),Ke=(t(20988),function(){var e=(0,v.useIntl)(),n=(0,m.Z)().size,t=(0,S.useState)("chat"),r=i()(t,2),s=r[0],o=r[1],b=(0,S.useRef)(null),k=(0,S.useRef)(null),C=(0,S.useState)([]),R=i()(C,2),P=R[0],T=R[1],_=(0,S.useState)(!1),O=i()(_,2),I=O[0],A=O[1],E=[{label:e.formatMessage({id:"menu.playground.chat"}),value:"chat",icon:(0,q.jsx)(p.Z,{})},{label:e.formatMessage({id:"menu.compare"}),value:"compare",icon:(0,q.jsx)(f.Z,{})}],z=(0,S.useCallback)((function(){var e,n;if("reranker"===s)null===(e=k.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e);else if("chat"===s){var t,r;null===(t=b.current)||void 0===t||null===(r=t.viewCode)||void 0===r||r.call(t)}}),[b,k,s]),L=(0,S.useCallback)((function(){var e,n,t,r;"reranker"!==s?null===(e=b.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e):null===(t=k.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t)}),[b,k,s]),F=[{key:"chat",label:"Chat",children:(0,q.jsx)(Ce,{ref:b,modelList:P})},{key:"compare",label:"Compare",children:(0,q.jsx)(He,{modelList:P,loaded:I})}];(0,S.useEffect)((function(){var e,t,r;n.width<u.Z.lg&&(null!==(e=b.current)&&void 0!==e&&e.collapse||null===(t=b.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t))}),[n.width]),(0,S.useEffect)((function(){var e=function(){var e=l()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={embedding_only:!1,image_only:!1,reranker:!1,text_to_speech:!1,speech_to_text:!1},e.next=4,(0,N.nb)(n);case 4:return t=e.sent,r=Z().map(t.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(a()().mark((function n(){var t;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:t=n.sent,T(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),A(!0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,M.y1)(d.ZP.RIGHT.join(","),(function(){var e,n;null===(e=b.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),{preventDefault:!0}),(0,q.jsx)(h._z,{ghost:!0,header:{title:(0,q.jsxs)("div",{className:"flex items-center",children:[(0,q.jsx)("span",{className:"font-600",children:e.formatMessage({id:"menu.playground.chat"})}),(0,q.jsx)(y.Z,{options:E,size:"middle",className:"m-l-40",onChange:function(e){return o(e)}})]}),breadcrumb:{}},extra:"compare"!==s&&(0,q.jsxs)(g.Z,{children:[(0,q.jsx)(x.ZP,{size:"middle",onClick:z,icon:(0,q.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,q.jsx)(x.ZP,{size:"middle",onClick:L,icon:(0,q.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:w()("playground-container",{compare:"compare"===s,chat:"compare"!==s}),children:(0,q.jsx)("div",{className:"play-ground",children:(0,q.jsx)("div",{className:"chat",children:(0,q.jsx)(j.Z,{items:F,activeKey:s})})})})})},81117:function(e,n,t){t.d(n,{LN:function(){return h},U3:function(){return f},YT:function(){return g}});var r=t(335),a=t.n(r),s=t(90228),l=t.n(s),o=t(26068),i=t.n(o),c=t(87999),u=t.n(c),d=t(55360),m=/data:\s*({.*?})(?=\n|$)/g,p=function(e){var n,t=[];if(!e)return t;for(;null!==(n=m.exec(e));)try{var r=JSON.parse(n[1]);t.push(r)}catch(e){continue}return t},f=function(){var e=u()(l()().mark((function e(n){var t,r,a,s,o,c;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.method||"POST",a=n.url,n.params&&(a="".concat(a,"?").concat(d.Z.stringify(n.params))),e.next=5,fetch(a,{method:r,body:"POST"===r?JSON.stringify(n.data):null,signal:n.signal,headers:i()({"Content-Type":"application/json"},n.headers)});case 5:if((s=e.sent).ok){e.next=12;break}return e.next=10,s.json();case 10:return e.t0=e.sent,e.abrupt("return",{error:!0,data:e.t0});case 12:return o=null==s||null===(t=s.body)||void 0===t?void 0:t.getReader(),c=new TextDecoder("utf-8",{fatal:!0}),e.abrupt("return",{reader:o,decoder:c});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=u()(l()().mark((function e(n,t,r){var a,s,o,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(a=e.sent,s=a.done,o=a.value,!s){e.next=7;break}return e.abrupt("return");case 7:return i=t.decode(o,{stream:!0}),p(i).forEach((function(e){null==r||r(e)})),e.next=11,h(n,t,r);case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(e,n){var t,r=e.split("\n"),s=a()(r);try{for(s.s();!(t=s.n()).done;){var l=t.value;if(l.startsWith("data: ")){var o=l.slice(6).trim();try{n(JSON.parse(o))}catch(e){}}}}catch(e){s.e(e)}finally{s.f()}},g=function(){var e=u()(l()().mark((function e(n,t,r){var s,o,i,c,u,d,m,p,f,h,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s="";case 1:return e.next=4,null==n||null===(o=n.read)||void 0===o?void 0:o.call(n);case 4:if(i=e.sent,c=i.done,u=i.value,!c){e.next=10;break}return s.trim()&&v(s,r),e.abrupt("break",17);case 10:s+=t.decode(u,{stream:!0}),d=s.split("\n"),s=d.pop()||"",m=a()(d);try{for(m.s();!(p=m.n()).done;)if((f=p.value).startsWith("data: ")){h=f.slice(6).trim();try{"[DONE]"!==h&&(g=JSON.parse(h),r(g))}catch(e){}}}catch(e){m.e(e)}finally{m.f()}e.next=1;break;case 17:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()},26938:function(e,n){n.Z={label:"label___Im6e1"}},51662:function(){},20988:function(){}}]);