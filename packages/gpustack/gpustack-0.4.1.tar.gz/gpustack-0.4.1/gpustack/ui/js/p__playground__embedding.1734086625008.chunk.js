"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{33883:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),i=t.n(r),a=t(48305),l=t.n(a),s=t(67825),o=t.n(s),c=t(23333),u=t(76808),d=t(32699),f=t(50959),p=t(571),m=t(11527),h=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,i=e.children,a=(0,p.Z)().initialize,l=f.useRef(null);return f.useEffect((function(){l.current&&a(l.current)}),[a,l.current]),(0,m.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,m.jsx)("div",{style:{width:"max-content",maxWidth:250,paddingInline:10},children:n||t?r||i:""})})},x=f.memo(h),v=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],g=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,a=e.minWidth,s=e.ghost,p=void 0!==s&&s,h=e.title,g=e.showTitle,y=void 0!==g&&g,b=e.tooltipProps,j=o()(e,v),w=(0,f.useRef)(null),C=(0,f.useState)(!1),N=l()(C,2),k=N[0],S=N[1],Z=((0,f.useRef)(),(0,f.useCallback)((function(){if(w.current){var e=w.current,n=e.scrollWidth,t=e.clientWidth;S(n>t)}}),[w.current]));(0,f.useEffect)((function(){var e=(0,d.throttle)(Z,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[Z]),(0,f.useEffect)((function(){Z()}),[n,Z]);var R=(0,f.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},j.style)}),[r,j.style]);return(0,m.jsx)(c.Z,i()(i()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:k||y?(0,m.jsx)(x,{isOverflowing:k,title:h,showTitle:y,children:n}):""},b),{},{children:p?(0,m.jsx)("div",{ref:w,style:R,children:n}):(0,m.jsx)(u.Z,i()(i()({},j),{},{ref:w,style:R,children:n}))}))},y=f.memo(g)},71835:function(e,n,t){t.d(n,{Z:function(){return N}});var r=t(32699),i=t(50959),a=t(16222),l=t(13916),s=t(25620),o=t(953),c=t(4853),u=t(22241),d=t(99182),f=t(2177),p=t(19090),m=t(8725),h=t(62493),x=t(56031),v=t(7119),g=t(56262),y=t(83616),b=t(19175);x.D([c.N,u.N,d.N,f.N,p.N,m.N,h.N,a.N,l.N,s.N,o.N,g.T,y.z,b.N]);var j=v,w=t(11527),C=(0,i.forwardRef)((function(e,n){var t=e.options,a=e.width,l=e.height,s=(0,i.useRef)(null),o=(0,i.useRef)(),c=(0,i.useRef)(!1),u=(0,i.useRef)();(0,i.useImperativeHandle)(n,(function(){return{chart:o.current}}));var d=(0,i.useCallback)((function(){var e;s.current&&(null===(e=o.current)||void 0===e||e.clear(),o.current=j.init(s.current))}),[]),f=(0,i.useCallback)((function(){var e;null===(e=o.current)||void 0===e||e.resize()}),[]),p=(0,i.useCallback)((function(e){var n,t;null===(n=o.current)||void 0===n||n.clear(),null===(t=o.current)||void 0===t||t.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[]);return(0,i.useEffect)((function(){return s.current&&d(),function(){var e;null===(e=o.current)||void 0===e||e.dispose()}}),[d]),(0,i.useEffect)((function(){c.current=!1,f(),p(t),c.current=!0}),[t]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;c.current&&(null===(e=o.current)||void 0===e||e.resize())}),100);return s.current&&(u.current=new ResizeObserver(e),u.current.observe(s.current)),function(){var e;s.current&&(null===(e=u.current)||void 0===e||e.unobserve(s.current))}}),[]),(0,w.jsx)("div",{className:"chart-wrapper",style:{width:a,height:l},children:(0,w.jsx)("div",{ref:s,style:{width:a,height:l}})})})),N=C},7086:function(e,n,t){t.d(n,{Gl:function(){return o},Md:function(){return a},Rf:function(){return c},TN:function(){return u},eC:function(){return l},j3:function(){return s},tN:function(){return d},yy:function(){return p},zt:function(){return f}});var r=t(32699),i="rgba(0, 0, 0, 0.4)",a={trigger:"axis",formatter:function(e,n){var t='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var i=(0,r.isFunction)(n)?null==n?void 0:n(e.data.value):e.data.value;t+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(i,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(t,"</div>")}},l={left:0,right:20,bottom:20,containLabel:!0},s={itemWidth:8,itemHeight:8},o={type:"category",axisTick:{show:!0,lineStyle:{color:"rgba(217,217,217,0.5)"}},axisLabel:{color:i,fontSize:12},axisLine:{show:!1}},c={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisLabel:{color:i,fontSize:12},axisTick:{show:!1},type:"value"},u={show:!0,left:"center",textStyle:{fontSize:12,color:"#000"},text:""},d={type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},f={type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},p={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-12,length:6,splitNumber:5,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},splitLine:{distance:-12,length:12,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},axisLabel:{distance:14,color:"rgba(0, 0, 0, .5)",fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:"rgba(0, 0, 0, 0.88)",formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:"rgba(0, 0, 0, 0.88)"},unit:{fontSize:14,color:"rgba(0, 0, 0, 0.88)",fontWeight:"500",padding:[0,0,0,2]}}}}},20946:function(e,n,t){var r=t(23010),i=(t(50959),t(11527));n.Z=function(e){var n=e.height,t=e.title;return(0,i.jsxs)("div",{style:{width:"100%",height:n||"100%"},className:"flex-center  flex-column ",children:[t&&(0,i.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:t}),(0,i.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},68940:function(e,n,t){t.d(n,{U:function(){return l},Z:function(){return a}});var r=t(9532),i=t(50959);function a(){return r.Z.CancelToken.source}function l(){var e=r.Z.CancelToken.source,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){return function(){n.current&&n.current.cancel()}}),[]),{updateCancelToken:function(){n.current&&n.current.cancel(),n.current=e()},cancelRequest:function(){n.current&&n.current.cancel()},getCanceltToken:function(){return n.current.token},source:e}}},43337:function(e,n,t){t.d(n,{Z:function(){return M}});var r=t(90228),i=t.n(r),a=t(48305),l=t.n(a),s=t(335),o=t.n(s),c=t(87999),u=t.n(c),d=t(15558),f=t.n(d),p=t(26068),m=t.n(p),h=t(43943),x=t(99178),v=t(8267),g=t(23333),y=t(85885),b=t(82187),j=t.n(b),w=t(50959),C=t(11527),N=function(e){var n=e.value,t=e.onChange,r=e.style,i=e.label,a=e.placeholder,s=e.height,o=void 0===s?46:s,c=(0,x.useIntl)(),u=w.useRef(null),d=(0,w.useState)({minRows:1,maxRows:1,focus:!1}),f=l()(d,2),p=f[0],b=f[1],N=function(){b({minRows:3,maxRows:3,focus:!0}),setTimeout((function(){var e,n;null===(e=u.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),50)};return(0,C.jsxs)("div",{className:j()("row-textarea",{focus:p.focus}),style:m()({},r),children:[(0,C.jsxs)("div",{style:{display:p.focus?"block":"none"},className:"textarea-wrapper",children:[i&&(0,C.jsx)("span",{className:"textarea-label",children:i}),(0,C.jsx)(v.Z.TextArea,{className:"custome-scrollbar",ref:u,placeholder:a,style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:p.minRows,maxRows:p.maxRows},onFocus:N,onBlur:function(e){b({minRows:2,maxRows:2,focus:!1})},allowClear:!1,onChange:function(e){null==t||t(e)},onPaste:function(n){var t;null===(t=e.onPaste)||void 0===t||t.call(e,n)}})]}),!p.focus&&(0,C.jsxs)("div",{className:"content-wrap",onClick:N,children:[(0,C.jsxs)("div",{className:"content",style:{height:o},children:[i&&(0,C.jsx)("span",{className:"title",children:i}),n||(0,C.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:a})]}),n&&(0,C.jsx)(g.Z,{title:c.formatMessage({id:"common.button.clear"}),children:(0,C.jsx)(y.ZP,{className:"clear-btn",type:"text",icon:(0,C.jsx)(h.Z,{}),size:"small",onClick:function(){null==t||t({target:{value:""}})}})})]})]})},k=w.memo(N),S=t(69070),Z=t(32699),R=t.n(Z),z=(0,w.forwardRef)((function(e,n){var t=e.textList,r=e.showLabel,a=void 0===r||r,s=e.sortIndex,c=void 0===s?[]:s,d=e.sortable,p=e.height,m=e.onSort,h=e.onChange,v=e.extra,b=e.onPaste,j=(0,x.useIntl)(),N=(0,w.useRef)(0),Z=(0,w.useRef)(null),z=(0,w.useRef)([]),M=function(){var e;z.current=Array.from((null===(e=Z.current)||void 0===e?void 0:e.children)||[])},P=(0,w.useCallback)((function(e,n){var t=e.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left,y:r.top-t.top}}),[]),T=(0,w.useCallback)((function(e,n){var t=Z.current;if(t){var r=Array.from(t.children);n>=r.length?t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e):t.insertBefore(e,r[n])}}),[]),I=function(e,n,t){if(n===t||n<0||t<0||n>=e.length||t>e.length)return e;var r=e.splice(n,1)[0];return e.splice(t>n?t-1:t,0,r),e},L=(0,w.useCallback)((function(){if(d&&(M(),Z.current)){var e=f()(t),n=c.map((function(e,n){var t=z.current[e],r=z.current[n];if(!t||!r)return null;var i=P(t,r);return{element:t,offset:{x:i.x,y:i.y},fromIndex:e,toIndex:n}})),r=function(){var t=u()(i()().mark((function t(){var r,a,s;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=o()(n.entries()),t.prev=1,s=i()().mark((function n(){var t,r,s,o,c,u;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=l()(a.value,2),t[0],r=t[1]){n.next=3;break}return n.abrupt("return",1);case 3:return s=r.element,o=r.offset,c=r.fromIndex,u=r.toIndex,n.next=7,new Promise((function(n){s.style.opacity=.5,s.style.transform="translate(".concat(o.x,"px, ").concat(o.y,"px)"),s.style.transition="transform 0.8s,opacity 0.8s",s.addEventListener("transitionend",(function(){T(s,u),I(e,c,u),M(),s.style.opacity=1,s.style.transform="",n(null)}),{once:!0})}));case 7:case"end":return n.stop()}}),n)})),r.s();case 4:if((a=r.n()).done){t.next=10;break}return t.delegateYield(s(),"t0",6);case 6:if(!t.t0){t.next=8;break}return t.abrupt("continue",8);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(1),r.e(t.t1);case 15:return t.prev=15,r.f(),t.finish(15);case 18:null==m||m(e);case 19:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}();r()}}),[d,c,t,m,M,P]),E=function(){return N.current=N.current+1,N.current},A=function(){E();var e=f()(t);e.push({text:"",uid:N.current,name:"Text ".concat(e.length+1)}),null==h||h(e)},D=function(e){var n=f()(t),r=n.findIndex((function(n){return n.uid===e.uid}));n.splice(r,1),null==h||h(n)},O=function(e,n){var r=f()(t),i=r.findIndex((function(e){return e.uid===n.uid}));r[i].text=e,null==h||h(r)},_=R().debounce(L,100);return(0,w.useEffect)((function(){null!=c&&c.length&&_()}),[c]),(0,w.useImperativeHandle)(n,(function(){return{handleAdd:A,handleDelete:D,handleTextChange:O,setMessageId:E}})),(0,C.jsx)("div",{className:"input-list",ref:Z,children:t.map((function(e,n){return(0,C.jsxs)("div",{className:"input-item","data-uid":e.uid,children:[(0,C.jsx)("div",{className:"input-wrap",children:(0,C.jsx)(k,{height:p,label:a?"".concat(n+1):null,value:e.text,placeholder:j.formatMessage({id:"playground.embedding.inputyourtext"}),onChange:function(n){return O(n.target.value,e)},onPaste:function(e){return null==b?void 0:b(e,n)}})}),(0,C.jsx)("span",{className:"btn-group",children:(0,C.jsx)(g.Z,{title:j.formatMessage({id:"common.button.delete"}),children:(0,C.jsx)(y.ZP,{danger:!0,size:"small",type:"text",icon:(0,C.jsx)(S.Z,{}),onClick:function(){return D(e)}})})}),null==v?void 0:v(e)]},e.uid)}))})})),M=w.memo(z)},85958:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var r=t(90228),i=t.n(r),a=t(87999),l=t.n(a),s=t(48305),o=t.n(s),c=t(83057),u=t(93495),d=t(55169),f=t(99178),p=t(54235),m=t(85885),h=t(82187),x=t.n(h),v=t(32699),g=t.n(v),y=t(50959),b=t(94299),j=t(35014),w=t(15558),C=t.n(w),N=t(26068),k=t.n(N),S=t(49662),Z=t(71835),R=t(7086),z=t(20946),M=t(11527),P={animation:!1,grid:k()(k()({},R.eC),{},{right:10,top:10,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]},T=function(e){var n=e.seriesData,t=e.xAxisData,r=e.height,i=e.width,a=e.showEmpty,l=e.title,s=(0,y.useRef)(null),c=(0,y.useCallback)((function(e,n){for(var t,r=[],i=null===(t=s.current.chart)||void 0===t?void 0:t.convertToPixel("grid",n.value),a=o()(i,2),l=a[0],c=a[1],u=e.map((function(e){var n;return k()(k()({},e),{},{value:null===(n=s.current.chart)||void 0===n?void 0:n.convertToPixel("grid",e.value)})})),d=0;d<u.length;d++)if(n.name!==u[d].name){var f=o()(u[d].value,2),p=f[0],m=f[1];Math.sqrt(Math.pow(g().round(p-l,2),2)+Math.pow(g().round(m-c,2),2))<=16&&r.push(k()({},u[d]))}else r.push(k()({},u[d]));return r}),[]),u=(0,y.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var n;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(n=e.itemStyle)||void 0===n?void 0:n.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),d=(0,y.useMemo)((function(){var e=n.map((function(e,n){return k()(k()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return k()(k()({},P),{},{tooltip:{trigger:"item",borderWidth:0,formatter:function(n,t){var r=c(e,n.data),i="",a=u(r);return r.forEach((function(e){i+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(a?a(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper">'.concat(i,"</div>")}},title:k()(k()({},R.TN),{},{text:l}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[n,t,l,c]);return(0,M.jsx)(M.Fragment,{children:!n.length&&a?(0,M.jsx)(z.Z,{height:r,title:l}):(0,M.jsx)(Z.Z,{ref:s,height:r,options:d,width:i||"100%"})})},I=(0,y.memo)(T),L=t(16333),E=t(571),A=t(68940),D=t(4423),O=t(19019),_=t(51076),W=t(77353),H=t(66668),B=t(23333),G=t(83603),F=t(96938),U=t(47946),K=t(84777),Y=(t(72183),t(2139)),V=(t(51662),t(10074),t(56797)),J=t(76483),q=t(33883),$=t(25906),Q=t(69070),X=function(e){var n=e.textListCount,t=e.fileList,r=e.ghost,i=e.showIcon,a=void 0===i||i,l=e.onDelete,s=(0,f.useIntl)();return(0,M.jsx)("div",{className:"file-list",children:t.map((function(e,t){return(0,M.jsxs)("div",{className:x()("file-item",{ghost:r}),children:[(0,M.jsxs)("span",{className:"title",children:[(0,M.jsxs)("span",{className:"m-r-5",children:[t+1+n,"."]}),a&&(0,M.jsx)($.Z,{className:"m-r-5"}),(0,M.jsxs)(q.Z,{ghost:!0,children:[" ",e.name]})]}),l&&(0,M.jsx)(B.Z,{title:s.formatMessage({id:"common.button.delete"}),children:(0,M.jsx)(m.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,M.jsx)(Q.Z,{}),onClick:function(){return l(e.uid)}})})]},e.uid)}))})},ee=y.memo(X),ne=t(43337),te=t(49918),re=[],ie={},ae=(0,y.forwardRef)((function(e,n){var t=e.modelList,r=(0,y.useRef)(0),a=(0,f.useIntl)(),s=(0,A.Z)(),d=(0,f.useSearchParams)(),p=o()(d,1)[0].get("model")||"",h=(0,y.useState)({}),v=o()(h,2),w=v[0],N=v[1],Z=(0,y.useState)(!1),R=o()(Z,2),z=R[0],P=R[1],T=(0,y.useState)(!1),q=o()(T,2),$=q[0],Q=q[1],X=(0,y.useState)(null),ae=o()(X,2),le=ae[0],se=ae[1],oe=(0,y.useState)(!1),ce=o()(oe,2),ue=ce[0],de=ce[1],fe=(0,y.useRef)(""),pe=(0,y.useRef)(null),me=(0,y.useRef)(null),he=(0,y.useRef)(null),xe=(0,y.useRef)(0),ve=(0,y.useRef)(null),ge=(0,y.useState)([]),ye=o()(ge,2),be=ye[0],je=ye[1],we=(0,y.useState)("chart"),Ce=o()(we,2),Ne=Ce[0],ke=Ce[1],Se=(0,y.useState)(180),Ze=o()(Se,2),Re=Ze[0],ze=Ze[1],Me=(0,y.useState)({code:"",copyValue:""}),Pe=o()(Me,2),Te=Pe[0],Ie=Pe[1],Le=(0,y.useState)(!1),Ee=o()(Le,2),Ae=Ee[0],De=Ee[1],Oe=(0,y.useRef)(!0),_e=(0,y.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),We=o()(_e,2),He=We[0],Be=We[1],Ge=(0,y.useState)([]),Fe=o()(Ge,2),Ue=Fe[0],Ke=Fe[1],Ye=(0,y.useRef)(null),Ve=(0,E.Z)(),Je=Ve.initialize,qe=Ve.updateScrollerPosition,$e=(0,E.Z)(),Qe=$e.initialize,Xe=($e.updateScrollerPosition,(0,y.useRef)(null));(0,y.useImperativeHandle)(n,(function(){return{viewCode:function(){P(!0)},setCollapse:function(){de(!ue)}}}));var en=(0,y.useMemo)((function(){return function(e){var n=e.api,t=e.parameters,r=window.location.origin,i="\ncurl ".concat(r).concat(n,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,V.Yy)(t,!1)).trim(),a='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(r,'/v1-openai", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.embeddings.create(\n').concat((0,V.G4)(k()({},t)),")\n\nprint(response.data[0].embedding)").trim(),l=(0,V.GT)(k()({},t));return{curlCode:i,pythonCode:a,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,'/v1-openai"\n});\n\nasync function main() {\n  const params = ').concat(l,"; \n  const response = await openai.embeddings.create(params);\n  console.log(response.data[0].embedding);\n}\nmain();").trim()}}({api:"/v1-openai/embeddings",parameters:k()(k()({},w),{},{input:[].concat(C()(He.map((function(e){return e.text})).filter((function(e){return e}))),C()(be.map((function(e){return e.text})).filter((function(e){return e}))))})})}),[w,He,be]),nn=(0,y.useMemo)((function(){return[].concat(C()(He),C()(be)).length<2}),[He,be]),tn=(0,y.useCallback)((function(e){try{var n=e.map((function(e){return e.embedding})),t=new K._(n).predict(n,{nComponents:2}).to2DArray(),r=[].concat(C()(He.map((function(e){return e.text})).filter((function(e){return e}))),C()(be.map((function(e){return e.text})).filter((function(e){return e})))),i=t.map((function(e,n){return{value:e,name:n+1,text:r[n]}}));Ke(i);var a=e.map((function(e,n){var t=g().cloneDeep(e);return t.embedding=t.embedding.slice(0,5),t.embedding.push(null),t}));Ie({code:JSON.stringify(a,null,2).replace(/null/g,"..."),copyValue:JSON.stringify(e,null,2)})}catch(e){}}),[He,be]),rn=function(){r.current=r.current+1},an=function(){var e=l()(i()().mark((function e(n){var t,r,a,l,o,c,u,d,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=Xe.current)||void 0===t?void 0:t.form.validateFields();case 2:if(w.model){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,l=He.filter((function(e){return e.text})),o=be.filter((function(e){return e.text})),!((c=[].concat(C()(l.map((function(e){return e.text}))),C()(o.map((function(e){return e.text}))))).length<2)){e.next=11;break}return De(!0),e.abrupt("return");case 11:return Be(l),je(o),De(!1),Q(!0),rn(),se(null),null===(r=ve.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),ve.current=s(),fe.current=(null==n?void 0:n.content)||"",e.next=22,(0,j.xO)({model:w.model,encoding_format:"float",input:c},{token:ve.current.token});case 22:u=e.sent,se(u.usage),d=u.data||[],tn(d),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),se({error:!0,errorMessage:null===(f=e.t0.response)||void 0===f||null===(f=f.data)||void 0===f||null===(f=f.error)||void 0===f?void 0:f.message});case 31:return e.prev=31,Q(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[4,28,31,34]])})));return function(n){return e.apply(this,arguments)}}(),ln=function(){an()},sn=(0,y.useCallback)((function(e,n){if(Oe.current){var t=e.clipboardData.getData("text");if(t){var r=He[n].text,i=t.split("\n").map((function(e){var n;return{text:null==e?void 0:e.trim(),uid:null===(n=me.current)||void 0===n?void 0:n.setMessageId(),name:""}}));i[0].text=r+i[0].text;var a=[].concat(C()(He.slice(0,n)),C()(i),C()(He.slice(n+1))).filter((function(e){return e.text})).map((function(e,n){var t;return k()(k()({},e),{},{uid:null===(t=me.current)||void 0===t?void 0:t.setMessageId()})}));Be(a)}}}),[He]),on=(0,y.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,M.jsx)(I,{seriesData:Ue,height:Re,width:"100%",xAxisData:[]})},{key:"json",label:"JSON",children:(0,M.jsx)("div",{style:{padding:10,backgroundColor:"#fafafa"},children:(0,M.jsx)(L.Z,{height:Re-20,theme:"light",code:Te.code,copyValue:Te.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[Re,Ue,Te]);return(0,y.useEffect)((function(){rn(),Ke([]),se(null)}),[w.model]),(0,b.y1)(u.ZP.SUBMIT,(function(e){e.preventDefault(),ln()}),{enabled:!$,preventDefault:!0}),(0,y.useEffect)((function(){pe.current&&Je(pe.current)}),[pe.current,Je]),(0,y.useEffect)((function(){he.current&&Qe(he.current)}),[he.current,Qe]),(0,y.useEffect)((function(){He.length+be.length>xe.current&&qe(),xe.current=He.length+be.length}),[He.length,be.length]),(0,M.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,M.jsxs)("div",{className:"ground-left",children:[(0,M.jsx)("div",{className:"center",ref:pe,style:{height:"auto",maxHeight:"100%"},children:(0,M.jsxs)("div",{className:"documents",children:[(0,M.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,M.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,M.jsx)("div",{className:"flex gap-20",children:(0,M.jsx)("span",{children:a.formatMessage({id:"playground.embedding.documents"})})})}),(0,M.jsxs)("div",{className:"flex-center gap-10",children:[(0,M.jsx)(B.Z,{title:a.formatMessage({id:"playground.input.multiplePaste.tips"}),children:(0,M.jsxs)(G.Z,{defaultChecked:Oe.current,onChange:function(e){Oe.current=e.target.checked},children:[a.formatMessage({id:"playground.input.multiplePaste"}),(0,M.jsx)(D.Z,{className:"m-l-4"})]})}),(0,M.jsxs)(m.ZP,{size:"middle",onClick:function(){var e;null===(e=me.current)||void 0===e||e.handleAdd()},children:[(0,M.jsx)(O.Z,{}),a.formatMessage({id:"playground.embedding.addtext"})]}),(0,M.jsx)(m.ZP,{icon:(0,M.jsx)(_.Z,{}),size:"middle",onClick:function(){Be([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),je([]),Ke([]),se(null),De(!1),Ie({code:"",copyValue:""})},children:a.formatMessage({id:"common.button.clear"})}),$?(0,M.jsx)(B.Z,{title:a.formatMessage({id:"common.button.stop"}),children:(0,M.jsx)(m.ZP,{style:{width:60},size:"middle",type:"primary",onClick:function(){var e,n;null===(e=ve.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),Q(!1)},icon:(0,M.jsx)(c.Z,{type:"icon-stop1",className:"font-size-12"})})}):(0,M.jsx)(B.Z,{title:(0,M.jsxs)("span",{children:["[",u.d4.SUBMIT.textKeybinding,"]"," ",a.formatMessage({id:"common.button.submit"})]}),children:(0,M.jsx)(m.ZP,{size:"middle",type:"primary",disabled:nn,onClick:ln,icon:(0,M.jsx)(W.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})})]})]}),(0,M.jsxs)("div",{className:"docs-wrapper",children:[(0,M.jsx)(ne.Z,{ref:me,textList:He,onChange:function(e){Be(e)},onPaste:sn}),(0,M.jsx)("div",{style:{marginTop:8},children:(0,M.jsx)(ee,{fileList:be,textListCount:He.length||0,onDelete:function(e){je((function(n){return n.filter((function(n){return n.uid!==e}))}))}})}),Ae&&(0,M.jsx)(S.Z,{type:"danger",message:a.formatMessage({id:"playground.documents.verify.embedding"})})]})]})}),(0,M.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,M.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,M.jsxs)("div",{className:"flex gap-20",children:[(0,M.jsxs)("span",{className:"flex-center",children:[a.formatMessage({id:"playground.embedding.output"}),(0,M.jsx)(B.Z,{title:(0,M.jsxs)("span",{className:"flex-column",children:[(0,M.jsxs)("span",{children:["1.",a.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,M.jsxs)("span",{children:["2."," ",a.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,M.jsx)(D.Z,{className:"m-l-4"})})]}),(0,M.jsx)(S.Z,{type:"danger",message:null==le?void 0:le.errorMessage})]}),(0,M.jsx)(F.Z,{onChange:function(e){ke(e)},value:Ne,options:[{label:a.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,M.jsx)("div",{className:"embed-chart",children:(0,M.jsx)(Y.e,{ref:Ye,enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,M.jsx)(B.Z,{title:a.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,M.jsx)(m.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,M.jsx)(H.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResize:function(){var e,n=null===(e=Ye.current)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.height;n&&ze(n)},onResizeStop:function(e,n,t,r){r.height+Re<=400&&r.height+Re>=180&&ze(r.height+Re)},children:(0,M.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",width:"100%"},className:"scatter ",children:(0,M.jsx)(U.Z,{defaultActiveKey:Ne,activeKey:Ne,centered:!0,renderTabBar:function(){return(0,M.jsx)(M.Fragment,{})},items:on})})})})]})]}),(0,M.jsx)("div",{className:x()("params-wrapper",{collapsed:ue}),ref:he,children:(0,M.jsx)("div",{className:"box",children:(0,M.jsx)(J.Z,{ref:Xe,setParams:N,paramsConfig:re,initialValues:ie,params:w,selectedModel:p,modelList:t})})}),(0,M.jsx)(te.Z,{open:z,viewCodeContent:en,onCancel:function(){P(!1)},title:a.formatMessage({id:"playground.viewcode"})})]})})),le=(0,y.memo)(ae),se=(t(20988),function(){var e=(0,f.useIntl)(),n=(0,y.useRef)(null),t=(0,y.useRef)(null),r=(0,y.useState)([]),a=o()(r,2),s=a[0],h=a[1],v=(0,y.useState)(!1),w=o()(v,2),C=w[0],N=w[1],k=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)}),[t.current]),S=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),[t.current]);(0,y.useEffect)((function(){var e=function(){var e=l()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={embedding_only:!0,reranker:!1},e.next=4,(0,j.nb)(n);case 4:return t=e.sent,r=g().map(t.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(i()().mark((function n(){var t,r,a;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([e()]);case 3:t=n.sent,r=o()(t,1),a=r[0],h(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),N(!0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,b.y1)(u.ZP.RIGHT.join(","),(function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.setCollapse)||void 0===t||t.call(e)}),{preventDefault:!0}),(0,M.jsx)(d._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.embedding"}),breadcrumb:{}},extra:(0,M.jsxs)(p.Z,{children:[(0,M.jsx)(m.ZP,{size:"middle",onClick:k,icon:(0,M.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,M.jsx)(m.ZP,{size:"middle",onClick:S,icon:(0,M.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:x()("playground-container chat"),children:(0,M.jsx)("div",{className:"play-ground",children:(0,M.jsx)("div",{className:"chat",children:(0,M.jsx)(le,{ref:t,modelList:s,loaded:C})})})})})},10074:function(){}}]);