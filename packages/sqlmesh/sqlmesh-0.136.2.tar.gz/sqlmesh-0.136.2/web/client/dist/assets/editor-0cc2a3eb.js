import{ay as T,a1 as p,az as v,v as d,b as w}from"./index-c7f4548a.js";import{M as m}from"./file-339a784f.js";const h=new Worker(new URL(""+new URL("sqlglot-8774d74c.js",import.meta.url).href,self.location));function A(){return new Worker(new URL(""+new URL("lineage-233ef759.js",import.meta.url).href,self.location),{type:"module"})}const[I,b]=T("tabs"),{tabs:S=[],id:y}=I()??{},l=u(),c=f(l),L=new Map([[l,c]]),g=p((s,n)=>({storedTabs:S,storedTabId:y,tab:c,tabs:L,engine:h,dialects:[],previewQuery:void 0,previewTable:void 0,previewDiff:void 0,direction:"vertical",inTabs(e){return n().tabs.has(e)},replaceTab(e,a){const t=n(),i=Array.from(t.tabs.entries()),o=i.findIndex(([r])=>r===e.file);i[o]=[a.file,a],s(()=>({tabs:new Map(i)})),t.updateStoredTabsIds()},updateStoredTabsIds(){const e=n();if(d(e.tab)){b({id:void 0,tabs:[]}),s(()=>({storedTabId:void 0,storedTabs:[]}));return}const a=[];for(const i of e.tabs.values())w(i.file.isChanged)&&i.file.isLocal||a.push({id:i.file.id,content:i.file.content});const t=e.tab.file.isChanged||e.tab.file.isRemote?e.tab.file.id:void 0;b({id:t,tabs:a}),s(()=>({storedTabId:t,storedTabs:a}))},refreshTab(e){d(e)||n().selectTab({...e})},setDialects(e){s(()=>({dialects:e}))},selectTab(e){const a=n();s(()=>({tab:e})),a.updateStoredTabsIds()},addTabs(e){const a=n();for(const t of e)a.tabs.set(t.file,t);s(()=>({tabs:new Map(a.tabs)}))},addTab(e){const a=n();if(a.tabs.has(e.file))a.tabs.set(e.file,e),s(()=>({tabs:new Map(a.tabs)}));else{const t=Array.from(a.tabs.entries()),i=t.findIndex(([o])=>{var r;return o===((r=a.tab)==null?void 0:r.file)});t.splice(i<0?t.length:i+1,0,[e.file,e]),s(()=>({tabs:new Map(t)}))}a.updateStoredTabsIds()},closeTab(e){var t;const a=n();if(e.removeChanges(),a.tabs.delete(e),a.tabs.size===0)a.selectTab(void 0);else if(a.tabs.size===1){const i=Array.from(a.tabs.values());a.selectTab(i.at(0))}else if(e.id===((t=a.tab)==null?void 0:t.file.id)){const i=Array.from(a.tabs.values()),o=i.findIndex(r=>r.file===e);a.selectTab(i.at(o-1))}s(()=>({tabs:new Map(a.tabs)})),a.updateStoredTabsIds()},createTab:f,setPreviewQuery(e){s(()=>({previewQuery:e}))},setPreviewTable(e){s(()=>({previewTable:e}))},setPreviewDiff(e){s(()=>({previewDiff:e}))},setDirection(e){s(()=>({direction:e}))}}));function f(s=u()){return{id:v(),file:s,isValid:!0}}function u(s){return new m({id:s,name:"",path:"",content:`-- Create arbitrary SQL queries
-- and execute them against different environments

`})}export{A as a,u as c,h as s,g as u};
