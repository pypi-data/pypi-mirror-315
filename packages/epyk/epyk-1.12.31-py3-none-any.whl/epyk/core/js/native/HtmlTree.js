function htmlTree(e,t,i){i&&(e.innerHTML="",i.is_root&&(window[e.id+"_data"]=t),i.is_root&&i.filter_on&&function e(a,l,r){a.forEach(function(a,n){var s=[...l];s.push(n);var o=a.label;if(void 0===a.label&&(o=a.value),r){if(o.includes(i.filter_on)){var d=t[s[0]];d._meta={visible:!0};for(let c=1;c<s.length;c++)(d=d.items[s[c]])._meta={visible:!0};void 0!==a.items&&e(a.items,s,!1)}else a._meta={visible:!1},void 0!==a.items&&e(a.items,s,!0)}else a._meta={visible:!0},void 0!==a.items&&e(a.items,s,!1)})}(t,[],!0),i.is_root=!1),t.forEach(function(t,a){if(void 0===i.filter_on||""==i.filter_on||t._meta.visible){var l=document.createElement("li"),r=document.createElement("a");if(r.style["white-space"]="nowrap",void 0!==t.css)for(let n in t.css)r.style[n]=t.css[n];if(void 0!==t.items){var s=document.createElement("ul");for(let o in s.setAttribute("data-depth",parseInt(e.getAttribute("data-depth"))+1),s.setAttribute("data-parent",t.value),i.expanded||(s.style.display="none"),i.style)s.style[o]=i.style[o];i.builder(s,t.items,i);var d=document.createElement("i");for(let c in d.setAttribute("name","item_arrow"),i.icon_style)d.style[c]=i.icon_style[c];d.onclick=function(){(void 0!==i.remote&&0==s.children.length||i.remoteAlways)&&i.remote(s,i,t.value),"none"==this.parentNode.querySelector("ul").style.display?(this.parentNode.querySelector("ul").style.display="block",d.setAttribute("class",i.icon_open)):(this.parentNode.querySelector("ul").style.display="none",d.setAttribute("class",i.icon_close))},d.style.cursor="pointer",d.style.color="grey",i.expanded?i.icon_open.split(" ").forEach(function(e){d.classList.add(e)}):i.icon_close.split(" ").forEach(function(e){d.classList.add(e)});var p=document.createElement("span");p.setAttribute("data-value",t.value),void 0!==t.label?p.innerHTML=t.label:p.innerHTML=t.value,p.setAttribute("name","item_value"),p.style.whiteSpace="nowrap",void 0!==i.clickNode&&(p.style.cursor="pointer",p.onclick=function(e){let t=p.innerText,a=p.getAttribute("data-value");i.clickNode(e,t,a)}),void 0!==t.tooltip&&p.setAttribute("title",t.tooltip);var u=document.createElement("span");if(i.with_badge&&(u.setAttribute("class","badge badge-pill"),u.innerHTML=t.items.length,u.style.padding=0,u.style.verticalAlign="top",d.appendChild(u)),r.appendChild(d),void 0!==i.with_icon){var v=document.createElement("i");v.style.marginRight="5px",v.setAttribute("class",t[i.with_icon]),r.appendChild(v)}r.appendChild(p),r.appendChild(s)}else{var p=document.createElement("span");if(p.setAttribute("data-value",t.value),void 0!==t.label?p.innerHTML=t.label:p.innerHTML=t.value,p.setAttribute("name","item_value"),p.style.whiteSpace="nowrap",!1!=t.draggable&&(r.setAttribute("draggable",!0),void 0!==t._path&&r.setAttribute("data-path",t._path),void 0!==t.tooltip&&r.setAttribute("title",t.tooltip),r.style.cursor="grab",r.ondragstart=function(e){var t=this.innerHTML,i=this.getAttribute("data-path");null===i?e.dataTransfer.setData("text",t):e.dataTransfer.setData("text",i)}),void 0!==i.clickLeaf&&(r.style.cursor="pointer",r.onclick=function(e){let t=r.innerText,a=p.getAttribute("data-value");i.clickLeaf(e,t,a)}),void 0!==t.url&&(r.setAttribute("target",t.target||"_blank"),r.href=t.url),void 0!==i.with_icon){var v=document.createElement("i");v.style.marginRight="5px",v.setAttribute("class",t[i.with_icon]),r.appendChild(v)}r.appendChild(p)}r.style.paddingLeft=20*(parseInt(e.getAttribute("data-depth"))-1)+"px",l.appendChild(r),e.appendChild(l)}})}