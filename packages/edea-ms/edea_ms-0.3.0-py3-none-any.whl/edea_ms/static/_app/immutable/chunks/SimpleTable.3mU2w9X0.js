var Lt=Object.defineProperty;var Pt=s=>{throw TypeError(s)};var Tt=(s,e,t)=>e in s?Lt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var f=(s,e,t)=>Tt(s,typeof e!="symbol"?e+"":e,t),Nt=(s,e,t)=>e.has(s)||Pt("Cannot "+t);var h=(s,e,t)=>(Nt(s,e,"read from private field"),t?t.call(s):e.get(s)),v=(s,e,t)=>e.has(s)?Pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);import{a as p,t as H,b as ie,f as pe,d as we,e as he,j as vt}from"./disclose-version.R4vLOQNQ.js";import{N as Bt,M as zt,F as Et,p as nt,aT as Mt,C as ne,q as l,A as ce,B as Ot,c as P,s as U,r as w,t as C,a as ct,D as _,w as K,aU as jt,f as oe,aa as qt,aj as F,x as G,m as It,l as Wt,z as Dt}from"./index-client.rJPuloIY.js";import{l as Vt,a as m,i as T,p as y,b as Jt}from"./props.CRPfZ7lw.js";import{e as _e,i as Pe,s as $,r as yt}from"./ProgressBar.svelte_svelte_type_style_lang.CPHjajrS.js";import{c as Gt}from"./svelte-component.B1yr5dew.js";import{s as Q,a as Ut,h as Ue,c as Kt,t as mt,d as xt}from"./select.CmTwkEE2.js";import"./legacy.2nIxhB3F.js";import{i as Qt}from"./lifecycle.DH7YY2cp.js";const Xt=[];function Yt(s,e=!1){return Ke(s,new Map,"",Xt)}function Ke(s,e,t,r,i=null){if(typeof s=="object"&&s!==null){var a=e.get(s);if(a!==void 0)return a;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(Bt(s)){var n=Array(s.length);e.set(s,n),i!==null&&e.set(i,n);for(var d=0;d<s.length;d+=1){var b=s[d];d in s&&(n[d]=Ke(b,e,t,r))}return n}if(zt(s)===Et){n={},e.set(s,n),i!==null&&e.set(i,n);for(var c in s)n[c]=Ke(s[c],e,t,r);return n}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return Ke(s.toJSON(),e,t,r,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}const Zt='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>',$t='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/></svg>',es='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/></svg>',ts='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/></svg>';var ss=H("<option> </option>"),rs=H('<label><select aria-label="Select Amount"></select></label>'),is=H('<button type="button"><!></button>'),as=H('<button type="button"><!></button>'),ls=H('<button type="button"> <span class="opacity-50"> </span></button>'),ns=H('<button type="button"> </button>'),cs=H('<button type="button"><!></button>'),os=H('<button type="button"><!></button>'),hs=H('<div data-testid="paginator"><!> <div><!> <!> <!> <!> <!></div></div>');function us(s,e){const t=Vt(e,["children","$$slots","$$events","$$legacy"]);nt(e,!1);const r=ne(),i=ne(),a=ne(),n=ne(),d=ne(),b=Mt();let c=m(e,"settings",28,()=>({page:0,limit:5,size:0,amounts:[1,2,5,10]})),N=m(e,"disabled",8,!1),X=m(e,"showPreviousNextButtons",8,!0),We=m(e,"showFirstLastButtons",8,!1),ot=m(e,"showNumerals",8,!1),J=m(e,"maxNumerals",8,1),ue=m(e,"justify",8,"justify-between"),fe=m(e,"select",8,"select min-w-[150px]"),De=m(e,"amountText",8,"Items"),Ve=m(e,"regionControl",8,"btn-group"),de=m(e,"controlVariant",8,"variant-filled"),ge=m(e,"controlSeparator",8,""),be=m(e,"active",8,"variant-filled-primary"),te=m(e,"buttonClasses",8,"!px-3 !py-1.5 fill-current"),ht=m(e,"buttonTextPrevious",8,Zt),Je=m(e,"buttonTextNext",8,$t),ut=m(e,"buttonTextFirst",8,es),ft=m(e,"buttonTextLast",8,ts),dt=m(e,"separatorText",8,"of"),gt=m(e,"labelFirst",8,"First page"),g=m(e,"labelPrevious",8,"Previous page"),x=m(e,"labelNext",8,"Next page"),j=m(e,"labelLast",8,"Last page");const ae="flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4",le="w-full md:w-auto";let S=ne(Math.max(0,Math.ceil(c().size/c().limit-1))),R=ne(B());function q(){b("amount",c().limit),_(S,Math.max(0,Math.ceil(c().size/c().limit-1))),c().page>l(S)&&c(c().page=l(S),!0),_(R,B())}function A(u){u<0||(c(c().page=u,!0),b("page",c().page),_(R,B()))}function Y(){const u=[];for(let o=0;o<=l(S);o++)u.push(o);return u}function B(){const u=[],o=c().page<J()+2,k=c().page>l(S)-(J()+2);if(l(S)<=J()*2+1)return Y();if(u.push(0),o||u.push(-1),o||k){const M=o?1:l(S)-(J()+2),W=k?l(S)-1:J()+2;for(let L=M;L<=W;L++)u.push(L)}else for(let M=c().page-J();M<=c().page+J();M++)u.push(M);return k||u.push(-1),u.push(l(S)),u}function V(u){_(S,Math.max(0,Math.ceil(u/c().limit-1))),_(R,B())}ce(()=>(K(c()),K(be())),()=>{_(r,u=>u===c().page?`${be()} pointer-events-none`:"")}),ce(()=>K(J()),()=>{J(),q()}),ce(()=>K(c()),()=>{V(c().size)}),ce(()=>(K(ue()),K(t)),()=>{_(i,`${ae} ${ue()} ${t.class??""}`)}),ce(()=>{},()=>{_(a,`${le}`)}),ce(()=>K(fe()),()=>{_(n,`${fe()}`)}),ce(()=>(K(Ve()),K(de()),K(ge())),()=>{_(d,`${Ve()} ${de()} ${ge()}`)}),Ot(),Qt();var z=hs(),E=P(z);{var I=u=>{var o=rs(),k=P(o);C(()=>{c(),jt(()=>{l(n),N(),De()})}),_e(k,5,()=>c().amounts,Pe,(M,W)=>{var L=ss(),Ge={},bt=P(L);w(L),C(()=>{Ge!==(Ge=l(W))&&(L.value=(L.__value=l(W))==null?"":l(W)),ie(bt,`${l(W)??""} ${De()??""}`)}),p(M,L)}),w(k),w(o),C(()=>{Q(o,`paginator-label ${l(a)??""}`),Q(k,`paginator-select ${l(n)??""}`),k.disabled=N()}),Ut(k,()=>c().limit,M=>c(c().limit=M,!0)),pe("change",k,q),p(u,o)};T(E,u=>{c().amounts.length&&u(I)})}var Z=U(E,2),ve=P(Z);{var ye=u=>{var o=is(),k=P(o);Ue(k,ut),w(o),C(()=>{$(o,"aria-label",gt()),Q(o,te()),o.disabled=N()||c().page===0}),pe("click",o,()=>{A(0)}),p(u,o)};T(ve,u=>{We()&&u(ye)})}var me=U(ve,2);{var se=u=>{var o=as(),k=P(o);Ue(k,ht),w(o),C(()=>{$(o,"aria-label",g()),Q(o,te()),o.disabled=N()||c().page===0}),pe("click",o,()=>{A(c().page-1)}),p(u,o)};T(me,u=>{X()&&u(se)})}var re=U(me,2);{var Rt=u=>{var o=ls(),k=P(o);C(()=>ie(k,`${c().page*c().limit+1}-${Math.min(c().page*c().limit+c().limit,c().size)??""} `));var M=U(k),W=P(M);w(M),w(o),C(()=>{Q(o,`${te()??""} pointer-events-none !text-sm`),ie(W,`${dt()??""} ${c().size??""}`)}),p(u,o)},Ht=u=>{var o=we(),k=oe(o);_e(k,1,()=>l(R),Pe,(M,W)=>{var L=ns();const Ge=qt(()=>`${te()??""} ${l(r)(l(W))??""}`);var bt=P(L,!0);w(L),C(()=>{L.disabled=N(),Q(L,l(Ge)),ie(bt,l(W)>=0?l(W)+1:"...")}),pe("click",L,()=>A(l(W))),p(M,L)}),p(u,o)};T(re,u=>{ot()===!1?u(Rt):u(Ht,!1)})}var _t=U(re,2);{var Ct=u=>{var o=cs(),k=P(o);Ue(k,Je),w(o),C(()=>{$(o,"aria-label",x()),Q(o,te()),o.disabled=N()||(c().page+1)*c().limit>=c().size}),pe("click",o,()=>{A(c().page+1)}),p(u,o)};T(_t,u=>{X()&&u(Ct)})}var Ft=U(_t,2);{var At=u=>{var o=os(),k=P(o);Ue(k,ft),w(o),C(()=>{$(o,"aria-label",j()),Q(o,te()),o.disabled=N()||(c().page+1)*c().limit>=c().size}),pe("click",o,()=>{A(l(S))}),p(u,o)};T(Ft,u=>{We()&&u(At)})}w(Z),w(z),C(()=>{Q(z,`paginator ${l(i)??""}`),Q(Z,`paginator-controls ${l(d)??""}`)}),p(s,z),ct()}const O=s=>s==null||s==="",wt=s=>!O(s),D=(s=null)=>String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),ee=(s,e)=>{if(typeof s=="string")return{callback:t=>t[s],id:e,key:s};if(typeof s=="function")return{callback:s,id:e,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},ke=(s,e,t=xe.isLike)=>O(e)?!0:s!==null&&typeof s=="object"?Object.keys(s).some(r=>ke(s[r],e,t)):t(s,e),pt=(s,e,t=!1,r=void 0)=>(Array.isArray(s)&&(s=s.filter(i=>{const a=ke(i,e,r);if(typeof i=="object"&&a===!0)for(const n of Object.keys(i))i[n]=pt(i[n],e,t,r);return a})),t&&(typeof s=="string"||typeof s=="number")&&typeof e=="string"&&ke(s,e,r)?St(s,e):s),St=(s,e)=>{const t=e.replace(/a/g,"[aàâáä]").replace(/e/g,"[eèêéë]").replace(/i/g,"[iìîíï]").replace(/o/g,"[oòôо́ö]").replace(/u/g,"[uùûúü]").replace(/y/g,"[yỳŷýÿ]"),r=new RegExp(`${t}`,"gi");return String(s).replace(r,'<u class="highlight">$&</u>')},kt=(s,e,t)=>{const r=e.toString().split("=>")[1].replace(/\(\)/g,"").replace(/\?/g,"").split(".").splice(1).join(".").trim();return r.indexOf(" ")>-1?s:fs(s,r,t)},fs=(s,e,t)=>{const r=s,i=e.replace(/\[/g,".[").split(".");try{for(let a=0;a<i.length;a++){let n=i[a],d=i[a+1];n.includes("[")&&(n=String(parseInt(n.substring(1,n.length-1)))),d&&d.includes("[")&&(d=String(parseInt(d.substring(1,d.length-1)))),d!==void 0?s[n]=s[n]?s[n]:isNaN(Number(d))?{}:[]:s[n]=St(s[n],t),s=s[n]}return r}catch{return r}},Qe={asc:(s,e,t,r)=>s===e?0:O(s)?1:O(e)?-1:typeof s=="boolean"?s===!1?1:-1:typeof s=="string"?s.localeCompare(e,t,r):typeof s=="number"?s-e:typeof s=="object"?JSON.stringify(s).localeCompare(JSON.stringify(e),t,r):String(s).localeCompare(String(e),t,r),desc:(s,e,t,r)=>s===e?0:O(s)?1:O(e)?-1:typeof e=="boolean"?e===!1?1:-1:typeof e=="string"?e.localeCompare(s,t,r):typeof e=="number"?e-s:typeof e=="object"?JSON.stringify(e).localeCompare(JSON.stringify(s),t,r):String(e).localeCompare(String(s),t,r)};he(["click"]);he(["click"]);he(["input"]);var ds=(s,e)=>e.set(),gs=H('<th class="svelte-9ft6iv"><div class="flex svelte-9ft6iv"><strong class="svelte-9ft6iv"><!></strong> <span class="svelte-9ft6iv"></span></div></th>');function bs(s,e){nt(e,!0);const t=e.table.createSort(e.field);var r=gs();r.__click=[ds,t];var i=P(r),a=P(i),n=P(a);Kt(n,()=>e.children),w(a);var d=U(a,2);w(i),w(r),C(()=>{mt(r,"active",t.isActive),mt(d,"asc",t.direction==="asc"),mt(d,"desc",t.direction==="desc")}),p(s,r),ct()}he(["click"]);var vs=H('<th class="svelte-1kha99s"><input type="text" spellcheck="false" class="svelte-1kha99s"></th>');function ms(s,e){nt(e,!0);let t=m(e,"check",3,void 0);const r=e.table.createFilter(e.field,t());var i=vs(),a=P(i);yt(a),a.__input=()=>r.set(),w(i),C(()=>$(a,"placeholder",e.table.i18n.filter)),xt(a,()=>r.value,n=>r.value=n),p(s,i),ct()}he(["input"]);he(["change"]);class ps{constructor(){f(this,"listeners",{change:[],clearFilters:[],clearSearch:[]});f(this,"queue",new Set)}add(e,t){this.listeners[e].push(t)}async dispatch(e){this.queue.add(e),await new Promise(t=>setTimeout(t,40)),this.queue.size>0&&this.run(),this.queue.clear()}run(){for(const e of this.queue)for(const t of this.listeners[e])t()}}var Se,Re,He,Ce,Fe,Ae,Le,Te,Ne,Xe,Ye,Ze,$e,et,tt,st,Be,rt;class ws{constructor(e,t){f(this,"selectBy");v(this,Se,F("currentPage"));f(this,"highlight");f(this,"event",new ps);v(this,Re,F([]));v(this,He,F(y({value:null,scope:void 0})));v(this,Ce,F(y({})));v(this,Fe,F(y([])));v(this,Ae,F(10));v(this,Le,F(1));v(this,Te,F(void 0));v(this,Ne,F(1e3));v(this,Xe,G(()=>this.filters.length));v(this,Ye,G(()=>this.createAllRows()));v(this,Ze,G(()=>this.createRows()));v(this,$e,G(()=>this.createRowCount()));v(this,et,G(()=>this.createPages()));v(this,tt,G(()=>this.pages.length));v(this,st,G(()=>this.createPagesWithEllipsis()));v(this,Be,F(y([])));v(this,rt,G(()=>this.createIsAllSelected()));this.rawRows=e,this.rowsPerPage=t.rowsPerPage??null,this.highlight=t.highlight??!1,this.selectBy=t.selectBy}get selectScope(){return l(h(this,Se))}set selectScope(e){_(h(this,Se),y(e))}get rawRows(){return l(h(this,Re))}set rawRows(e){_(h(this,Re),e)}get search(){return l(h(this,He))}set search(e){_(h(this,He),y(e))}get sort(){return l(h(this,Ce))}set sort(e){_(h(this,Ce),y(e))}get filters(){return l(h(this,Fe))}set filters(e){_(h(this,Fe),y(e))}get rowsPerPage(){return l(h(this,Ae))}set rowsPerPage(e){_(h(this,Ae),y(e))}get currentPage(){return l(h(this,Le))}set currentPage(e){_(h(this,Le),y(e))}get element(){return l(h(this,Te))}set element(e){_(h(this,Te),y(e))}get clientWidth(){return l(h(this,Ne))}set clientWidth(e){_(h(this,Ne),y(e))}get filterCount(){return l(h(this,Xe))}get allRows(){return l(h(this,Ye))}get rows(){return l(h(this,Ze))}get rowCount(){return l(h(this,$e))}get pages(){return l(h(this,et))}get pageCount(){return l(h(this,tt))}get pagesWithEllipsis(){return l(h(this,st))}get selected(){return l(h(this,Be))}set selected(e){_(h(this,Be),y(e))}get isAllSelected(){return l(h(this,rt))}createAllRows(){let e=Yt(this.rawRows);if(this.search.value&&(e=e.filter(t=>{const i=(this.search.scope??Object.keys(t)).map(a=>ee(a));for(const{key:a,callback:n}of i)a?t[a]=pt(t[a],this.search.value,this.highlight):this.highlight&&(t=kt(t,n,this.search.value));return i.some(({callback:a})=>ke(a(t),this.search.value,this.search.check))}),this.event.dispatch("change")),this.filterCount>0){for(const{callback:t,value:r,check:i,key:a}of this.filters)e=e.filter(n=>{const d=ke(t(n),r,i);return a?n[a]=pt(n[a],r,this.highlight,i):this.highlight&&d&&r&&typeof r=="string"&&(n=kt(n,t,r)),d});this.event.dispatch("change")}return e}createRows(){return this.rowsPerPage?this.allRows.slice((this.currentPage-1)*this.rowsPerPage,this.currentPage*this.rowsPerPage):this.allRows}createRowCount(){const e=this.allRows.length;return this.rowsPerPage?{total:e,start:this.currentPage*this.rowsPerPage-this.rowsPerPage+1,end:Math.min(this.currentPage*this.rowsPerPage,e),selected:this.selected.length}:{total:e,start:1,end:e,selected:this.selected.length}}createPages(){return this.rowsPerPage?Array.from(Array(Math.ceil(this.allRows.length/this.rowsPerPage))).map((t,r)=>r+1):[1]}createPagesWithEllipsis(){if(this.pageCount<=7)return this.pages;const e=null,t=1,r=this.pageCount;return this.currentPage<=4?[...this.pages.slice(0,5),e,r]:this.currentPage<r-3?[t,e,...this.pages.slice(this.currentPage-2,this.currentPage+1),e,r]:[t,e,...this.pages.slice(r-5,r)]}createIsAllSelected(){if(this.rowCount.total===0||!this.selectBy)return!1;const{callback:e}=ee(this.selectBy);return this.selectScope==="all"?this.allRows.map(e).every(i=>this.selected.includes(i)):this.rows.map(e).every(r=>this.selected.includes(r))}}Se=new WeakMap,Re=new WeakMap,He=new WeakMap,Ce=new WeakMap,Fe=new WeakMap,Ae=new WeakMap,Le=new WeakMap,Te=new WeakMap,Ne=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Ze=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,st=new WeakMap,Be=new WeakMap,rt=new WeakMap;class _s{constructor(e){f(this,"backup");f(this,"table");this.table=e,this.backup=[]}set(e,t,r={}){const{id:i}=ee(e,t);this.table.sort.id!==i&&(this.table.sort.direction=null),this.table.sort.direction===null||this.table.sort.direction==="desc"?this.asc(e,i,r):this.table.sort.direction==="asc"&&this.desc(e,i,r)}asc(e,t,{locales:r,options:i}={}){if(!e)return;const{id:a,callback:n,key:d}=ee(e,t);this.table.sort={id:a,callback:n,direction:"asc",key:d},this.table.rawRows=[...this.table.rawRows].sort((b,c)=>{const[N,X]=[n(b),n(c)];return Qe.asc(N,X,r,i)}),this.save({id:a,callback:n,direction:"asc"}),this.table.setPage(1)}desc(e,t,{locales:r,options:i}={}){if(!e)return;const{id:a,callback:n,key:d}=ee(e,t);this.table.sort={id:a,callback:n,direction:"desc",key:d},this.table.rawRows=[...this.table.rawRows].sort((b,c)=>{const[N,X]=[n(b),n(c)];return Qe.desc(N,X,r,i)}),this.save({id:a,callback:n,direction:"desc"}),this.table.setPage(1)}clear(){this.backup=[],this.table.sort={}}restore(){for(const{key:e,callback:t,direction:r,id:i}of this.backup){const a=e??t;this[r](a,i)}}save(e){if(this.backup=this.backup.filter(t=>t.id!==e.id),this.backup.length>=3){const[t,r,i]=this.backup;this.backup=[r,i,e]}else this.backup=[...this.backup,e]}}class Ps{constructor(e){f(this,"table");this.table=e}set(e,t,r=null,i){this.table.setPage(1);const{callback:a,id:n,key:d}=ee(t,i),b={value:e,id:n,callback:a,check:r,key:d};this.table.filters=this.table.filters.filter(c=>c.id!==n),wt(e)&&this.table.filters.push(b)}unset(e){this.table.setPage(1),this.table.filters=this.table.filters.filter(t=>t.id!==e)}}class ks{constructor(e){f(this,"table");this.table=e}set(e){this.table.selected.includes(e)?this.table.selected=this.table.selected.filter(t=>t!==e):this.table.selected=[e,...this.table.selected]}all(e){const t=e==="currentPage"?this.table.rows:this.table.allRows,{callback:r}=ee(this.table.selectBy),i=t.map(r);e==="currentPage"?this.table.isAllSelected?this.table.selected=this.table.selected.filter(a=>i.includes(a)===!1):this.table.selected=[...i,...this.table.selected]:this.table.isAllSelected?this.clear():this.table.selected=i}clear(){this.table.selected=[]}getRows(){const{callback:e}=ee(this.table.selectBy);return this.table.rawRows.filter(t=>this.table.selected.includes(e(t)))}}class ys{constructor(e){f(this,"table");this.table=e}goto(e){this.table.rowsPerPage&&e>=1&&e<=this.table.pageCount&&(this.table.currentPage=e,this.table.event.dispatch("change"))}previous(){this.goto(this.table.currentPage-1)}next(){this.goto(this.table.currentPage+1)}last(){this.goto(this.table.pageCount)}}class xs{constructor(e){f(this,"table");this.table=e}set(e,t){this.table.setPage(1),this.table.search={value:e,scope:t}}regex(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,check:xe.match}}clear(){this.table.setPage(1),this.table.search={value:""}}}var ze;class Ss{constructor(e,t){v(this,ze,F(y([])));f(this,"table");f(this,"interval");f(this,"mutation");this.table=e,this.columns=[],this.interval=setInterval(()=>this.createColumns(t),200)}get columns(){return l(h(this,ze))}set columns(e){_(h(this,ze),y(e))}toggle(e){if(!this.table.element)return;const t=this.columns.find(r=>r.name===e);t&&t.toggle()}createColumns(e){var t;(t=this.table)!=null&&t.element&&(clearInterval(this.interval),this.columns=e.map(({name:r,index:i,isVisible:a,isFrozen:n})=>({name:r,index:i,isVisible:a!==!1,isFrozen:n===!0,element:this.table.element,toggle(){this.isVisible=!this.isVisible,this.element.querySelectorAll(`tr > *:nth-child(${this.index+1})`).forEach(d=>{d.classList.toggle("hidden")})}})),this.preset(),this.mutation=new MutationObserver(()=>{setTimeout(()=>{this.preset()},2)}),this.mutation.observe(this.table.element,{childList:!0,subtree:!0}))}preset(){let e=0;for(const{isVisible:t,isFrozen:r,index:i}of this.columns)r===!0&&(e=this.freeze(i,e)),t===!1&&this.table.element.querySelectorAll(`tr > *:nth-child(${i+1})`).forEach(a=>{a.classList.add("hidden")})}freeze(e,t=0){const r=this.table.element.querySelector(`thead th:nth-child(${e+1})`),{width:i}=r.getBoundingClientRect();return this.table.element.querySelectorAll(`tr > *:nth-child(${e+1})`).forEach(a=>{a.style.position="sticky",a.style.left=e*t+"px",a.style.width=i+"px"}),i}}ze=new WeakMap;var Ee;class Rs{constructor(e,t){v(this,Ee,F(""));f(this,"scope");f(this,"searchHandler");this.searchHandler=e,this.scope=t,this.cleanup()}get value(){return l(h(this,Ee))}set value(e){_(h(this,Ee),y(e))}set(){this.searchHandler.set(this.value,this.scope)}regex(){this.searchHandler.regex(this.value,this.scope)}clear(){this.value="",this.searchHandler.clear()}cleanup(){this.searchHandler.table.on("clearSearch",()=>this.clear())}}Ee=new WeakMap;const xe={isLike:(s,e)=>D(s).indexOf(D(e))>-1,isNotLike:(s,e)=>D(s).indexOf(D(e))===-1,startsWith:(s,e)=>D(s).startsWith(D(e)),endsWith:(s,e)=>D(s).endsWith(D(e)),isEqualTo:(s,e)=>D(s)===D(e),isNotEqualTo:(s,e)=>D(s)!==D(e),isGreaterThan:(s,e)=>O(s)?!1:s>e,isGreaterThanOrEqualTo:(s,e)=>O(s)?!1:s>=e,isLessThan:(s,e)=>O(s)?!1:s<e,isLessThanOrEqualTo:(s,e)=>O(s)?!1:s<=e,isBetween:(s,[e,t])=>O(s)?!1:s>=e&&s<=t,isStrictlyBetween:(s,[e,t])=>O(s)?!1:s>e&&s<t,isTrue:(s,e)=>s===!0,isFalse:(s,e)=>s===!1,isNull:(s,e)=>O(s),isNotNull:(s,e)=>wt(s),whereIn:(s,e=[])=>{if(O(s)||e.length===0)return!1;for(const{value:t,check:r}of e)if(r(s,t))return!0;return!1},match:(s,e)=>{const t=e.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/),r=t?new RegExp(t[2],t[3].split("").filter((i,a,n)=>n.indexOf(i)===a).join("")):new RegExp(e);return!!D(s).match(r)}};var Me;class Hs{constructor(e,t,r){v(this,Me,F(""));f(this,"id",Math.random().toString(36).substring(2,15));f(this,"filterHandler");f(this,"field");f(this,"check");this.filterHandler=e,this.field=t,this.check=r??xe.isLike,this.cleanup()}get value(){return l(h(this,Me))}set value(e){_(h(this,Me),y(e))}set(e){this.filterHandler.set(this.value,this.field,e??this.check,this.id)}clear(){this.value="",this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Me=new WeakMap;var Oe;class Cs{constructor(e,t,r){v(this,Oe,F(y([])));f(this,"uuid",Math.random().toString(36).substring(2,15));f(this,"filterHandler");f(this,"collection");f(this,"field");f(this,"check");this.filterHandler=e,this.field=t,this.collection=[],this.check=r??xe.isEqualTo,this.cleanup()}get criteria(){return l(h(this,Oe))}set criteria(e){_(h(this,Oe),y(e))}set(e,t){if(this.collection.find(r=>r.value===e)?this.collection=this.collection.filter(r=>r.value!==e):this.collection=[{value:e,check:t??this.check},...this.collection],this.collection.length===0)return this.clear();this.filterHandler.set(this.collection,this.field,xe.whereIn,this.uuid),this.criteria=this.collection.map(r=>r.value)}clear(){this.collection=[],this.criteria=[],this.filterHandler.unset(this.uuid)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Oe=new WeakMap;class Fs{constructor(e,t){f(this,"callback");f(this,"precision");f(this,"table");this.table=e,this.callback=ee(t).callback}distinct(e){const r=this.table.allRows.map(a=>this.callback(a)).reduce((a,n)=>{if(Array.isArray(n)){for(const d of n)a[d]=(a[d]??0)+1;return a}return a[n]=(a[n]??0)+1,a},{}),i=Object.entries(r).map(([a,n])=>({value:a,count:n}));if(e!=null&&e.sort){const[a,n]=e.sort;a==="count"&&i.sort((d,b)=>Qe.asc(d.value,b.value)),i.sort((d,b)=>Qe[n](d[a],b[a]))}return i}avg(e){if(this.precision=(e==null?void 0:e.precision)??2,this.table.allRows.length===0)return 0;const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return this.round(t.reduce((r,i)=>r+i,0)/t.length)}sum(e){this.precision=(e==null?void 0:e.precision)??2;const t=this.table.allRows.map(r=>this.callback(r));return this.round(t.reduce((r,i)=>r+i,0))}bounds(){const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return t.length===0?[null,null]:[Math.min(...t),Math.max(...t)]}round(e){return Number(e.toFixed(this.precision))}}var it,at;class As{constructor(e,t,r){v(this,it,G(()=>this.createDirection()));v(this,at,G(()=>this.createIsActive()));f(this,"id",Math.random().toString(36).substring(2,15));f(this,"sortHandler");f(this,"field");f(this,"params");this.sortHandler=e,this.field=t,this.params=r??{}}get direction(){return l(h(this,it))}get isActive(){return l(h(this,at))}set(){this.sortHandler.set(this.field,this.id,this.params)}asc(){this.sortHandler.asc(this.field,this.id,this.params)}desc(){this.sortHandler.desc(this.field,this.id,this.params)}clear(){this.sortHandler.clear()}createIsActive(){var e;return this.id===((e=this.sortHandler.table.sort)==null?void 0:e.id)}createDirection(){var e;return this.isActive===!1?null:(e=this.sortHandler.table.sort)==null?void 0:e.direction}}it=new WeakMap,at=new WeakMap;class Ls{constructor(e){f(this,"table");this.table=e}download(e){const t=this.get(),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}get(){const e=this.getRows();return e.unshift(this.getHeader().join(",")),e.join(`\r
`)}getRows(){return this.table.allRows.map(e=>Object.entries(e).map(([r,i])=>i===null?"":typeof i=="number"?i:`"${i}"`).join(","))}getHeader(){const[e]=this.table.allRows;return Object.entries(e).map(([t,r])=>`"${t}"`)}}var je,lt,qe,Ie;class Ts{constructor(e){v(this,je,F(""));v(this,lt,G(()=>this.createRecords()));v(this,qe,F([]));v(this,Ie,F(""));this.rawRecords=e}get value(){return l(h(this,je))}set value(e){_(h(this,je),y(e))}get records(){return l(h(this,lt))}get rawRecords(){return l(h(this,qe))}set rawRecords(e){_(h(this,qe),e)}get filter(){return l(h(this,Ie))}set filter(e){_(h(this,Ie),y(e))}set(){this.filter=this.value}createRecords(){return wt(this.filter)?this.rawRecords.filter(e=>ke(e,this.filter)):this.rawRecords}}je=new WeakMap,lt=new WeakMap,qe=new WeakMap,Ie=new WeakMap;class Ns extends ws{constructor(t=[],r={rowsPerPage:null}){super(t,r);f(this,"i18n");f(this,"view");f(this,"sortHandler");f(this,"filterHandler");f(this,"selectHandler");f(this,"pageHandler");f(this,"searchHandler");this.translate(r.i18n),this.sortHandler=new _s(this),this.filterHandler=new Ps(this),this.selectHandler=new ks(this),this.pageHandler=new ys(this),this.searchHandler=new xs(this)}setRows(t){var i;const r=((i=this.element)==null?void 0:i.scrollTop)??0;this.rawRows=t,It(()=>{this.event.dispatch("change"),this.sortHandler.restore(),this.element&&setTimeout(()=>this.element.scrollTop=r,2)})}setRowsPerPage(t){this.rowsPerPage=t,this.setPage(1)}setPage(t){switch(t){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();case"last":return this.pageHandler.last();default:return this.pageHandler.goto(t)}}clearSearch(){this.searchHandler.clear(),this.event.dispatch("clearSearch"),this.setPage(1)}createSearch(t){return new Rs(this.searchHandler,t)}createRecordFilter(t){return new Ts(t)}createSort(t,r){return new As(this.sortHandler,t,r)}clearSort(){this.sortHandler.clear()}clearFilters(){this.filters=[],this.event.dispatch("clearFilters"),this.setPage(1)}createAdvancedFilter(t,r){return new Cs(this.filterHandler,t,r)}createFilter(t,r){return new Hs(this.filterHandler,t,r)}select(t){this.selectHandler.set(t)}selectAll(t={}){this.selectScope=t.scope==="all"?"all":"currentPage",this.selectHandler.all(this.selectScope)}getSelectedRows(){return this.selectHandler.getRows()}clearSelection(){this.selectHandler.clear()}on(t,r){this.event.add(t,r)}createCalculation(t){return new Fs(this,t)}createCSV(){return new Ls(this)}createView(t){return this.view=new Ss(this,t),this.view}getView(){return this.view}translate(t){this.i18n={search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...t}}}function Bs(s,e,t){return{key:s,header:e,sortable:(t==null?void 0:t.sortable)||!1,filterable:(t==null?void 0:t.filterable)||!1,translate:(t==null?void 0:t.translate)||void 0}}function $s(s,e){return{key:"",header:s,sortable:!1,filterable:!1,component:e,translate:void 0}}var zs=H('<input type="text" class="input" style="max-width: 30ch" spellcheck="false">'),Es=H("<th> </th>"),Ms=H("<th></th>"),Os=H("<tr></tr>"),js=H("<tr></tr> <!>",1),qs=H('<td class="!align-middle" role="gridcell"><!></td>'),Is=H("<tr></tr>"),Ws=H("<footer><!></footer>"),Ds=H('<section class="space-y-2"><header><!></header> <div class="overflow-x-scroll"><table class="table table-compact table-hover"><thead><!></thead><tbody><!></tbody></table></div> <!></section>');function er(s,e){nt(e,!0);let t=m(e,"columns",15,void 0),r=m(e,"filterable",3,!1),i=m(e,"rowsPerPage",3,20),a=m(e,"search",3,!0),n=m(e,"pagination",3,!0);t()==null&&t(Object.keys(e.data[0]).map(g=>Bs(g,g)));let d=F(y({page:0,limit:i(),size:e.data.length,amounts:[5,10,20,50,100]}));const b=new Ns(e.data,{rowsPerPage:i(),selectBy:"id"}),c=b.createSearch();b.on("clearSearch",()=>c.clear()),Wt(()=>{e.data,N()});const N=()=>{b.element&&b.element.parentElement&&(b.element.parentElement.scrollTop,setTimeout(()=>{},2))};function X(g,x){if(g.target instanceof Element&&g.target.tagName!="TD")return;g.preventDefault(),g.stopPropagation();const j=e.data[x];e.selected&&e.selected(j)}function We(g,x){["Enter","Space"].includes(g.code)&&X(g,x)}function ot(g){b.setPage(g.detail.valueOf()+1)}function J(g){b.setRowsPerPage(g.detail.valueOf())}var ue=Ds(),fe=P(ue),De=P(fe);{var Ve=g=>{var x=zs();yt(x),x.__input=()=>c.set(),C(()=>$(x,"placeholder",b.i18n.search)),xt(x,()=>c.value,j=>c.value=j),p(g,x)};T(De,g=>{a()&&g(Ve)})}w(fe);var de=U(fe,2),ge=P(de),be=P(ge),te=P(be);{var ht=g=>{var x=js(),j=oe(x);_e(j,21,t,Pe,(S,R)=>{var q=we(),A=oe(q);{var Y=V=>{bs(V,{table:b,get field(){return l(R).key},children:(z,E)=>{Dt();var I=vt();C(()=>ie(I,l(R).header)),p(z,I)},$$slots:{default:!0}})},B=V=>{var z=Es(),E=P(z,!0);w(z),C(()=>ie(E,l(R).header)),p(V,z)};T(A,V=>{l(R).sortable?V(Y):V(B,!1)})}p(S,q)}),w(j);var ae=U(j,2);{var le=S=>{var R=Os();_e(R,21,t,Pe,(q,A)=>{var Y=we(),B=oe(Y);{var V=E=>{ms(E,{table:b,get field(){return l(A).key}})},z=E=>{var I=Ms();p(E,I)};T(B,E=>{l(A).filterable?E(V):E(z,!1)})}p(q,Y)}),w(R),p(S,R)};T(ae,S=>{r()&&S(le)})}p(g,x)};T(te,g=>{t()&&g(ht)})}w(be);var Je=U(be),ut=P(Je);{var ft=g=>{var x=we(),j=oe(x);_e(j,17,()=>b.rows,Pe,(ae,le,S)=>{var R=Is();R.__click=q=>{X(q,S)},R.__keydown=q=>{We(q,S)},$(R,"aria-rowindex",S+1),_e(R,21,t,Pe,(q,A,Y)=>{var B=qs();$(B,"aria-colindex",Y+1),$(B,"tabindex",Y===0?0:-1);var V=P(B);{var z=I=>{var Z=we(),ve=oe(Z);Gt(ve,()=>l(A).component,(ye,me)=>{me(ye,{get row(){return l(le)}})}),p(I,Z)},E=I=>{var Z=we(),ve=oe(Z);{var ye=se=>{var re=vt();C(()=>ie(re,l(A).translate(l(le)[l(A).key]))),p(se,re)},me=se=>{var re=vt();C(()=>ie(re,l(le)[l(A).key])),p(se,re)};T(ve,se=>{l(A).translate?se(ye):se(me,!1)},!0)}p(I,Z)};T(V,I=>{l(A).component?I(z):I(E,!1)})}w(B),p(q,B)}),w(R),p(ae,R)}),p(g,x)};T(ut,g=>{t()&&g(ft)})}w(Je),w(ge),Jt(ge,g=>b.element=g,()=>b==null?void 0:b.element),w(de);var dt=U(de,2);{var gt=g=>{var x=Ws(),j=P(x);us(j,{showFirstLastButtons:!1,showPreviousNextButtons:!0,get settings(){return l(d)},set settings(ae){_(d,y(ae))},$$events:{page:ot,amount:J}}),w(x),p(g,x)};T(dt,g=>{n()&&g(gt)})}w(ue),p(s,ue),ct()}he(["input","click","keydown"]);export{er as S,$s as a,Bs as c};
