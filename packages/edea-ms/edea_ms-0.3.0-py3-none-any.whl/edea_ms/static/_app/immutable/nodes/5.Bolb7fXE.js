import{g as M}from"../chunks/helpers.DL81ApkI.js";import{e as A}from"../chunks/index.DDgd0KB9.js";import{a as h,t as j,d as B,b as x}from"../chunks/disclose-version.R4vLOQNQ.js";import{p as E,a as F,s as y,c as r,r as t,t as z,f as G,q as a,x as P}from"../chunks/index-client.rJPuloIY.js";import{p as H,i as J}from"../chunks/props.CRPfZ7lw.js";import{m as K,e as T,i as w,s as N}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.CPHjajrS.js";import"../chunks/legacy.2nIxhB3F.js";import{V as Q}from"../chunks/VegaLite.9NT-XMw_.js";const U=async({fetch:b,url:n})=>{var v;let C=n.searchParams.get("id"),p=(v=n.searchParams.get("testruns"))==null?void 0:v.split(",").sort();const m=await b("/api/projects/"+C).then(o=>(o.ok||A(o.status,o.statusText),o.json()));let l=[];if(p)for(var c of p){const{run:o,measurements:g}=await M(b,c);l.push({run:o,measurements:g})}return{project:m,runs:l}},dt=Object.freeze(Object.defineProperty({__proto__:null,load:U},Symbol.toStringTag,{value:"Module"}));var W=j("<th> </th>"),X=j("<td><p><a> </a></p> <p> </p> <!></td>"),Y=j("<td><p> </p></td>"),Z=j('<div class="container mx-auto p-8 space-y-8"><h2 class="h2">Compare testruns</h2> <table class="table table-hover"><thead><tr></tr></thead><tbody><tr></tr></tbody></table></div>');function ut(b,n){E(n,!0);let p=H({theme:void 0,actions:{export:!0,source:!1,compiled:!0,editor:!1}});K.subscribe(_=>{p.theme=_?void 0:"dark"});var m=Z(),l=y(r(m),2),c=r(l),v=r(c);T(v,21,()=>n.data.runs,w,(_,e)=>{var i=W(),S=r(i);t(i),z(()=>x(S,`ID: ${a(e).run.id??""}, SC: ${a(e).run.short_code??""}`)),h(_,i)}),t(v),t(c);var o=y(c),g=r(o);T(g,21,()=>n.data.runs,w,(_,e)=>{var i=B(),S=G(i);{var D=d=>{var s=X(),u=r(s),f=r(u),V=r(f);t(f),t(u);var k=y(u,2),$=r(k);t(k);var q=y(k,2),I=P(()=>({measurements:a(e).measurements})),L=P(()=>{var O;return(O=a(e).run.data)==null?void 0:O.vega_lite});Q(q,{get data(){return a(I)},get spec(){return a(L)},get options(){return p}}),t(s),z(()=>{N(f,"href",`/testruns/${a(e).run.id??""}`),x(V,`Run ${a(e).run.id??""}`),x($,`Started at ${a(e).run.started_at??""}, completed at ${a(e).run.completed_at??""}`)}),h(d,s)},R=d=>{var s=Y(),u=r(s),f=r(u);t(u),t(s),z(()=>x(f,`no viz for ${a(e).run.id??""}`)),h(d,s)};J(S,d=>{var s;(s=a(e).run.data)!=null&&s.vega_lite?d(D):d(R,!1)})}h(_,i)}),t(g),t(o),t(l),t(m),h(b,m),F()}export{ut as component,dt as universal};
